{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/canvas/draw.js","webpack:///./src/component/border_palette.js","webpack:///./src/component/bottombar.js","webpack:///./src/component/button.js","webpack:///./src/component/calendar.js","webpack:///./src/component/color_palette.js","webpack:///./src/component/contextmenu.js","webpack:///./src/component/datepicker.js","webpack:///./src/component/dropdown.js","webpack:///./src/component/dropdown_align.js","webpack:///./src/component/dropdown_border.js","webpack:///./src/component/dropdown_color.js","webpack:///./src/component/dropdown_font.js","webpack:///./src/component/dropdown_fontsize.js","webpack:///./src/component/dropdown_format.js","webpack:///./src/component/dropdown_formula.js","webpack:///./src/component/dropdown_linetype.js","webpack:///./src/component/editor.js","webpack:///./src/component/element.js","webpack:///./src/component/event.js","webpack:///./src/component/form_field.js","webpack:///./src/component/form_input.js","webpack:///./src/component/form_select.js","webpack:///./src/component/icon.js","webpack:///./src/component/message.js","webpack:///./src/component/modal.js","webpack:///./src/component/modal_jumpto.js","webpack:///./src/component/modal_validation.js","webpack:///./src/component/print.js","webpack:///./src/component/resizer.js","webpack:///./src/component/scrollbar.js","webpack:///./src/component/selector.js","webpack:///./src/component/sheet.js","webpack:///./src/component/sort_filter.js","webpack:///./src/component/suggest.js","webpack:///./src/component/table.js","webpack:///./src/component/toolbar/align.js","webpack:///./src/component/toolbar/autofilter.js","webpack:///./src/component/toolbar/bold.js","webpack:///./src/component/toolbar/border.js","webpack:///./src/component/toolbar/clearformat.js","webpack:///./src/component/toolbar/dropdown_item.js","webpack:///./src/component/toolbar/fill_color.js","webpack:///./src/component/toolbar/font.js","webpack:///./src/component/toolbar/font_size.js","webpack:///./src/component/toolbar/format.js","webpack:///./src/component/toolbar/formula.js","webpack:///./src/component/toolbar/freeze.js","webpack:///./src/component/toolbar/icon_item.js","webpack:///./src/component/toolbar/index.js","webpack:///./src/component/toolbar/italic.js","webpack:///./src/component/toolbar/item.js","webpack:///./src/component/toolbar/jumptocell.js","webpack:///./src/component/toolbar/merge.js","webpack:///./src/component/toolbar/more.js","webpack:///./src/component/toolbar/paintformat.js","webpack:///./src/component/toolbar/print.js","webpack:///./src/component/toolbar/redo.js","webpack:///./src/component/toolbar/strike.js","webpack:///./src/component/toolbar/text_color.js","webpack:///./src/component/toolbar/textwrap.js","webpack:///./src/component/toolbar/toggle_item.js","webpack:///./src/component/toolbar/underline.js","webpack:///./src/component/toolbar/undo.js","webpack:///./src/component/toolbar/valign.js","webpack:///./src/component/tooltip.js","webpack:///./src/config.js","webpack:///./src/core/_.prototypes.js","webpack:///./src/core/alphabet.js","webpack:///./src/core/auto_filter.js","webpack:///./src/core/cell.js","webpack:///./src/core/cell_range.js","webpack:///./src/core/clipboard.js","webpack:///./src/core/col.js","webpack:///./src/core/data_proxy.js","webpack:///./src/core/font.js","webpack:///./src/core/format.js","webpack:///./src/core/formula.js","webpack:///./src/core/helper.js","webpack:///./src/core/history.js","webpack:///./src/core/merge.js","webpack:///./src/core/row.js","webpack:///./src/core/scroll.js","webpack:///./src/core/selector.js","webpack:///./src/core/validation.js","webpack:///./src/core/validator.js","webpack:///./src/index.js","webpack:///./src/index.less","webpack:///./src/locale/en.js","webpack:///./src/locale/locale.js"],"names":["dpr","window","devicePixelRatio","thinLineWidth","npx","px","parseInt","npxLine","n","DrawBox","x","y","w","h","padding","width","height","bgcolor","borderTop","borderRight","borderBottom","borderLeft","top","bottom","left","right","align","drawFontLine","type","tx","ty","valign","blheight","blwidth","floffset","line","Draw","el","ctx","getContext","resize","scale","style","clearRect","options","Object","assign","save","beginPath","restore","translate","fillRect","text","fillText","mtxt","box","attr","textWrap","font","color","strike","underline","textx","textAlign","textBaseline","italic","bold","size","name","fillStyle","strokeStyle","txts","split","biw","innerWidth","ntxts","forEach","it","txtWidth","measureText","textLine","len","start","i","length","push","substr","txtHeight","texty","txt","call","lineWidth","setLineDash","moveTo","x1","y1","lineTo","stroke","border","topxys","rightxys","bottomxys","leftxys","sx","sy","closePath","fill","dtextcb","rect","clip","buildTable","child","children","buildTd","iconName","cssPrefix","Icon","on","mode","change","BorderPalette","ddColor","DropdownColor","ddType","DropdownLineType","s","table","map","DropdownMore","click","icon","contentClick","items","eles","css","hide","setContentChildren","Dropdown","menuItems","key","title","tf","buildMenuItem","item","itemClick","buildMenu","ContextMenu","unbindClickoutside","offset","show","bindClickoutside","Bottombar","addFunc","swapFunc","deleteFunc","updateFunc","dataNames","activeEl","deleteEl","moreEl","clickSwap2","contextMenu","menuEl","active","evt","target","offsetLeft","offsetHeight","setOffset","v","html","input","FormInput","val","value","nindex","findIndex","renameItem","focus","clickSwap","reset","index","splice","removeChild","f","toggle","Button","t","Element","addMonth","date","step","setMonth","getMonth","weekday","d","Date","setDate","getDay","monthDays","year","month","cdate","startDate","datess","j","disabled","getDate","Calendar","cvalue","headerLeftEl","bodyEl","buildAll","prev","next","week","selectChange","buildHeaderLeft","buildBody","getFullYear","mDays","trs","tds","it1","cls","toString","themeColorPlaceHolders","themeColors","standardColors","ColorPalette","label","viewFn","isHide","setMode","hideEl","view","vhf","Datepicker","calendar","test","setValue","replace","RegExp","cb","showArrow","placement","headerClick","addClass","contentEl","headerEl","parent","buildItemWithIcon","DropdownAlign","aligns","naligns","setTitle","setName","DropdownBorder","borderPalette","colorPalette","DropdownFont","nfonts","baseFonts","DropdownFontSize","nfontSizes","fontSizes","pt","DropdownFormat","nformats","baseFormats","slice","DropdownFormula","nformulas","baseFormulas","lineTypes","beforei","lineTypeEls","iti","resetTextareaSize","inputText","textlineEl","textEl","areaOffset","maxTxtSize","Math","max","tlOffset","fontWidth","tlineWidth","maxWidth","h1","twidth","rowHeight","insertText","itxt","selectionEnd","ntxt","setSelectionRange","keydownEventHandler","keyCode","altKey","stopPropagation","preventDefault","inputEventHandler","suggest","validator","cell","editable","undefined","search","lastIndexOf","substring","setTextareaRange","position","setTimeout","setText","blur","suggestItemClick","console","log","sit","eit","indexOf","clear","resetSuggestItems","setItems","formulas","dateFormat","Editor","Suggest","datepicker","areaEl","scrollbar","bindInputEvents","freeze","suggestPosition","l","elOffset","sOffset","values","tag","className","document","createElement","data","eventNames","handler","fen","oen","eventName","navigator","userAgent","addEventListener","k","button","keys","offsetTop","offsetWidth","scrollLeft","scrollTop","getBoundingClientRect","parentNode","arguments","childNodes","ele","arg","createTextNode","contains","warn","appendChild","classList","add","remove","toggleClass","flag","removeClass","setAttribute","getAttribute","removeAttribute","content","innerHTML","removeProperty","getComputedStyle","bind","fn","unbind","removeEventListener","xclickoutside","body","detail","mouseMoveUp","movefunc","upfunc","xEvtUp","calTouchDirection","spanx","spany","direction","abs","bindTouch","move","end","startx","starty","touches","pageX","pageY","changedTouches","createEventEmitter","listeners","Map","callback","has","currentListener","get","Array","isArray","set","concat","fire","args","removeListener","idx","once","execCalllback","removeAllListeners","getAllListeners","patterns","number","FormField","rule","labelWidth","tip","vchange","validate","hint","required","pattern","FormSelect","getTitle","itemEl","iconNameEl","xtoast","dimmer","documentElement","clientHeight","clientWidth","Modal","xkeydownEsc","fieldLabelWidth","ModalJumpTo","ff","btnClick","action","ModalValidation","mf","rf","cf","criteriaSelected","of","criteriaOperatorSelected","minvf","maxvf","svf","vf","attrs","field","isShow","ref","operator","PAGER_SIZES","PAGER_ORIENTATIONS","inches2px","inc","toPrint","pagerSizeChange","paper","ps","preview","pagerOrientationChange","orientation","Print","iwidth","iheight","cr","contentRange","pages","ri","yoffset","canvases","mViewRange","sri","sci","eri","eci","th","yo","wrap","canvas","draw","rh","rows","getHeight","ci","renderCell","yof","eachMergesInView","iframe","contentWindow","idoc","head","cn","cloneNode","drawImage","print","Resizer","vertical","minDistance","moving","unhideHoverEl","mousedblclickHandler","hoverEl","mousedownHandler","lineEl","cRect","finishedFn","unhideFn","unhideIndex","hideUnhide","startEvt","distance","e","buttons","movementX","movementY","Scrollbar","moveFn","scroll","contentDistance","cssKey","selectorHeightBorderWidth","startZIndex","SelectorElement","useHideInput","inputChange","cornerEl","clipboardEl","autofillEl","hideInput","hideInputDiv","calBRAreaOffset","ftwidth","freezeTotalWidth","ftheight","freezeTotalHeight","left0","top0","calTAreaOffset","calLAreaOffset","setBRAreaOffset","br","setAreaOffset","setTLAreaOffset","tl","setTAreaOffset","setLAreaOffset","setLClipboardOffset","setClipboardOffset","setBRClipboardOffset","setTLClipboardOffset","setTClipboardOffset","setAllAreaOffset","setAllClipboardOffset","Selector","indexes","range","arange","lastri","lastci","selector","resetAreaOffset","freezeHeight","freezeWidth","getSelectedRect","coffset","getClipboardRect","resetOffset","indexesUpdated","cellRange","calSelectedRangeByStart","cri","cci","setIndexes","moveIndexes","calSelectedRangeByEnd","setEnd","nri","nci","srn","scn","ern","ecn","CellRange","getRect","showAutofill","property","hideAutofill","showClipboard","hideClipboard","throttle","func","wait","timeout","that","apply","scrollbarMove","verticalScrollbar","horizontalScrollbar","tableOffset","getTableOffset","fsw","fsh","selectorSet","multiple","toolbar","getCell","trigger","render","selectorMove","cols","overlayerMousemove","offsetX","offsetY","rowResizer","colResizer","tableEl","indexWidth","tRect","getCellRectByXY","showUnhide","overlayerMousescroll","deltaY","deltaX","loopValue","ii","vFunc","moveY","moveX","horizontal","cw","getWidth","tempY","tempX","temp","overlayerTouch","verticalScrollbarSet","erth","exceptRowTotalHeight","totalHeight","horizontalScrollbarSet","totalWidth","sheetFreeze","editor","fwidth","fheight","setFreezeLengths","sheetReset","overlayerEl","overlayerCEl","tOffset","vRect","clearClipboard","copy","copyToSystemClipboard","cut","paste","what","settings","msg","cdata","clipboardData","getData","pasteFromText","hideRowsOrCols","unhideRowsOrCols","autofilter","toolbarChangePaintformatPaste","paintformatActive","paintformatToggle","overlayerMousedown","sortFilter","isAutofillEl","cellRect","autoFilter","includes","r","c","getFilter","getSort","shiftKey","autofill","editorSetOffset","sPosition","editorSet","setCell","getSelectedCell","getSelectedValidator","verticalScrollbarMove","scrolly","resetBRLAreaOffset","horizontalScrollbarMove","scrollx","resetBRTAreaOffset","rowResizerFinished","setHeight","colResizerFinished","setWidth","dataSetCellText","state","setSelectedCellText","insertDeleteRowColumn","insert","deleteCell","setSelectedCellAttr","toolbarChange","undo","redo","modalJumpTo","showTo","sortFilterChange","order","setAutoFilter","sheetInitEvents","modalValidation","xyInSelectedRect","setPosition","ok","o","itext","addValidation","removeValidation","row","isNaN","Number","getSelectedValidation","reload","focusing","which","ctrlKey","metaKey","Sheet","targetEl","eventMap","showToolbar","showContextmenu","Toolbar","minWidth","SortFilter","Table","resetData","setData","setFreeze","viewWidth","viewHeight","clsName","buildSortItem","buildFilterBody","filterbEl","filterValues","itemKeys","cnt","filterClick","resetFilterHeader","filterhEl","checked","sortAscEl","sortDescEl","sortDesc","sort","from","filter","asc","desc","tindex","inputMovePrev","filterItems","itemIndex","inputMoveNext","inputEnter","inputKeydownHandler","cssRemoveKeys","word","startsWith","toUpperCase","cellPaddingWidth","tableFixedHeaderCleanStyle","tableGridStyle","tableFixedHeaderStyle","getDrawBox","rindex","cindex","sortedRowMap","nrindex","frozen","getCellStyleOrDefault","dbox","setBorders","strokeBorders","cellText","evalPaused","_cell","formulam","getCellTextOrDefault","format","formatm","getFontSizePxByPt","textwrap","error","validations","getError","changed","renderAutofilter","viewRange","afRange","hrange","intersects","each","dropdown","renderContent","fw","fh","exceptRowSet","filteredTranslateFunc","ret","rset","Set","sumHeight","renderSelectedHeaderCell","renderFixedHeaders","sumWidth","nty","ntx","rowEach","colEach","colWidth","stringAt","renderFixedLeftTopCell","renderContentGrid","dx","dy","showGrid","ch","renderFreezeHighlightLine","ftw","fth","theight","fri","fci","vr","clone","freezeViewRange","Align","DropdownItem","Autofilter","ToggleItem","Bold","Border","Clearformat","IconItem","dd","getValue","Item","FillColor","Font","Format","DropdownFontsize","Freeze","buildDivider","initBtns2","btns2","computedStyle","marginLeft","marginRight","moreResize","btns","moreBtns","widthFn","elBox","sumWidth2","list1","list2","defaultStyle","undoEl","Undo","redoEl","Redo","paintformatEl","Paintformat","clearformatEl","formatEl","fontEl","fontSizeEl","FontSize","boldEl","italicEl","Italic","underlineEl","Underline","strikeEl","Strike","textColorEl","TextColor","fillColorEl","borderEl","mergeEl","Merge","alignEl","valignEl","Valign","textwrapEl","Textwrap","freezeEl","autofilterEl","formulaEl","Formula","More","jumpToCellEl","JumpToCell","getSelectedCellStyle","setState","canUndo","canRedo","canUnmerge","canAutofilter","freezeIsActive","shortcut","element","tooltip","hasClass","alphabets","str","last","indexAt","charCodeAt","exponet","expr2xy","src","charAt","xy2expr","expr2expr","xn","yn","condition","Filter","Sort","AutoFilter","filters","fset","ctext","m","valueOf","infixExprToSuffixExpr","operatorStack","stack","subStrs","fnArgType","fnArgOperator","fnArgsLen","oldc","join","c1","pop","ex","ey","rangelen","nc","evalSubExpr","subExpr","cellRender","fl","expr","cellValue","regex","cellValueReg","evalSuffixExpr","srcStack","formulaMap","cellList","fc","numberCalc","formula","params","reverse","getCellText","rowFilter","other","addRet","dsr","dsc","der","dec","refs","Clipboard","Cols","_","col","getOrNew","setHide","min","helper","rangeSum","defaultSettings","toolbarHeight","bottombarHeight","canPaste","dst","merges","drn","dcn","copyPaste","srcCellRange","dstCellRange","deleteCells","deleteWithin","merge","rn","cutPaste","clipboard","setStyleBorder","bss","styles","getCellOrNew","cstyle","cloneDeep","addStyle","setStyleBorders","isSignleSelected","ns","mergeIndexes","mri","mci","mrl","mcl","getCellMerge","getCellRowByY","scrollOffsety","inits","frset","getCellColByX","scrollOffsetx","rangeReduceIf","DataProxy","Merges","Rows","Validations","hyperlinks","comments","Scroll","history","History","unsortedRowMap","changeData","copyText","rowData","hasOwnProperty","cells","String","writeText","then","err","isClear","isCopy","isCut","lines","srcRange","union","getFirstIncludes","unmerge","nfont","oldCell","oldText","setCellText","vIndex","addFilter","setSort","resetAutoFilter","filteredRows","fary","oldAry","a","b","si","insertColumn","shift","rsize","csize","deleteColumn","cellStyle","maxCell","exceptRows","exceptRowTH","filterIntersects","rlen","clen","unhide","frary","nstyle","equals","fontSize","fonts","ary","formatStringRender","formatNumberRender","v1","toFixed","first","parts","reduce","numberAvarage","every","some","obj","JSON","parse","stringify","mergeDeep","object","sources","source","obj1","obj2","v2","ai","sum","objOrAry","total","deleteProperty","oldv","initv","ifv","getv","rangeEach","arrayEquals","a1","a2","digits","convertStringToNumber","regexValue","allMatches","match","prefix","sufix","receivedObject","al1","al2","num1","num2","numbersArray","newSum","undoItems","redoItems","currentd","within","cbWithin","exceptSet","dsri","dsci","deri","deci","isAdd","dn","jj","ncell","result","exec","ncellmm","eachCells","ndata","rndata","ks","entries","Validation","nrefs","crs","difference","Validator","errors","message","getByValidator","addRef","rules","phone","email","returnMessage","parseValue","Spreadsheet","selectors","sheetIndex","datas","querySelector","bottombar","addSheet","sheet","deleteSheet","rootEl","addItem","deleteItem","oldIndex","ds","nd","getCellStyle","jump","lang","locale","spreadsheet","x_spreadsheet","paintformat","clearformat","fontName","fontBold","fontItalic","jumpToCell","more","contextmenu","pasteValue","pasteFormat","insertRow","deleteRow","deleteCellText","validation","cellprintable","cellnonprintable","celleditable","cellnoneditable","orientations","normal","percent","rmb","usd","eur","time","datetime","duration","average","_if","and","or","notMatch","between","notBetween","notIn","equal","notEqual","lessThan","lessThanEqual","greaterThan","greaterThanEqual","pasteForMergedCell","weeks","months","cancel","empty","dataValidation","criteria","modeType","column","list","be","nbe","lt","lte","gt","gte","eq","neq","$languages","$messages","en","messages","clearLangList","unshift"],"mappings":"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","file":"xspreadsheet.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/index.js\");\n","/* global window */\r\nfunction dpr() {\r\n  return window.devicePixelRatio || 1;\r\n}\r\n\r\nfunction thinLineWidth() {\r\n  return dpr() - 0.5;\r\n}\r\n\r\nfunction npx(px) {\r\n  return parseInt(px * dpr(), 10);\r\n}\r\n\r\nfunction npxLine(px) {\r\n  const n = npx(px);\r\n  return n > 0 ? n - 0.5 : 0.5;\r\n}\r\n\r\nclass DrawBox {\r\n  constructor(x, y, w, h, padding = 0) {\r\n    this.x = x;\r\n    this.y = y;\r\n    this.width = w;\r\n    this.height = h;\r\n    this.padding = padding;\r\n    this.bgcolor = '#ffffff';\r\n    // border: [width, style, color]\r\n    this.borderTop = null;\r\n    this.borderRight = null;\r\n    this.borderBottom = null;\r\n    this.borderLeft = null;\r\n  }\r\n\r\n  setBorders({\r\n    top, bottom, left, right,\r\n  }) {\r\n    if (top) this.borderTop = top;\r\n    if (right) this.borderRight = right;\r\n    if (bottom) this.borderBottom = bottom;\r\n    if (left) this.borderLeft = left;\r\n  }\r\n\r\n  innerWidth() {\r\n    return this.width - (this.padding * 2) - 2;\r\n  }\r\n\r\n  innerHeight() {\r\n    return this.height - (this.padding * 2) - 2;\r\n  }\r\n\r\n  textx(align) {\r\n    const { width, padding } = this;\r\n    let { x } = this;\r\n    if (align === 'left') {\r\n      x += padding;\r\n    } else if (align === 'center') {\r\n      x += width / 2;\r\n    } else if (align === 'right') {\r\n      x += width - padding;\r\n    }\r\n    return x;\r\n  }\r\n\r\n  texty(align, h) {\r\n    const { height, padding } = this;\r\n    let { y } = this;\r\n    if (align === 'top') {\r\n      y += padding;\r\n    } else if (align === 'middle') {\r\n      y += height / 2 - h / 2;\r\n    } else if (align === 'bottom') {\r\n      y += height - padding - h;\r\n    }\r\n    return y;\r\n  }\r\n\r\n  topxys() {\r\n    const { x, y, width } = this;\r\n    return [[x, y], [x + width, y]];\r\n  }\r\n\r\n  rightxys() {\r\n    const {\r\n      x, y, width, height,\r\n    } = this;\r\n    return [[x + width, y], [x + width, y + height]];\r\n  }\r\n\r\n  bottomxys() {\r\n    const {\r\n      x, y, width, height,\r\n    } = this;\r\n    return [[x, y + height], [x + width, y + height]];\r\n  }\r\n\r\n  leftxys() {\r\n    const {\r\n      x, y, height,\r\n    } = this;\r\n    return [[x, y], [x, y + height]];\r\n  }\r\n}\r\n\r\nfunction drawFontLine(type, tx, ty, align, valign, blheight, blwidth) {\r\n  const floffset = { x: 0, y: 0 };\r\n  if (type === 'underline') {\r\n    if (valign === 'bottom') {\r\n      floffset.y = 0;\r\n    } else if (valign === 'top') {\r\n      floffset.y = -(blheight + 2);\r\n    } else {\r\n      floffset.y = -blheight / 2;\r\n    }\r\n  } else if (type === 'strike') {\r\n    if (valign === 'bottom') {\r\n      floffset.y = blheight / 2;\r\n    } else if (valign === 'top') {\r\n      floffset.y = -((blheight / 2) + 2);\r\n    }\r\n  }\r\n\r\n  if (align === 'center') {\r\n    floffset.x = blwidth / 2;\r\n  } else if (align === 'right') {\r\n    floffset.x = blwidth;\r\n  }\r\n  this.line(\r\n    [tx - floffset.x, ty - floffset.y],\r\n    [tx - floffset.x + blwidth, ty - floffset.y],\r\n  );\r\n}\r\n\r\nclass Draw {\r\n  constructor(el, width, height) {\r\n    this.el = el;\r\n    this.ctx = el.getContext('2d');\r\n    this.resize(width, height);\r\n    this.ctx.scale(dpr(), dpr());\r\n  }\r\n\r\n  resize(width, height) {\r\n    // console.log('dpr:', dpr);\r\n    this.el.style.width = `${width}px`;\r\n    this.el.style.height = `${height}px`;\r\n    this.el.width = npx(width);\r\n    this.el.height = npx(height);\r\n  }\r\n\r\n  clear() {\r\n    const { width, height } = this.el;\r\n    this.ctx.clearRect(0, 0, width, height);\r\n    return this;\r\n  }\r\n\r\n  attr(options) {\r\n    Object.assign(this.ctx, options);\r\n    return this;\r\n  }\r\n\r\n  save() {\r\n    this.ctx.save();\r\n    this.ctx.beginPath();\r\n    return this;\r\n  }\r\n\r\n  restore() {\r\n    this.ctx.restore();\r\n    return this;\r\n  }\r\n\r\n  beginPath() {\r\n    this.ctx.beginPath();\r\n    return this;\r\n  }\r\n\r\n  translate(x, y) {\r\n    this.ctx.translate(npx(x), npx(y));\r\n    return this;\r\n  }\r\n\r\n  scale(x, y) {\r\n    this.ctx.scale(x, y);\r\n    return this;\r\n  }\r\n\r\n  clearRect(x, y, w, h) {\r\n    this.ctx.clearRect(x, y, w, h);\r\n    return this;\r\n  }\r\n\r\n  fillRect(x, y, w, h) {\r\n    this.ctx.fillRect(npx(x) - 0.5, npx(y) - 0.5, npx(w), npx(h));\r\n    return this;\r\n  }\r\n\r\n  fillText(text, x, y) {\r\n    this.ctx.fillText(text, npx(x), npx(y));\r\n    return this;\r\n  }\r\n\r\n  /*\r\n    txt: render text\r\n    box: DrawBox\r\n    attr: {\r\n      align: left | center | right\r\n      valign: top | middle | bottom\r\n      color: '#333333',\r\n      strike: false,\r\n      font: {\r\n        name: 'Arial',\r\n        size: 14,\r\n        bold: false,\r\n        italic: false,\r\n      }\r\n    }\r\n    textWrap: text wrapping\r\n  */\r\n  text(mtxt, box, attr = {}, textWrap = true) {\r\n    const { ctx } = this;\r\n    const {\r\n      align, valign, font, color, strike, underline,\r\n    } = attr;\r\n    const tx = box.textx(align);\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    this.attr({\r\n      textAlign: align,\r\n      textBaseline: valign,\r\n      font: `${font.italic ? 'italic' : ''} ${font.bold ? 'bold' : ''} ${npx(font.size)}px ${font.name}`,\r\n      fillStyle: color,\r\n      strokeStyle: color,\r\n    });\r\n    const txts = `${mtxt}`.split('\\n');\r\n    const biw = box.innerWidth();\r\n    const ntxts = [];\r\n    txts.forEach((it) => {\r\n      const txtWidth = ctx.measureText(it).width;\r\n      if (textWrap && txtWidth > npx(biw)) {\r\n        let textLine = { w: 0, len: 0, start: 0 };\r\n        for (let i = 0; i < it.length; i += 1) {\r\n          if (textLine.w >= npx(biw)) {\r\n            ntxts.push(it.substr(textLine.start, textLine.len));\r\n            textLine = { w: 0, len: 0, start: i };\r\n          }\r\n          textLine.len += 1;\r\n          textLine.w += ctx.measureText(it[i]).width + 1;\r\n        }\r\n        if (textLine.len > 0) {\r\n          ntxts.push(it.substr(textLine.start, textLine.len));\r\n        }\r\n      } else {\r\n        ntxts.push(it);\r\n      }\r\n    });\r\n    const txtHeight = (ntxts.length - 1) * (font.size + 2);\r\n    let ty = box.texty(valign, txtHeight);\r\n    ntxts.forEach((txt) => {\r\n      const txtWidth = ctx.measureText(txt).width;\r\n      this.fillText(txt, tx, ty);\r\n      if (strike) {\r\n        drawFontLine.call(this, 'strike', tx, ty, align, valign, font.size, txtWidth);\r\n      }\r\n      if (underline) {\r\n        drawFontLine.call(this, 'underline', tx, ty, align, valign, font.size, txtWidth);\r\n      }\r\n      ty += font.size + 2;\r\n    });\r\n    ctx.restore();\r\n    return this;\r\n  }\r\n\r\n  border(style, color) {\r\n    const { ctx } = this;\r\n    ctx.lineWidth = thinLineWidth;\r\n    ctx.strokeStyle = color;\r\n    // console.log('style:', style);\r\n    if (style === 'medium') {\r\n      ctx.lineWidth = npx(2) - 0.6;\r\n    } else if (style === 'thick') {\r\n      ctx.lineWidth = npx(3);\r\n    } else if (style === 'dashed') {\r\n      ctx.setLineDash([npx(3), npx(2)]);\r\n    } else if (style === 'dotted') {\r\n      ctx.setLineDash([npx(1), npx(1)]);\r\n    } else if (style === 'double') {\r\n      ctx.setLineDash([npx(2), 0]);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  line(...xys) {\r\n    const { ctx } = this;\r\n    if (xys.length > 1) {\r\n      ctx.beginPath();\r\n      const [x, y] = xys[0];\r\n      ctx.moveTo(npxLine(x), npxLine(y));\r\n      for (let i = 1; i < xys.length; i += 1) {\r\n        const [x1, y1] = xys[i];\r\n        ctx.lineTo(npxLine(x1), npxLine(y1));\r\n      }\r\n      ctx.stroke();\r\n    }\r\n    return this;\r\n  }\r\n\r\n  strokeBorders(box) {\r\n    const { ctx } = this;\r\n    ctx.save();\r\n    // border\r\n    const {\r\n      borderTop, borderRight, borderBottom, borderLeft,\r\n    } = box;\r\n    if (borderTop) {\r\n      this.border(...borderTop);\r\n      // console.log('box.topxys:', box.topxys());\r\n      this.line(...box.topxys());\r\n    }\r\n    if (borderRight) {\r\n      this.border(...borderRight);\r\n      this.line(...box.rightxys());\r\n    }\r\n    if (borderBottom) {\r\n      this.border(...borderBottom);\r\n      this.line(...box.bottomxys());\r\n    }\r\n    if (borderLeft) {\r\n      this.border(...borderLeft);\r\n      this.line(...box.leftxys());\r\n    }\r\n    ctx.restore();\r\n  }\r\n\r\n  dropdown(box) {\r\n    const { ctx } = this;\r\n    const {\r\n      x, y, width, height,\r\n    } = box;\r\n    const sx = x + width - 15;\r\n    const sy = y + height - 15;\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.moveTo(npx(sx), npx(sy));\r\n    ctx.lineTo(npx(sx + 8), npx(sy));\r\n    ctx.lineTo(npx(sx + 4), npx(sy + 6));\r\n    ctx.closePath();\r\n    ctx.fillStyle = 'rgba(0, 0, 0, .45)';\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n\r\n  error(box) {\r\n    const { ctx } = this;\r\n    const { x, y, width } = box;\r\n    const sx = x + width - 1;\r\n\r\n    // ctx.save();\r\n    // ctx.beginPath();\r\n    // ctx.moveTo(npx(sx - 8), npx(y - 1));\r\n    // ctx.lineTo(npx(sx), npx(y - 1));\r\n    // ctx.lineTo(npx(sx), npx(y + 8));\r\n    // ctx.closePath();\r\n    // ctx.fillStyle = 'rgba(255, 0, 0, .65)';\r\n    // ctx.fill();\r\n    // ctx.restore();\r\n  }\r\n\r\n  frozen(box) {\r\n    const { ctx } = this;\r\n    const { x, y, width } = box;\r\n    const sx = x + width - 1;\r\n    // console.log(['frozen',box, ctx]);\r\n    // ctx.save();\r\n    // ctx.beginPath();\r\n    // ctx.moveTo(npx(sx - 8), npx(y - 1));\r\n    // ctx.lineTo(npx(sx), npx(y - 1));\r\n    // ctx.lineTo(npx(sx), npx(y + 8));\r\n    // ctx.closePath();\r\n    // ctx.fillStyle = 'rgba(0, 255, 0, .85)';\r\n    // ctx.fill();\r\n    // ctx.restore();\r\n  }\r\n\r\n  changed(box) {\r\n    const { ctx } = this;\r\n    const { x, y, width } = box;\r\n    const sx = x + width - 1;\r\n    // console.log(['frozen',box, ctx]);\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.moveTo(npx(sx - 8), npx(y - 1));\r\n    ctx.lineTo(npx(sx), npx(y - 1));\r\n    ctx.lineTo(npx(sx), npx(y + 8));\r\n    ctx.closePath();\r\n    ctx.fillStyle = 'rgba(150, 0, 232, .85)';\r\n    ctx.fill();\r\n    ctx.restore();\r\n  }\r\n\r\n  rect(box, dtextcb) {\r\n    const { ctx } = this;\r\n    const {\r\n      x, y, width, height, bgcolor,\r\n    } = box;\r\n    ctx.save();\r\n    ctx.beginPath();\r\n    ctx.fillStyle = bgcolor || '#fff';\r\n    ctx.rect(npxLine(x + 1), npxLine(y + 1), npx(width - 2), npx(height - 2));\r\n    ctx.clip();\r\n    ctx.fill();\r\n    dtextcb();\r\n    ctx.restore();\r\n  }\r\n}\r\n\r\nexport default {};\r\nexport {\r\n  Draw,\r\n  DrawBox,\r\n  thinLineWidth,\r\n  npx,\r\n};","import { h } from './element';\r\nimport Icon from './icon';\r\nimport DropdownColor from './dropdown_color';\r\nimport DropdownLineType from './dropdown_linetype';\r\nimport { cssPrefix } from '../config';\r\n\r\nfunction buildTable(...trs) {\r\n  return h('table', '').child(\r\n    h('tbody', '').children(...trs),\r\n  );\r\n}\r\n\r\nfunction buildTd(iconName) {\r\n  return h('td', '').child(\r\n    h('div', `${cssPrefix}-border-palette-cell`).child(\r\n      new Icon(`border-${iconName}`),\r\n    ).on('click', () => {\r\n      this.mode = iconName;\r\n      const { mode, style, color } = this;\r\n      this.change({ mode, style, color });\r\n    }),\r\n  );\r\n}\r\n\r\nexport default class BorderPalette {\r\n  constructor() {\r\n    this.color = '#000';\r\n    this.style = 'thin';\r\n    this.mode = 'all';\r\n    this.change = () => {};\r\n    this.ddColor = new DropdownColor('line-color', this.color);\r\n    this.ddColor.change = (color) => {\r\n      this.color = color;\r\n    };\r\n    this.ddType = new DropdownLineType(this.style);\r\n    this.ddType.change = ([s]) => {\r\n      this.style = s;\r\n    };\r\n    this.el = h('div', `${cssPrefix}-border-palette`);\r\n    const table = buildTable(\r\n      h('tr', '').children(\r\n        h('td', `${cssPrefix}-border-palette-left`).child(\r\n          buildTable(\r\n            h('tr', '').children(\r\n              ...['all', 'inside', 'horizontal', 'vertical', 'outside'].map(it => buildTd.call(this, it)),\r\n            ),\r\n            h('tr', '').children(\r\n              ...['left', 'top', 'right', 'bottom', 'none'].map(it => buildTd.call(this, it)),\r\n            ),\r\n          ),\r\n        ),\r\n        h('td', `${cssPrefix}-border-palette-right`).children(\r\n          h('div', `${cssPrefix}-toolbar-btn`).child(this.ddColor.el),\r\n          h('div', `${cssPrefix}-toolbar-btn`).child(this.ddType.el),\r\n        ),\r\n      ),\r\n    );\r\n    this.el.child(table);\r\n  }\r\n}\r\n","import { h } from './element';\r\nimport { bindClickoutside, unbindClickoutside } from './event';\r\nimport { cssPrefix } from '../config';\r\nimport Icon from './icon';\r\nimport FormInput from './form_input';\r\nimport Dropdown from './dropdown';\r\nimport { xtoast } from './message';\r\nimport { tf } from '../locale/locale';\r\n\r\nclass DropdownMore extends Dropdown {\r\n  constructor(click) {\r\n    const icon = new Icon('ellipsis');\r\n    super(icon, 'auto', false, 'top-left');\r\n    this.contentClick = click;\r\n  }\r\n\r\n  reset(items) {\r\n    const eles = items.map((it, i) => h('div', `${cssPrefix}-item`)\r\n      .css('width', '150px')\r\n      .css('font-weight', 'normal')\r\n      .on('click', () => {\r\n        this.contentClick(i);\r\n        this.hide();\r\n      })\r\n      .child(it));\r\n    this.setContentChildren(...eles);\r\n  }\r\n\r\n  setTitle() {}\r\n}\r\n\r\nconst menuItems = [\r\n  { key: 'delete', title: tf('contextmenu.deleteSheet') },\r\n];\r\n\r\nfunction buildMenuItem(item) {\r\n  return h('div', `${cssPrefix}-item`)\r\n    .child(item.title())\r\n    .on('click', () => {\r\n      this.itemClick(item.key);\r\n      this.hide();\r\n    });\r\n}\r\n\r\nfunction buildMenu() {\r\n  return menuItems.map(it => buildMenuItem.call(this, it));\r\n}\r\n\r\nclass ContextMenu {\r\n  constructor() {\r\n    this.el = h('div', `${cssPrefix}-contextmenu`)\r\n      .css('width', '160px')\r\n      .children(...buildMenu.call(this))\r\n      .hide();\r\n    this.itemClick = () => {};\r\n  }\r\n\r\n  hide() {\r\n    const { el } = this;\r\n    el.hide();\r\n    unbindClickoutside(el);\r\n  }\r\n\r\n  setOffset(offset) {\r\n    const { el } = this;\r\n    el.offset(offset);\r\n    el.show();\r\n    bindClickoutside(el);\r\n  }\r\n}\r\n\r\nexport default class Bottombar {\r\n  constructor(addFunc = () => {},\r\n    swapFunc = () => {},\r\n    deleteFunc = () => {},\r\n    updateFunc = () => {}) {\r\n    this.swapFunc = swapFunc;\r\n    this.updateFunc = updateFunc;\r\n    this.dataNames = [];\r\n    this.activeEl = null;\r\n    this.deleteEl = null;\r\n    this.items = [];\r\n    this.moreEl = new DropdownMore((i) => {\r\n      this.clickSwap2(this.items[i]);\r\n    });\r\n    this.contextMenu = new ContextMenu();\r\n    this.contextMenu.itemClick = deleteFunc;\r\n    this.el = h('div', `${cssPrefix}-bottombar`).children(\r\n      this.contextMenu.el,\r\n      this.menuEl = h('ul', `${cssPrefix}-menu`).child(\r\n        h('li', '').children(\r\n          new Icon('add').on('click', () => {\r\n            addFunc();\r\n          }),\r\n          h('span', '').child(this.moreEl),\r\n        ),\r\n      ),\r\n    );\r\n  }\r\n\r\n  addItem(name, active) {\r\n    this.dataNames.push(name);\r\n    const item = h('li', active ? 'active' : '').child(name);\r\n    item.on('click', () => {\r\n      this.clickSwap2(item);\r\n    }).on('contextmenu', (evt) => {\r\n      const { offsetLeft, offsetHeight } = evt.target;\r\n      this.contextMenu.setOffset({ left: offsetLeft, bottom: offsetHeight + 1 });\r\n      this.deleteEl = item;\r\n    }).on('dblclick', () => {\r\n      const v = item.html();\r\n      const input = new FormInput('auto', '');\r\n      input.val(v);\r\n      input.input.on('blur', ({ target }) => {\r\n        const { value } = target;\r\n        const nindex = this.dataNames.findIndex(it => it === v);\r\n        this.renameItem(nindex, value);\r\n        /*\r\n        this.dataNames.splice(nindex, 1, value);\r\n        this.moreEl.reset(this.dataNames);\r\n        item.html('').child(value);\r\n        this.updateFunc(nindex, value);\r\n        */\r\n      });\r\n      item.html('').child(input.el);\r\n      input.focus();\r\n    });\r\n    if (active) {\r\n      this.clickSwap(item);\r\n    }\r\n    this.items.push(item);\r\n    this.menuEl.child(item);\r\n    this.moreEl.reset(this.dataNames);\r\n  }\r\n\r\n  renameItem(index, value) {\r\n    this.dataNames.splice(index, 1, value);\r\n    this.moreEl.reset(this.dataNames);\r\n    this.items[index].html('').child(value);\r\n    this.updateFunc(index, value);\r\n  }\r\n\r\n  clear() {\r\n    this.items.forEach((it) => {\r\n      this.menuEl.removeChild(it.el);\r\n    });\r\n    this.items = [];\r\n    this.dataNames = [];\r\n    this.moreEl.reset(this.dataNames);\r\n  }\r\n\r\n  deleteItem() {\r\n    const { activeEl, deleteEl } = this;\r\n    if (this.items.length > 1) {\r\n      const index = this.items.findIndex(it => it === deleteEl);\r\n      this.items.splice(index, 1);\r\n      this.dataNames.splice(index, 1);\r\n      this.menuEl.removeChild(deleteEl.el);\r\n      this.moreEl.reset(this.dataNames);\r\n      if (activeEl === deleteEl) {\r\n        const [f] = this.items;\r\n        this.activeEl = f;\r\n        this.activeEl.toggle();\r\n        return [index, 0];\r\n      }\r\n      return [index, -1];\r\n    }\r\n    return [-1];\r\n  }\r\n\r\n  clickSwap2(item) {\r\n    const index = this.items.findIndex(it => it === item);\r\n    this.clickSwap(item);\r\n    this.activeEl.toggle();\r\n    this.swapFunc(index);\r\n  }\r\n\r\n  clickSwap(item) {\r\n    if (this.activeEl !== null) {\r\n      this.activeEl.toggle();\r\n    }\r\n    this.activeEl = item;\r\n  }\r\n}\r\n","import { Element } from './element';\r\nimport { cssPrefix } from '../config';\r\nimport { t } from '../locale/locale';\r\n\r\nexport default class Button extends Element {\r\n  // type: primary\r\n  constructor(title, type = '') {\r\n    super('div', `${cssPrefix}-button ${type}`);\r\n    this.child(t(`button.${title}`));\r\n  }\r\n}\r\n","import { h } from './element';\r\nimport Icon from './icon';\r\nimport { t } from '../locale/locale';\r\n\r\nfunction addMonth(date, step) {\r\n  date.setMonth(date.getMonth() + step);\r\n}\r\n\r\nfunction weekday(date, index) {\r\n  const d = new Date(date);\r\n  d.setDate(index - date.getDay() + 1);\r\n  return d;\r\n}\r\n\r\nfunction monthDays(year, month, cdate) {\r\n  // the first day of month\r\n  const startDate = new Date(year, month, 1, 23, 59, 59);\r\n  const datess = [[], [], [], [], [], []];\r\n  for (let i = 0; i < 6; i += 1) {\r\n    for (let j = 0; j < 7; j += 1) {\r\n      const index = i * 7 + j;\r\n      const d = weekday(startDate, index);\r\n      const disabled = d.getMonth() !== month;\r\n      // console.log('d:', d, ', cdate:', cdate);\r\n      const active = d.getMonth() === cdate.getMonth() && d.getDate() === cdate.getDate();\r\n      datess[i][j] = { d, disabled, active };\r\n    }\r\n  }\r\n  return datess;\r\n}\r\n\r\nexport default class Calendar {\r\n  constructor(value) {\r\n    this.value = value;\r\n    this.cvalue = new Date(value);\r\n\r\n    this.headerLeftEl = h('div', 'calendar-header-left');\r\n    this.bodyEl = h('tbody', '');\r\n    this.buildAll();\r\n    this.el = h('div', 'x-spreadsheet-calendar')\r\n      .children(\r\n        h('div', 'calendar-header').children(\r\n          this.headerLeftEl,\r\n          h('div', 'calendar-header-right').children(\r\n            h('a', 'calendar-prev')\r\n              .on('click.stop', () => this.prev())\r\n              .child(new Icon('chevron-left')),\r\n            h('a', 'calendar-next')\r\n              .on('click.stop', () => this.next())\r\n              .child(new Icon('chevron-right')),\r\n          ),\r\n        ),\r\n        h('table', 'calendar-body').children(\r\n          h('thead', '').child(\r\n            h('tr', '').children(\r\n              ...t('calendar.weeks').map(week => h('th', 'cell').child(week)),\r\n            ),\r\n          ),\r\n          this.bodyEl,\r\n        ),\r\n      );\r\n    this.selectChange = () => {};\r\n  }\r\n\r\n  setValue(value) {\r\n    this.value = value;\r\n    this.cvalue = new Date(value);\r\n    this.buildAll();\r\n  }\r\n\r\n  prev() {\r\n    const { value } = this;\r\n    addMonth(value, -1);\r\n    this.buildAll();\r\n  }\r\n\r\n  next() {\r\n    const { value } = this;\r\n    addMonth(value, 1);\r\n    this.buildAll();\r\n  }\r\n\r\n  buildAll() {\r\n    this.buildHeaderLeft();\r\n    this.buildBody();\r\n  }\r\n\r\n  buildHeaderLeft() {\r\n    const { value } = this;\r\n    this.headerLeftEl.html(`${t('calendar.months')[value.getMonth()]} ${value.getFullYear()}`);\r\n  }\r\n\r\n  buildBody() {\r\n    const { value, cvalue, bodyEl } = this;\r\n    const mDays = monthDays(value.getFullYear(), value.getMonth(), cvalue);\r\n    const trs = mDays.map((it) => {\r\n      const tds = it.map((it1) => {\r\n        let cls = 'cell';\r\n        if (it1.disabled) cls += ' disabled';\r\n        if (it1.active) cls += ' active';\r\n        return h('td', '').child(\r\n          h('div', cls)\r\n            .on('click.stop', () => {\r\n              this.selectChange(it1.d);\r\n            })\r\n            .child(it1.d.getDate().toString()),\r\n        );\r\n      });\r\n      return h('tr', '').children(...tds);\r\n    });\r\n    bodyEl.html('').children(...trs);\r\n  }\r\n}\r\n","import { h } from './element';\r\nimport { cssPrefix } from '../config';\r\n\r\nconst themeColorPlaceHolders = ['#ffffff', '#000100', '#e7e5e6', '#445569', '#5b9cd6', '#ed7d31', '#a5a5a5', '#ffc001', '#4371c6', '#71ae47'];\r\n\r\nconst themeColors = [\r\n  ['#f2f2f2', '#7f7f7f', '#d0cecf', '#d5dce4', '#deeaf6', '#fce5d5', '#ededed', '#fff2cd', '#d9e2f3', '#e3efd9'],\r\n  ['#d8d8d8', '#595959', '#afabac', '#adb8ca', '#bdd7ee', '#f7ccac', '#dbdbdb', '#ffe59a', '#b3c6e7', '#c5e0b3'],\r\n  ['#bfbfbf', '#3f3f3f', '#756f6f', '#8596b0', '#9cc2e6', '#f4b184', '#c9c9c9', '#fed964', '#8eaada', '#a7d08c'],\r\n  ['#a5a5a5', '#262626', '#3a3839', '#333f4f', '#2e75b5', '#c45a10', '#7b7b7b', '#bf8e01', '#2f5596', '#538136'],\r\n  ['#7f7f7f', '#0c0c0c', '#171516', '#222a35', '#1f4e7a', '#843c0a', '#525252', '#7e6000', '#203864', '#365624'],\r\n];\r\n\r\nconst standardColors = ['#c00000', '#fe0000', '#fdc101', '#ffff01', '#93d051', '#00b04e', '#01b0f1', '#0170c1', '#012060', '#7030a0'];\r\n\r\nfunction buildTd(bgcolor) {\r\n  return h('td', '').child(\r\n    h('div', `${cssPrefix}-color-palette-cell`)\r\n      .on('click.stop', () => this.change(bgcolor))\r\n      .css('background-color', bgcolor),\r\n  );\r\n}\r\n\r\nexport default class ColorPalette {\r\n  constructor() {\r\n    this.el = h('div', `${cssPrefix}-color-palette`);\r\n    this.change = () => {};\r\n    const table = h('table', '').children(\r\n      h('tbody', '').children(\r\n        h('tr', `${cssPrefix}-theme-color-placeholders`).children(\r\n          ...themeColorPlaceHolders.map(color => buildTd.call(this, color)),\r\n        ),\r\n        ...themeColors.map(it => h('tr', `${cssPrefix}-theme-colors`).children(\r\n          ...it.map(color => buildTd.call(this, color)),\r\n        )),\r\n        h('tr', `${cssPrefix}-standard-colors`).children(\r\n          ...standardColors.map(color => buildTd.call(this, color)),\r\n        ),\r\n      ),\r\n    );\r\n    this.el.child(table);\r\n  }\r\n}\r\n","import { h } from './element';\r\nimport { bindClickoutside, unbindClickoutside } from './event';\r\nimport { cssPrefix } from '../config';\r\nimport { tf } from '../locale/locale';\r\n\r\nconst menuItems = [\r\n  { key: 'copy', title: tf('contextmenu.copy'), label: 'Ctrl+C' },\r\n  { key: 'cut', title: tf('contextmenu.cut'), label: 'Ctrl+X' },\r\n  { key: 'paste', title: tf('contextmenu.paste'), label: 'Ctrl+V' },\r\n  { key: 'paste-value', title: tf('contextmenu.pasteValue'), label: 'Ctrl+Shift+V' },\r\n  { key: 'paste-format', title: tf('contextmenu.pasteFormat'), label: 'Ctrl+Alt+V' },\r\n  { key: 'divider' },\r\n  { key: 'insert-row', title: tf('contextmenu.insertRow') },\r\n  { key: 'insert-column', title: tf('contextmenu.insertColumn') },\r\n  { key: 'divider' },\r\n  { key: 'delete-row', title: tf('contextmenu.deleteRow') },\r\n  { key: 'delete-column', title: tf('contextmenu.deleteColumn') },\r\n  { key: 'delete-cell-text', title: tf('contextmenu.deleteCellText') },\r\n  { key: 'hide', title: tf('contextmenu.hide') },\r\n  { key: 'divider' },\r\n  { key: 'validation', title: tf('contextmenu.validation') },\r\n  { key: 'divider' },\r\n  { key: 'cell-printable', title: tf('contextmenu.cellprintable') },\r\n  { key: 'cell-non-printable', title: tf('contextmenu.cellnonprintable') },\r\n  { key: 'divider' },\r\n  { key: 'cell-editable', title: tf('contextmenu.celleditable') },\r\n  { key: 'cell-non-editable', title: tf('contextmenu.cellnoneditable') },\r\n];\r\n\r\nfunction buildMenuItem(item) {\r\n  if (item.key === 'divider') {\r\n    return h('div', `${cssPrefix}-item divider`);\r\n  }\r\n  return h('div', `${cssPrefix}-item`)\r\n    .on('click', () => {\r\n      this.itemClick(item.key);\r\n      this.hide();\r\n    })\r\n    .children(\r\n      item.title(),\r\n      h('div', 'label').child(item.label || ''),\r\n    );\r\n}\r\n\r\nfunction buildMenu() {\r\n  return menuItems.map(it => buildMenuItem.call(this, it));\r\n}\r\n\r\nexport default class ContextMenu {\r\n  constructor(viewFn, isHide = false) {\r\n    this.menuItems = buildMenu.call(this);\r\n    this.el = h('div', `${cssPrefix}-contextmenu`)\r\n      .children(...this.menuItems)\r\n      .hide();\r\n    this.viewFn = viewFn;\r\n    this.itemClick = () => {};\r\n    this.isHide = isHide;\r\n    this.setMode('range');\r\n  }\r\n\r\n  // row-col: the whole rows or the whole cols\r\n  // range: select range\r\n  setMode(mode) {\r\n    const hideEl = this.menuItems[12];\r\n    if (mode === 'row-col') {\r\n      hideEl.show();\r\n    } else {\r\n      hideEl.hide();\r\n    }\r\n  }\r\n\r\n  hide() {\r\n    const { el } = this;\r\n    el.hide();\r\n    unbindClickoutside(el);\r\n  }\r\n\r\n  setPosition(x, y) {\r\n    if (this.isHide) return;\r\n    const { el } = this;\r\n    const { width } = el.show().offset();\r\n    const view = this.viewFn();\r\n    const vhf = view.height / 2;\r\n    let left = x;\r\n    if (view.width - x <= width) {\r\n      left -= width;\r\n    }\r\n    el.css('left', `${left}px`);\r\n    if (y > vhf) {\r\n      el.css('bottom', `${view.height - y}px`)\r\n        .css('max-height', `${y}px`)\r\n        .css('top', 'auto');\r\n    } else {\r\n      el.css('top', `${y}px`)\r\n        .css('max-height', `${view.height - y}px`)\r\n        .css('bottom', 'auto');\r\n    }\r\n    bindClickoutside(el);\r\n  }\r\n}\r\n","import Calendar from './calendar';\r\nimport { h } from './element';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class Datepicker {\r\n  constructor() {\r\n    this.calendar = new Calendar(new Date());\r\n    this.el = h('div', `${cssPrefix}-datepicker`).child(\r\n      this.calendar.el,\r\n    ).hide();\r\n  }\r\n\r\n  setValue(date) {\r\n    // console.log(':::::::', date, typeof date, date instanceof string);\r\n    const { calendar } = this;\r\n    if (typeof date === 'string') {\r\n      // console.log(/^\\d{4}-\\d{1,2}-\\d{1,2}$/.test(date));\r\n      if (/^\\d{4}-\\d{1,2}-\\d{1,2}$/.test(date)) {\r\n        calendar.setValue(new Date(date.replace(new RegExp('-', 'g'), '/')));\r\n      }\r\n    } else if (date instanceof Date) {\r\n      calendar.setValue(date);\r\n    }\r\n    return this;\r\n  }\r\n\r\n  change(cb) {\r\n    this.calendar.selectChange = (d) => {\r\n      cb(d);\r\n      this.hide();\r\n    };\r\n  }\r\n\r\n  show() {\r\n    this.el.show();\r\n  }\r\n\r\n  hide() {\r\n    this.el.hide();\r\n  }\r\n}\r\n","import { Element, h } from './element';\r\nimport { bindClickoutside, unbindClickoutside } from './event';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class Dropdown extends Element {\r\n  constructor(title, width, showArrow, placement, ...children) {\r\n    super('div', `${cssPrefix}-dropdown ${placement}`);\r\n    this.title = title;\r\n    this.change = () => {};\r\n    this.headerClick = () => {};\r\n    if (typeof title === 'string') {\r\n      this.title = h('div', `${cssPrefix}-dropdown-title`).child(title);\r\n    } else if (showArrow) {\r\n      this.title.addClass('arrow-left');\r\n    }\r\n    this.contentEl = h('div', `${cssPrefix}-dropdown-content`)\r\n      .css('width', width)\r\n      .hide();\r\n\r\n    this.setContentChildren(...children);\r\n\r\n    this.headerEl = h('div', `${cssPrefix}-dropdown-header`);\r\n    this.headerEl.on('click', () => {\r\n      if (this.contentEl.css('display') !== 'block') {\r\n        this.show();\r\n      } else {\r\n        this.hide();\r\n      }\r\n    }).children(\r\n      this.title,\r\n      showArrow ? h('div', `${cssPrefix}-icon arrow-right`).child(\r\n        h('div', `${cssPrefix}-icon-img arrow-down`),\r\n      ) : '',\r\n    );\r\n    this.children(this.headerEl, this.contentEl);\r\n  }\r\n\r\n  setContentChildren(...children) {\r\n    this.contentEl.html('');\r\n    if (children.length > 0) {\r\n      this.contentEl.children(...children);\r\n    }\r\n  }\r\n\r\n  setTitle(title) {\r\n    this.title.html(title);\r\n    this.hide();\r\n  }\r\n\r\n  show() {\r\n    const { contentEl } = this;\r\n    contentEl.show();\r\n    this.parent().active();\r\n    bindClickoutside(this.parent(), () => {\r\n      this.hide();\r\n    });\r\n  }\r\n\r\n  hide() {\r\n    this.parent().active(false);\r\n    this.contentEl.hide();\r\n    unbindClickoutside(this.parent());\r\n  }\r\n}\r\n","import Dropdown from './dropdown';\r\nimport { h } from './element';\r\nimport Icon from './icon';\r\nimport { cssPrefix } from '../config';\r\n\r\nfunction buildItemWithIcon(iconName) {\r\n  return h('div', `${cssPrefix}-item`).child(new Icon(iconName));\r\n}\r\n\r\nexport default class DropdownAlign extends Dropdown {\r\n  constructor(aligns, align) {\r\n    const icon = new Icon(`align-${align}`);\r\n    const naligns = aligns.map(it => buildItemWithIcon(`align-${it}`)\r\n      .on('click', () => {\r\n        this.setTitle(it);\r\n        this.change(it);\r\n      }));\r\n    super(icon, 'auto', true, 'bottom-left', ...naligns);\r\n  }\r\n\r\n  setTitle(align) {\r\n    this.title.setName(`align-${align}`);\r\n    this.hide();\r\n  }\r\n}\r\n","import Dropdown from './dropdown';\r\nimport Icon from './icon';\r\nimport BorderPalette from './border_palette';\r\n\r\nexport default class DropdownBorder extends Dropdown {\r\n  constructor() {\r\n    const icon = new Icon('border-all');\r\n    const borderPalette = new BorderPalette();\r\n    borderPalette.change = (v) => {\r\n      this.change(v);\r\n      this.hide();\r\n    };\r\n    super(icon, 'auto', false, 'bottom-left', borderPalette.el);\r\n  }\r\n}\r\n","import Dropdown from './dropdown';\r\nimport Icon from './icon';\r\nimport ColorPalette from './color_palette';\r\n\r\nexport default class DropdownColor extends Dropdown {\r\n  constructor(iconName, color) {\r\n    const icon = new Icon(iconName)\r\n      .css('height', '16px')\r\n      .css('border-bottom', `3px solid ${color}`);\r\n    const colorPalette = new ColorPalette();\r\n    colorPalette.change = (v) => {\r\n      this.setTitle(v);\r\n      this.change(v);\r\n    };\r\n    super(icon, 'auto', false, 'bottom-left', colorPalette.el);\r\n  }\r\n\r\n  setTitle(color) {\r\n    this.title.css('border-color', color);\r\n    this.hide();\r\n  }\r\n}\r\n","import Dropdown from './dropdown';\r\nimport { h } from './element';\r\nimport { baseFonts } from '../core/font';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class DropdownFont extends Dropdown {\r\n  constructor() {\r\n    const nfonts = baseFonts.map(it => h('div', `${cssPrefix}-item`)\r\n      .on('click', () => {\r\n        this.setTitle(it.title);\r\n        this.change(it);\r\n      })\r\n      .child(it.title));\r\n    super(baseFonts[0].title, '160px', true, 'bottom-left', ...nfonts);\r\n  }\r\n}\r\n","import Dropdown from './dropdown';\r\nimport { h } from './element';\r\nimport { fontSizes } from '../core/font';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class DropdownFontSize extends Dropdown {\r\n  constructor() {\r\n    const nfontSizes = fontSizes.map(it => h('div', `${cssPrefix}-item`)\r\n      .on('click', () => {\r\n        this.setTitle(`${it.pt}`);\r\n        this.change(it);\r\n      })\r\n      .child(`${it.pt}`));\r\n    super('10', '60px', true, 'bottom-left', ...nfontSizes);\r\n  }\r\n}\r\n","import Dropdown from './dropdown';\r\nimport { h } from './element';\r\nimport { baseFormats } from '../core/format';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class DropdownFormat extends Dropdown {\r\n  constructor() {\r\n    let nformats = baseFormats.slice(0);\r\n    nformats.splice(2, 0, { key: 'divider' });\r\n    nformats.splice(8, 0, { key: 'divider' });\r\n    nformats = nformats.map((it) => {\r\n      const item = h('div', `${cssPrefix}-item`);\r\n      if (it.key === 'divider') {\r\n        item.addClass('divider');\r\n      } else {\r\n        item.child(it.title())\r\n          .on('click', () => {\r\n            this.setTitle(it.title());\r\n            this.change(it);\r\n          });\r\n        if (it.label) item.child(h('div', 'label').html(it.label));\r\n      }\r\n      return item;\r\n    });\r\n    super('Normal', '220px', true, 'bottom-left', ...nformats);\r\n  }\r\n\r\n  setTitle(key) {\r\n    for (let i = 0; i < baseFormats.length; i += 1) {\r\n      if (baseFormats[i].key === key) {\r\n        this.title.html(baseFormats[i].title());\r\n      }\r\n    }\r\n    this.hide();\r\n  }\r\n}\r\n","import Dropdown from './dropdown';\r\nimport Icon from './icon';\r\nimport { h } from './element';\r\nimport { baseFormulas } from '../core/formula';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class DropdownFormula extends Dropdown {\r\n  constructor() {\r\n    const nformulas = baseFormulas.map(it => h('div', `${cssPrefix}-item`)\r\n      .on('click', () => {\r\n        this.hide();\r\n        this.change(it);\r\n      })\r\n      .child(it.key));\r\n    super(new Icon('formula'), '180px', true, 'bottom-left', ...nformulas);\r\n  }\r\n}\r\n","import Dropdown from './dropdown';\r\nimport { h } from './element';\r\nimport Icon from './icon';\r\nimport { cssPrefix } from '../config';\r\n\r\nconst lineTypes = [\r\n  ['thin', '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"1\" style=\"user-select: none;\"><line x1=\"0\" y1=\"0.5\" x2=\"50\" y2=\"0.5\" stroke-width=\"1\" stroke=\"black\" style=\"user-select: none;\"></line></svg>'],\r\n  ['medium', '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"2\" style=\"user-select: none;\"><line x1=\"0\" y1=\"1.0\" x2=\"50\" y2=\"1.0\" stroke-width=\"2\" stroke=\"black\" style=\"user-select: none;\"></line></svg>'],\r\n  ['thick', '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"3\" style=\"user-select: none;\"><line x1=\"0\" y1=\"1.5\" x2=\"50\" y2=\"1.5\" stroke-width=\"3\" stroke=\"black\" style=\"user-select: none;\"></line></svg>'],\r\n  ['dashed', '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"1\" style=\"user-select: none;\"><line x1=\"0\" y1=\"0.5\" x2=\"50\" y2=\"0.5\" stroke-width=\"1\" stroke=\"black\" stroke-dasharray=\"2\" style=\"user-select: none;\"></line></svg>'],\r\n  ['dotted', '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"1\" style=\"user-select: none;\"><line x1=\"0\" y1=\"0.5\" x2=\"50\" y2=\"0.5\" stroke-width=\"1\" stroke=\"black\" stroke-dasharray=\"1\" style=\"user-select: none;\"></line></svg>'],\r\n  // ['double', '<svg xmlns=\"http://www.w3.org/2000/svg\" width=\"50\" height=\"3\" style=\"user-select: none;\"><line x1=\"0\" y1=\"0.5\" x2=\"50\" y2=\"0.5\" stroke-width=\"1\" stroke=\"black\" style=\"user-select: none;\"></line><line x1=\"0\" y1=\"2.5\" x2=\"50\" y2=\"2.5\" stroke-width=\"1\" stroke=\"black\" style=\"user-select: none;\"></line></svg>'],\r\n];\r\n\r\nexport default class DropdownLineType extends Dropdown {\r\n  constructor(type) {\r\n    const icon = new Icon('line-type');\r\n    let beforei = 0;\r\n    const lineTypeEls = lineTypes.map((it, iti) => h('div', `${cssPrefix}-item state ${type === it[0] ? 'checked' : ''}`)\r\n      .on('click', () => {\r\n        lineTypeEls[beforei].toggle('checked');\r\n        lineTypeEls[iti].toggle('checked');\r\n        beforei = iti;\r\n        this.hide();\r\n        this.change(it);\r\n      })\r\n      .child(\r\n        h('div', `${cssPrefix}-line-type`).html(it[1]),\r\n      ));\r\n\r\n    super(icon, 'auto', false, 'bottom-left', ...lineTypeEls);\r\n  }\r\n}\r\n","//* global window */\r\nimport { h } from './element';\r\nimport Suggest from './suggest';\r\nimport Datepicker from './datepicker';\r\nimport { cssPrefix } from '../config';\r\n// import { mouseMoveUp } from '../event';\r\n\r\nfunction resetTextareaSize() {\r\n  const { inputText } = this;\r\n  if (!/^\\s*$/.test(inputText)) {\r\n    const {\r\n      textlineEl, textEl, areaOffset,\r\n    } = this;\r\n    const txts = inputText.split('\\n');\r\n    const maxTxtSize = Math.max(...txts.map(it => it.length));\r\n    const tlOffset = textlineEl.offset();\r\n    const fontWidth = tlOffset.width / inputText.length;\r\n    const tlineWidth = (maxTxtSize + 1) * fontWidth + 5;\r\n    const maxWidth = this.viewFn().width - areaOffset.left - fontWidth;\r\n    let h1 = txts.length;\r\n    if (tlineWidth > areaOffset.width) {\r\n      let twidth = tlineWidth;\r\n      if (tlineWidth > maxWidth) {\r\n        twidth = maxWidth;\r\n        h1 += parseInt(tlineWidth / maxWidth, 10);\r\n        h1 += (tlineWidth % maxWidth) > 0 ? 1 : 0;\r\n      }\r\n      textEl.css('width', `${twidth}px`);\r\n    }\r\n    h1 *= this.rowHeight;\r\n    if (h1 > areaOffset.height) {\r\n      textEl.css('height', `${h1}px`);\r\n    }\r\n  }\r\n}\r\n\r\nfunction insertText({ target }, itxt) {\r\n  const { value, selectionEnd } = target;\r\n  const ntxt = `${value.slice(0, selectionEnd)}${itxt}${value.slice(selectionEnd)}`;\r\n  target.value = ntxt;\r\n  target.setSelectionRange(selectionEnd + 1, selectionEnd + 1);\r\n\r\n  this.inputText = ntxt;\r\n  this.textlineEl.html(ntxt);\r\n  resetTextareaSize.call(this);\r\n}\r\n\r\nfunction keydownEventHandler(evt) {\r\n  const { keyCode, altKey } = evt;\r\n  if (keyCode !== 13 && keyCode !== 9) evt.stopPropagation();\r\n  if (keyCode === 13 && altKey) {\r\n    insertText.call(this, evt, '\\n');\r\n    evt.stopPropagation();\r\n  }\r\n  if (keyCode === 13 && !altKey) evt.preventDefault();\r\n}\r\n\r\nfunction inputEventHandler(evt) {\r\n  const v = evt.target.value;\r\n  // console.log(evt, 'v:', v);\r\n  const { suggest, textlineEl, validator } = this;\r\n  const { cell } = this;\r\n  if (cell !== null) {\r\n    if (('editable' in cell && cell.editable === true) || (cell.editable === undefined)) {\r\n      this.inputText = v;\r\n      if (validator) {\r\n        if (validator.type === 'list') {\r\n          suggest.search(v);\r\n        } else {\r\n          suggest.hide();\r\n        }\r\n      } else {\r\n        const start = v.lastIndexOf('=');\r\n        if (start !== -1) {\r\n          suggest.search(v.substring(start + 1));\r\n        } else {\r\n          suggest.hide();\r\n        }\r\n      }\r\n      textlineEl.html(v);\r\n      resetTextareaSize.call(this);\r\n      this.change('input', v);\r\n    } else {\r\n      evt.target.value = '';\r\n    }\r\n  } else {\r\n    this.inputText = v;\r\n    if (validator) {\r\n      if (validator.type === 'list') {\r\n        suggest.search(v);\r\n      } else {\r\n        suggest.hide();\r\n      }\r\n    } else {\r\n      const start = v.lastIndexOf('=');\r\n      if (start !== -1) {\r\n        suggest.search(v.substring(start + 1));\r\n      } else {\r\n        suggest.hide();\r\n      }\r\n    }\r\n    textlineEl.html(v);\r\n    resetTextareaSize.call(this);\r\n    this.change('input', v);\r\n  }\r\n}\r\n\r\nfunction setTextareaRange(position) {\r\n  const { el } = this.textEl;\r\n  setTimeout(() => {\r\n    el.focus();\r\n    el.setSelectionRange(position, position);\r\n  }, 0);\r\n}\r\n\r\nfunction setText(text, position) {\r\n  const { textEl, textlineEl } = this;\r\n  // firefox bug\r\n  textEl.el.blur();\r\n  // $(textEl.el).keydown();\r\n// console.log('setText', textEl);\r\n  textEl.val(text);\r\n  textlineEl.html(text);\r\n  setTextareaRange.call(this, position);\r\n}\r\n\r\nfunction suggestItemClick(it) {\r\n  const { inputText, validator } = this;\r\n  let position = 0;\r\n  if (validator && validator.type === 'list') {\r\n    this.inputText = it;\r\n    console.log('inputText:', this.inputText);\r\n    position = this.inputText.length;\r\n  } else {\r\n    const start = inputText.lastIndexOf('=');\r\n    const sit = inputText.substring(0, start + 1);\r\n    let eit = inputText.substring(start + 1);\r\n    if (eit.indexOf(')') !== -1) {\r\n      eit = eit.substring(eit.indexOf(')'));\r\n    } else {\r\n      eit = '';\r\n    }\r\n    this.inputText = `${sit + it.key}(`;\r\n    position = this.inputText.length;\r\n    this.inputText += `)${eit}`;\r\n  }\r\n  setText.call(this, this.inputText, position);\r\n  this.clear();\r\n}\r\n\r\nfunction resetSuggestItems() {\r\n  this.suggest.setItems(this.formulas);\r\n}\r\n\r\nfunction dateFormat(d) {\r\n  let month = d.getMonth() + 1;\r\n  let date = d.getDate();\r\n  if (month < 10) month = `0${month}`;\r\n  if (date < 10) date = `0${date}`;\r\n  return `${d.getFullYear()}-${month}-${date}`;\r\n}\r\n\r\nexport default class Editor {\r\n  constructor(formulas, viewFn, rowHeight) {\r\n    this.viewFn = viewFn;\r\n    this.rowHeight = rowHeight;\r\n    this.formulas = formulas;\r\n    this.suggest = new Suggest(formulas, (it) => {\r\n      suggestItemClick.call(this, it);\r\n    });\r\n    this.datepicker = new Datepicker();\r\n    this.datepicker.change((d) => {\r\n      // console.log('d:', d);\r\n      this.setText(dateFormat(d));\r\n      this.clear();\r\n    });\r\n    this.areaEl = h('div', `${cssPrefix}-editor-area`)\r\n      .children(\r\n        this.textEl = h('textarea', '')\r\n          .on('input', evt => inputEventHandler.call(this, evt))\r\n          .on('paste.stop', () => {})\r\n          .on('keydown', evt => keydownEventHandler.call(this, evt)),\r\n        this.textlineEl = h('div', 'textline'),\r\n        this.suggest.el,\r\n        this.suggest.scrollbar.el,\r\n        this.datepicker.el,\r\n      )\r\n      .on('mousemove.stop', () => {})\r\n      .on('mousedown.stop', () => {});\r\n    this.el = h('div', `${cssPrefix}-editor`)\r\n      .child(this.areaEl).hide();\r\n    this.suggest.bindInputEvents(this.textEl);\r\n\r\n    this.areaOffset = null;\r\n    this.freeze = { w: 0, h: 0 };\r\n    this.cell = null;\r\n    this.inputText = '';\r\n    this.change = () => {};\r\n  }\r\n\r\n  setFreezeLengths(width, height) {\r\n    this.freeze.w = width;\r\n    this.freeze.h = height;\r\n  }\r\n\r\n  clear() {\r\n    // const { cell } = this;\r\n    // const cellText = (cell && cell.text) || '';\r\n    if (this.inputText !== '') {\r\n      this.change('finished', this.inputText);\r\n    }\r\n    this.cell = null;\r\n    this.areaOffset = null;\r\n    this.inputText = '';\r\n    this.el.hide();\r\n    this.textEl.val('');\r\n    this.textlineEl.html('');\r\n    resetSuggestItems.call(this);\r\n    this.datepicker.hide();\r\n  }\r\n\r\n  setOffset(offset, suggestPosition = 'top') {\r\n    const {\r\n      textEl, areaEl, suggest, freeze, el,\r\n    } = this;\r\n    if (offset) {\r\n      this.areaOffset = offset;\r\n      const {\r\n        left, top, width, height, l, t,\r\n      } = offset;\r\n      // console.log('left:', left, ',top:', top, ', freeze:', freeze);\r\n      const elOffset = { left: 0, top: 0 };\r\n      // top left\r\n      if (freeze.w > l && freeze.h > t) {\r\n        //\r\n      } else if (freeze.w < l && freeze.h < t) {\r\n        elOffset.left = freeze.w;\r\n        elOffset.top = freeze.h;\r\n      } else if (freeze.w > l) {\r\n        elOffset.top = freeze.h;\r\n      } else if (freeze.h > t) {\r\n        elOffset.left = freeze.w;\r\n      }\r\n      el.offset(elOffset);\r\n      areaEl.offset({ left: left - elOffset.left - 0.8, top: top - elOffset.top - 0.8 });\r\n      textEl.offset({ width: width - 9 + 0.8, height: height - 3 + 0.8 });\r\n      const sOffset = { left: 0 };\r\n      sOffset[suggestPosition] = height;\r\n      suggest.setOffset(sOffset);\r\n      suggest.hide();\r\n    }\r\n  }\r\n\r\n  setCell(cell, validator) {\r\n    // console.log('::', validator);\r\n    const { el, datepicker, suggest } = this;\r\n    el.show();\r\n    this.cell = cell;\r\n    const text = (cell && cell.text) || '';\r\n    this.setText(text);\r\n\r\n    this.validator = validator;\r\n    if (validator) {\r\n      const { type } = validator;\r\n      if (type === 'date') {\r\n        datepicker.show();\r\n        if (!/^\\s*$/.test(text)) {\r\n          datepicker.setValue(text);\r\n        }\r\n      }\r\n      if (type === 'list') {\r\n        suggest.setItems(validator.values());\r\n        suggest.search('');\r\n      }\r\n    }\r\n  }\r\n\r\n  setText(text) {\r\n    this.inputText = text;\r\n    // console.log('text>>:', text);\r\n    setText.call(this, text, text.length);\r\n    resetTextareaSize.call(this);\r\n  }\r\n}\r\n","/* global document */\n/* global window */\nclass Element {\n  constructor(tag, className = '') {\n    if (typeof tag === 'string') {\n      this.el = document.createElement(tag);\n      this.el.className = className;\n    } else {\n      this.el = tag;\n    }\n    this.data = {};\n  }\n\n  data(key, value) {\n    if (value !== undefined) {\n      this.data[key] = value;\n      return this;\n    }\n    return this.data[key];\n  }\n\n  on(eventNames, handler) {\n    const [fen, ...oen] = eventNames.split('.');\n    let eventName = fen;\n    if (eventName === 'mousewheel' && /Firefox/i.test(window.navigator.userAgent)) {\n      eventName = 'DOMMouseScroll';\n    }\n    this.el.addEventListener(eventName, (evt) => {\n      handler(evt);\n      for (let i = 0; i < oen.length; i += 1) {\n        const k = oen[i];\n        if (k === 'left' && evt.button !== 0) {\n          return;\n        }\n        if (k === 'right' && evt.button !== 2) {\n          return;\n        }\n        if (k === 'stop') {\n          evt.stopPropagation();\n        }\n      }\n    });\n    return this;\n  }\n\n  offset(value) {\n    if (value !== undefined) {\n      Object.keys(value).forEach((k) => {\n        this.css(k, `${value[k]}px`);\n      });\n      return this;\n    }\n    const {\n      offsetTop, offsetLeft, offsetHeight, offsetWidth,\n    } = this.el;\n    return {\n      top: offsetTop,\n      left: offsetLeft,\n      height: offsetHeight,\n      width: offsetWidth,\n    };\n  }\n\n  scroll(v) {\n    const { el } = this;\n    if (v !== undefined) {\n      if (v.left !== undefined) {\n        el.scrollLeft = v.left;\n      }\n      if (v.top !== undefined) {\n        el.scrollTop = v.top;\n      }\n    }\n    return { left: el.scrollLeft, top: el.scrollTop };\n  }\n\n  box() {\n    return this.el.getBoundingClientRect();\n  }\n\n  parent() {\n    return new Element(this.el.parentNode);\n  }\n\n  children(...eles) {\n    if (arguments.length === 0) {\n      return this.el.childNodes;\n    }\n    eles.forEach(ele => this.child(ele));\n    return this;\n  }\n\n  removeChild(el) {\n    this.el.removeChild(el);\n  }\n\n  /*\n  first() {\n    return this.el.firstChild;\n  }\n\n  last() {\n    return this.el.lastChild;\n  }\n\n  remove(ele) {\n    return this.el.removeChild(ele);\n  }\n\n  prepend(ele) {\n    const { el } = this;\n    if (el.children.length > 0) {\n      el.insertBefore(ele, el.firstChild);\n    } else {\n      el.appendChild(ele);\n    }\n    return this;\n  }\n\n  prev() {\n    return this.el.previousSibling;\n  }\n\n  next() {\n    return this.el.nextSibling;\n  }\n  */\n\n  child(arg) {\n    let ele = arg;\n    if (typeof arg === 'string') {\n      ele = document.createTextNode(arg);\n    } else if (arg instanceof Element) {\n      ele = arg.el;\n    }\n    //console.log(this.el, ele);\n    if (ele.contains(this.el)) {\n      console.warn(ele, 'contains', this.el)\n    } else {this.el.appendChild(ele)};\n    \n    return this;\n  }\n\n  contains(ele) {\n    return this.el.contains(ele);\n  }\n\n  className(v) {\n    if (v !== undefined) {\n      this.el.className = v;\n      return this;\n    }\n    return this.el.className;\n  }\n\n  addClass(name) {\n    this.el.classList.add(name);\n    return this;\n  }\n\n  hasClass(name) {\n    return this.el.classList.contains(name);\n  }\n\n  removeClass(name) {\n    this.el.classList.remove(name);\n    return this;\n  }\n\n  toggle(cls = 'active') {\n    return this.toggleClass(cls);\n  }\n\n  toggleClass(name) {\n    return this.el.classList.toggle(name);\n  }\n\n  active(flag = true, cls = 'active') {\n    if (flag) this.addClass(cls);\n    else this.removeClass(cls);\n    return this;\n  }\n\n  checked(flag = true) {\n    this.active(flag, 'checked');\n    return this;\n  }\n\n  disabled(flag = true) {\n    if (flag) this.addClass('disabled');\n    else this.removeClass('disabled');\n    return this;\n  }\n\n  // key, value\n  // key\n  // {k, v}...\n  attr(key, value) {\n    if (value !== undefined) {\n      this.el.setAttribute(key, value);\n    } else {\n      if (typeof key === 'string') {\n        return this.el.getAttribute(key);\n      }\n      Object.keys(key).forEach((k) => {\n        this.el.setAttribute(k, key[k]);\n      });\n    }\n    return this;\n  }\n\n  removeAttr(key) {\n    this.el.removeAttribute(key);\n    return this;\n  }\n\n  html(content) {\n    if (content !== undefined) {\n      this.el.innerHTML = content;\n      return this;\n    }\n    return this.el.innerHTML;\n  }\n\n  val(v) {\n    if (v !== undefined) {\n      this.el.value = v;\n      return this;\n    }\n    return this.el.value;\n  }\n\n  focus() {\n    this.el.focus();\n  }\n\n  cssRemoveKeys(...keys) {\n    keys.forEach(k => this.el.style.removeProperty(k));\n    return this;\n  }\n\n  // css( propertyName )\n  // css( propertyName, value )\n  // css( properties )\n  css(name, value) {\n    if (value === undefined && typeof name !== 'string') {\n      Object.keys(name).forEach((k) => {\n        this.el.style[k] = name[k];\n      });\n      return this;\n    }\n    if (value !== undefined) {\n      this.el.style[name] = value;\n      return this;\n    }\n    return this.el.style[name];\n  }\n\n  computedStyle() {\n    return window.getComputedStyle(this.el, null);\n  }\n\n  show() {\n    this.css('display', 'block');\n    return this;\n  }\n\n  hide() {\n    this.css('display', 'none');\n    return this;\n  }\n}\n\nconst h = (tag, className = '') => new Element(tag, className);\n\nexport {\n  Element,\n  h,\n};\n","/* global window */\r\nexport function bind(target, name, fn) {\r\n  target.addEventListener(name, fn);\r\n}\r\nexport function unbind(target, name, fn) {\r\n  target.removeEventListener(name, fn);\r\n}\r\nexport function unbindClickoutside(el) {\r\n  if (el.xclickoutside) {\r\n    unbind(window.document.body, 'click', el.xclickoutside);\r\n    delete el.xclickoutside;\r\n  }\r\n}\r\n\r\n// the left mouse button: mousedown → mouseup → click\r\n// the right mouse button: mousedown → contenxtmenu → mouseup\r\n// the right mouse button in firefox(>65.0): mousedown → contenxtmenu → mouseup → click on window\r\nexport function bindClickoutside(el, cb) {\r\n  el.xclickoutside = (evt) => {\r\n    // ignore double click\r\n    // console.log('evt:', evt);\r\n    if (evt.detail === 2 || el.contains(evt.target)) return;\r\n    if (cb) cb(el);\r\n    else {\r\n      el.hide();\r\n      unbindClickoutside(el);\r\n    }\r\n  };\r\n  bind(window.document.body, 'click', el.xclickoutside);\r\n}\r\nexport function mouseMoveUp(target, movefunc, upfunc) {\r\n  bind(target, 'mousemove', movefunc);\r\n  const t = target;\r\n  t.xEvtUp = (evt) => {\r\n    // console.log('mouseup>>>');\r\n    unbind(target, 'mousemove', movefunc);\r\n    unbind(target, 'mouseup', target.xEvtUp);\r\n    upfunc(evt);\r\n  };\r\n  bind(target, 'mouseup', target.xEvtUp);\r\n}\r\n\r\nfunction calTouchDirection(spanx, spany, evt, cb) {\r\n  let direction = '';\r\n  // console.log('spanx:', spanx, ', spany:', spany);\r\n  if (Math.abs(spanx) > Math.abs(spany)) {\r\n    // horizontal\r\n    direction = spanx > 0 ? 'right' : 'left';\r\n    cb(direction, spanx, evt);\r\n  } else {\r\n    // vertical\r\n    direction = spany > 0 ? 'down' : 'up';\r\n    cb(direction, spany, evt);\r\n  }\r\n}\r\n// cb = (direction, distance) => {}\r\nexport function bindTouch(target, { move, end }) {\r\n  let startx = 0;\r\n  let starty = 0;\r\n  bind(target, 'touchstart', (evt) => {\r\n    const { pageX, pageY } = evt.touches[0];\r\n    startx = pageX;\r\n    starty = pageY;\r\n  });\r\n  bind(target, 'touchmove', (evt) => {\r\n    if (!move) return;\r\n    const { pageX, pageY } = evt.changedTouches[0];\r\n    const spanx = pageX - startx;\r\n    const spany = pageY - starty;\r\n    if (Math.abs(spanx) > 10 || Math.abs(spany) > 10) {\r\n      // console.log('spanx:', spanx, ', spany:', spany);\r\n      calTouchDirection(spanx, spany, evt, move);\r\n      startx = pageX;\r\n      starty = pageY;\r\n    }\r\n    evt.preventDefault();\r\n  });\r\n  bind(target, 'touchend', (evt) => {\r\n    if (!end) return;\r\n    const { pageX, pageY } = evt.changedTouches[0];\r\n    const spanx = pageX - startx;\r\n    const spany = pageY - starty;\r\n    calTouchDirection(spanx, spany, evt, end);\r\n  });\r\n}\r\n// eventemiter\r\nexport function createEventEmitter() {\r\n  const listeners = new Map()\r\n  function on(eventName, callback) {\r\n    if (listeners.has(eventName)) {\r\n      const currentListener = listeners.get(eventName)\r\n      if (Array.isArray(currentListener)) {\r\n        currentListener.push(callback)\r\n      }\r\n    } else {\r\n      listeners.set(eventName, [].concat(callback))\r\n    }\r\n  }\r\n  function fire(eventName, args) {\r\n    if (listeners.has(eventName)) {\r\n      const currentListener = listeners.get(eventName)\r\n      for (const callback of currentListener) {\r\n        callback.call(null, ...args)\r\n      }\r\n    }\r\n  }\r\n  function removeListener(eventName, callback) {\r\n    if (listeners.has(eventName)) {\r\n      const currentListener = listeners.get(eventName)\r\n      const idx = currentListener.indexOf(callback)\r\n      if (idx && idx >= 0) {\r\n        currentListener.splice(idx, 1)\r\n      }\r\n    }\r\n  }\r\n  function once(eventName, callback) {\r\n    const execCalllback = function (...args) {\r\n      callback.call(null, ...args)\r\n      removeListener(eventName, execCalllback)\r\n    }\r\n    on(eventName, execCalllback)\r\n  }\r\n  function removeAllListeners() {\r\n    listeners.clear()\r\n  }\r\n  function getAllListeners() {\r\n    return listeners\r\n  }\r\n  return {\r\n    getAllListeners,\r\n    on,\r\n    once,\r\n    fire,\r\n    removeListener,\r\n    removeAllListeners\r\n  }\r\n}","import { h } from './element';\r\nimport { cssPrefix } from '../config';\r\nimport { t } from '../locale/locale';\r\n\r\nconst patterns = {\r\n  number: /(^\\d+$)|(^\\d+(\\.\\d{0,4})?$)/,\r\n  date: /^\\d{4}-\\d{1,2}-\\d{1,2}$/,\r\n};\r\n\r\n// rule: { required: false, type, pattern: // }\r\nexport default class FormField {\r\n  constructor(input, rule, label, labelWidth) {\r\n    this.label = '';\r\n    this.rule = rule;\r\n    if (label) {\r\n      this.label = h('label', 'label').css('width', `${labelWidth}px`).html(label);\r\n    }\r\n    this.tip = h('div', 'tip').child('tip').hide();\r\n    this.input = input;\r\n    this.input.vchange = () => this.validate();\r\n    this.el = h('div', `${cssPrefix}-form-field`)\r\n      .children(this.label, input.el, this.tip);\r\n  }\r\n\r\n  isShow() {\r\n    return this.el.css('display') !== 'none';\r\n  }\r\n\r\n  show() {\r\n    this.el.show();\r\n  }\r\n\r\n  hide() {\r\n    this.el.hide();\r\n    return this;\r\n  }\r\n\r\n  val(v) {\r\n    return this.input.val(v);\r\n  }\r\n\r\n  hint(hint) {\r\n    this.input.hint(hint);\r\n  }\r\n\r\n  validate() {\r\n    const {\r\n      input, rule, tip, el,\r\n    } = this;\r\n    const v = input.val();\r\n    if (rule.required) {\r\n      if (/^\\s*$/.test(v)) {\r\n        tip.html(t('validation.required'));\r\n        el.addClass('error');\r\n        return false;\r\n      }\r\n    }\r\n    if (rule.type || rule.pattern) {\r\n      const pattern = rule.pattern || patterns[rule.type];\r\n      if (!pattern.test(v)) {\r\n        tip.html(t('validation.notMatch'));\r\n        el.addClass('error');\r\n        return false;\r\n      }\r\n    }\r\n    el.removeClass('error');\r\n    return true;\r\n  }\r\n}\r\n","import { h } from './element';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class FormInput {\r\n  constructor(width, hint) {\r\n    this.vchange = () => {};\r\n    this.el = h('div', `${cssPrefix}-form-input`);\r\n    this.input = h('input', '').css('width', width)\r\n      .on('input', evt => this.vchange(evt))\r\n      .attr('placeholder', hint);\r\n    this.el.child(this.input);\r\n  }\r\n\r\n  focus() {\r\n    setTimeout(() => {\r\n      this.input.el.focus();\r\n    }, 10);\r\n  }\r\n\r\n  hint(v) {\r\n    this.input.attr('placeholder', v);\r\n  }\r\n\r\n  val(v) {\r\n    return this.input.val(v);\r\n  }\r\n}\r\n","import { h } from './element';\r\nimport Suggest from './suggest';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class FormSelect {\r\n  constructor(key, items, width, getTitle = it => it, change = () => {}) {\r\n    this.key = key;\r\n    this.getTitle = getTitle;\r\n    this.vchange = () => {};\r\n    this.el = h('div', `${cssPrefix}-form-select`);\r\n    this.suggest = new Suggest(items.map(it => ({ key: it, title: this.getTitle(it) })), (it) => {\r\n      this.itemClick(it.key);\r\n      change(it.key);\r\n      this.vchange(it.key);\r\n    }, width, this.el);\r\n    this.el.children(\r\n      this.itemEl = h('div', 'input-text').html(this.getTitle(key)),\r\n      this.suggest.el,\r\n      this.suggest.scrollbar.el\r\n    ).on('click', () => this.show());\r\n  }\r\n\r\n  show() {\r\n    this.suggest.search('');\r\n  }\r\n\r\n  itemClick(it) {\r\n    this.key = it;\r\n    this.itemEl.html(this.getTitle(it));\r\n  }\r\n\r\n  val(v) {\r\n    if (v !== undefined) {\r\n      this.key = v;\r\n      this.itemEl.html(this.getTitle(v));\r\n      return this;\r\n    }\r\n    return this.key;\r\n  }\r\n}\r\n","import { Element, h } from './element';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class Icon extends Element {\r\n  constructor(name) {\r\n    super('div', `${cssPrefix}-icon`);\r\n    this.iconNameEl = h('div', `${cssPrefix}-icon-img ${name}`);\r\n    this.child(this.iconNameEl);\r\n  }\r\n\r\n  setName(name) {\r\n    this.iconNameEl.className(`${cssPrefix}-icon-img ${name}`);\r\n  }\r\n}\r\n","/* global document */\r\nimport { h } from './element';\r\nimport Icon from './icon';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport function xtoast(title, content) {\r\n  const el = h('div', `${cssPrefix}-toast`);\r\n  const dimmer = h('div', `${cssPrefix}-dimmer active`);\r\n  const remove = () => {\r\n    document.body.removeChild(el.el);\r\n    document.body.removeChild(dimmer.el);\r\n  };\r\n\r\n  el.children(\r\n    h('div', `${cssPrefix}-toast-header`).children(\r\n      new Icon('close').on('click.stop', () => remove()),\r\n      title,\r\n    ),\r\n    h('div', `${cssPrefix}-toast-content`).html(content),\r\n  );\r\n  document.body.appendChild(el.el);\r\n  document.body.appendChild(dimmer.el);\r\n  // set offset\r\n  const { width, height } = el.box();\r\n  const { clientHeight, clientWidth } = document.documentElement;\r\n  el.offset({\r\n    left: (clientWidth - width) / 2,\r\n    top: (clientHeight - height) / 3,\r\n  });\r\n}\r\n\r\nexport default {};\r\n","/* global document */\r\n/* global window */\r\nimport { h } from './element';\r\nimport Icon from './icon';\r\nimport { cssPrefix } from '../config';\r\nimport { bind, unbind } from './event';\r\n\r\nexport default class Modal {\r\n  constructor(title, content, width = '600px') {\r\n    this.title = title;\r\n    this.el = h('div', `${cssPrefix}-modal`).css('width', width).children(\r\n      h('div', `${cssPrefix}-modal-header`).children(\r\n        new Icon('close').on('click.stop', () => this.hide()),\r\n        this.title,\r\n      ),\r\n      h('div', `${cssPrefix}-modal-content`).children(...content),\r\n    ).hide();\r\n  }\r\n\r\n  show() {\r\n    // dimmer\r\n    this.dimmer = h('div', `${cssPrefix}-dimmer active`);\r\n    document.body.appendChild(this.dimmer.el);\r\n    const { width, height } = this.el.show().box();\r\n    const { clientHeight, clientWidth } = document.documentElement;\r\n    this.el.offset({\r\n      left: (clientWidth - width) / 2,\r\n      top: (clientHeight - height) / 3,\r\n    });\r\n    window.xkeydownEsc = (evt) => {\r\n      if (evt.keyCode === 27) {\r\n        this.hide();\r\n      }\r\n    };\r\n    bind(window, 'keydown', window.xkeydownEsc);\r\n  }\r\n\r\n  hide() {\r\n    this.el.hide();\r\n    document.body.removeChild(this.dimmer.el);\r\n    unbind(window, 'keydown', window.xkeydownEsc);\r\n    delete window.xkeydownEsc;\r\n  }\r\n}\r\n","import Modal from './modal';\r\nimport FormInput from './form_input';\r\nimport FormSelect from './form_select';\r\nimport FormField from './form_field';\r\nimport Button from './button';\r\nimport { t } from '../locale/locale';\r\nimport { h } from './element';\r\nimport { cssPrefix } from '../config';\r\n\r\nconst fieldLabelWidth = 100;\r\n\r\nexport default class ModalJumpTo extends Modal {\r\n  constructor() {\r\n    const ff = new FormField(\r\n      new FormInput('70px', '10'),\r\n      { required: true },\r\n    );\r\n\r\n    super(\"Jump to row\", [\r\n      h('div', `${cssPrefix}-form-fields`).children(\r\n        ff.el\r\n      ),\r\n      h('div', `${cssPrefix}-buttons`).children(\r\n        new Button('ok', 'primary').on('click', () => this.btnClick('ok')),\r\n      ),\r\n    ], fieldLabelWidth);\r\n    this.ff = ff;\r\n    this.change = () => {};\r\n  }\r\n\r\n  btnClick(action) {\r\n    if (action === 'ok') {\r\n      this.change(this.ff.val());\r\n      this.hide();\r\n  }\r\n  }\r\n\r\n  showTo() {\r\n      this.show();\r\n  }\r\n}\r\n","import Modal from './modal';\r\nimport FormInput from './form_input';\r\nimport FormSelect from './form_select';\r\nimport FormField from './form_field';\r\nimport Button from './button';\r\nimport { t } from '../locale/locale';\r\nimport { h } from './element';\r\nimport { cssPrefix } from '../config';\r\n\r\nconst fieldLabelWidth = 100;\r\n\r\nexport default class ModalValidation extends Modal {\r\n  constructor() {\r\n    const mf = new FormField(\r\n      new FormSelect('cell',\r\n        ['cell'], // cell|row|column\r\n        '100%',\r\n        it => t(`dataValidation.modeType.${it}`)),\r\n      { required: true },\r\n      `${t('dataValidation.range')}:`,\r\n      fieldLabelWidth,\r\n    );\r\n    const rf = new FormField(\r\n      new FormInput('120px', 'E3 or E3:F12'),\r\n      { required: true, pattern: /^([A-Z]{1,2}[1-9]\\d*)(:[A-Z]{1,2}[1-9]\\d*)?$/ },\r\n    );\r\n    const cf = new FormField(\r\n      new FormSelect('list',\r\n        ['list', 'number', 'date', 'phone', 'email'],\r\n        '100%',\r\n        it => t(`dataValidation.type.${it}`),\r\n        it => this.criteriaSelected(it)),\r\n      { required: true },\r\n      `${t('dataValidation.criteria')}:`,\r\n      fieldLabelWidth,\r\n    );\r\n\r\n    // operator\r\n    const of = new FormField(\r\n      new FormSelect('be',\r\n        ['be', 'nbe', 'eq', 'neq', 'lt', 'lte', 'gt', 'gte'],\r\n        '160px',\r\n        it => t(`dataValidation.operator.${it}`),\r\n        it => this.criteriaOperatorSelected(it)),\r\n      { required: true },\r\n    ).hide();\r\n    // min, max\r\n    const minvf = new FormField(\r\n      new FormInput('70px', '10'),\r\n      { required: true },\r\n    ).hide();\r\n    const maxvf = new FormField(\r\n      new FormInput('70px', '100'),\r\n      { required: true, type: 'number' },\r\n    ).hide();\r\n    // value\r\n    const svf = new FormField(\r\n      new FormInput('120px', 'a,b,c'),\r\n      { required: true },\r\n    );\r\n    const vf = new FormField(\r\n      new FormInput('70px', '10'),\r\n      { required: true, type: 'number' },\r\n    ).hide();\r\n\r\n    super(t('contextmenu.validation'), [\r\n      h('div', `${cssPrefix}-form-fields`).children(\r\n        mf.el,\r\n        rf.el,\r\n      ),\r\n      h('div', `${cssPrefix}-form-fields`).children(\r\n        cf.el,\r\n        of.el,\r\n        minvf.el,\r\n        maxvf.el,\r\n        vf.el,\r\n        svf.el,\r\n      ),\r\n      h('div', `${cssPrefix}-buttons`).children(\r\n        new Button('cancel').on('click', () => this.btnClick('cancel')),\r\n        new Button('remove').on('click', () => this.btnClick('remove')),\r\n        new Button('save', 'primary').on('click', () => this.btnClick('save')),\r\n      ),\r\n    ]);\r\n    this.mf = mf;\r\n    this.rf = rf;\r\n    this.cf = cf;\r\n    this.of = of;\r\n    this.minvf = minvf;\r\n    this.maxvf = maxvf;\r\n    this.vf = vf;\r\n    this.svf = svf;\r\n    this.change = () => {};\r\n  }\r\n\r\n  showVf(it) {\r\n    const hint = it === 'date' ? '2018-11-12' : '10';\r\n    const { vf } = this;\r\n    vf.input.hint(hint);\r\n    vf.show();\r\n  }\r\n\r\n  criteriaSelected(it) {\r\n    const {\r\n      of, minvf, maxvf, vf, svf,\r\n    } = this;\r\n    if (it === 'date' || it === 'number') {\r\n      of.show();\r\n      minvf.rule.type = it;\r\n      maxvf.rule.type = it;\r\n      if (it === 'date') {\r\n        minvf.hint('2018-11-12');\r\n        maxvf.hint('2019-11-12');\r\n      } else {\r\n        minvf.hint('10');\r\n        maxvf.hint('100');\r\n      }\r\n      minvf.show();\r\n      maxvf.show();\r\n      vf.hide();\r\n      svf.hide();\r\n    } else {\r\n      if (it === 'list') {\r\n        svf.show();\r\n      } else {\r\n        svf.hide();\r\n      }\r\n      vf.hide();\r\n      of.hide();\r\n      minvf.hide();\r\n      maxvf.hide();\r\n    }\r\n  }\r\n\r\n  criteriaOperatorSelected(it) {\r\n    if (!it) return;\r\n    const {\r\n      minvf, maxvf, vf,\r\n    } = this;\r\n    if (it === 'be' || it === 'nbe') {\r\n      minvf.show();\r\n      maxvf.show();\r\n      vf.hide();\r\n    } else {\r\n      const type = this.cf.val();\r\n      vf.rule.type = type;\r\n      if (type === 'date') {\r\n        vf.hint('2018-11-12');\r\n      } else {\r\n        vf.hint('10');\r\n      }\r\n      vf.show();\r\n      minvf.hide();\r\n      maxvf.hide();\r\n    }\r\n  }\r\n\r\n  btnClick(action) {\r\n    if (action === 'cancel') {\r\n      this.hide();\r\n    } else if (action === 'remove') {\r\n      this.change('remove');\r\n      this.hide();\r\n    } else if (action === 'save') {\r\n      // validate\r\n      const attrs = ['mf', 'rf', 'cf', 'of', 'svf', 'vf', 'minvf', 'maxvf'];\r\n      for (let i = 0; i < attrs.length; i += 1) {\r\n        const field = this[attrs[i]];\r\n        // console.log('field:', field);\r\n        if (field.isShow()) {\r\n          // console.log('it:', it);\r\n          if (!field.validate()) return;\r\n        }\r\n      }\r\n\r\n      const mode = this.mf.val();\r\n      const ref = this.rf.val();\r\n      const type = this.cf.val();\r\n      const operator = this.of.val();\r\n      let value = this.svf.val();\r\n      if (type === 'number' || type === 'date') {\r\n        if (operator === 'be' || operator === 'nbe') {\r\n          value = [this.minvf.val(), this.maxvf.val()];\r\n        } else {\r\n          value = this.vf.val();\r\n        }\r\n      }\r\n      // console.log(mode, ref, type, operator, value);\r\n      this.change('save',\r\n        mode,\r\n        ref,\r\n        {\r\n          type, operator, required: false, value,\r\n        });\r\n      this.hide();\r\n    }\r\n  }\r\n\r\n  // validation: { mode, ref, validator }\r\n  setValue(v) {\r\n    if (v) {\r\n      const {\r\n        mf, rf, cf, of, svf, vf, minvf, maxvf,\r\n      } = this;\r\n      const {\r\n        mode, ref, validator,\r\n      } = v;\r\n      const {\r\n        type, operator, value,\r\n      } = validator || { type: 'list' };\r\n      mf.val(mode || 'cell');\r\n      rf.val(ref);\r\n      cf.val(type);\r\n      of.val(operator);\r\n      if (Array.isArray(value)) {\r\n        minvf.val(value[0]);\r\n        maxvf.val(value[1]);\r\n      } else {\r\n        svf.val(value || '');\r\n        vf.val(value || '');\r\n      }\r\n      this.criteriaSelected(type);\r\n      this.criteriaOperatorSelected(operator);\r\n    }\r\n    this.show();\r\n  }\r\n}\r\n","/* global window document */\r\nimport { h } from './element';\r\nimport { cssPrefix } from '../config';\r\nimport Button from './button';\r\nimport { Draw } from '../canvas/draw';\r\nimport { renderCell } from './table';\r\nimport { t } from '../locale/locale';\r\n\r\n// resolution: 72 => 595 x 842\r\n// 150 => 1240 x 1754\r\n// 200 => 1654 x 2339\r\n// 300 => 2479 x 3508\r\n// 96 * cm / 2.54 , 96 * cm / 2.54\r\n\r\nconst PAGER_SIZES = [\r\n  ['A3', 11.69, 16.54],\r\n  ['A4', 8.27, 11.69],\r\n  ['A5', 5.83, 8.27],\r\n  ['B4', 9.84, 13.90],\r\n  ['B5', 6.93, 9.84],\r\n];\r\n\r\nconst PAGER_ORIENTATIONS = ['landscape', 'portrait'];\r\n\r\nfunction inches2px(inc) {\r\n  return parseInt(96 * inc, 10);\r\n}\r\n\r\nfunction btnClick(type) {\r\n  if (type === 'cancel') {\r\n    this.el.hide();\r\n  } else {\r\n    this.toPrint();\r\n  }\r\n}\r\n\r\nfunction pagerSizeChange(evt) {\r\n  const { paper } = this;\r\n  const { value } = evt.target;\r\n  const ps = PAGER_SIZES[value];\r\n  paper.w = inches2px(ps[1]);\r\n  paper.h = inches2px(ps[2]);\r\n  // console.log('paper:', ps, paper);\r\n  this.preview();\r\n}\r\nfunction pagerOrientationChange(evt) {\r\n  const { paper } = this;\r\n  const { value } = evt.target;\r\n  const v = PAGER_ORIENTATIONS[value];\r\n  paper.orientation = v;\r\n  this.preview();\r\n}\r\n\r\nexport default class Print {\r\n  constructor(data) {\r\n    this.paper = {\r\n      w: inches2px(PAGER_SIZES[0][1]),\r\n      h: inches2px(PAGER_SIZES[0][2]),\r\n      padding: 50,\r\n      orientation: PAGER_ORIENTATIONS[0],\r\n      get width() {\r\n        return this.orientation === 'landscape' ? this.h : this.w;\r\n      },\r\n      get height() {\r\n        return this.orientation === 'landscape' ? this.w : this.h;\r\n      },\r\n    };\r\n    this.data = data;\r\n    this.el = h('div', `${cssPrefix}-print`)\r\n      .children(\r\n        h('div', `${cssPrefix}-print-bar`)\r\n          .children(\r\n            h('div', '-title').child('Print settings'),\r\n            h('div', '-right').children(\r\n              h('div', `${cssPrefix}-buttons`).children(\r\n                new Button('cancel').on('click', btnClick.bind(this, 'cancel')),\r\n                new Button('next', 'primary').on('click', btnClick.bind(this, 'next')),\r\n              ),\r\n            ),\r\n          ),\r\n        h('div', `${cssPrefix}-print-content`)\r\n          .children(\r\n            this.contentEl = h('div', '-content'),\r\n            h('div', '-sider').child(\r\n              h('form', '').children(\r\n                h('fieldset', '').children(\r\n                  h('label', '').child(`${t('print.size')}`),\r\n                  h('select', '').children(\r\n                    ...PAGER_SIZES.map((it, index) => h('option', '').attr('value', index).child(`${it[0]} ( ${it[1]}''x${it[2]}'' )`)),\r\n                  ).on('change', pagerSizeChange.bind(this)),\r\n                ),\r\n                h('fieldset', '').children(\r\n                  h('label', '').child(`${t('print.orientation')}`),\r\n                  h('select', '').children(\r\n                    ...PAGER_ORIENTATIONS.map((it, index) => h('option', '').attr('value', index).child(`${t('print.orientations')[index]}`)),\r\n                  ).on('change', pagerOrientationChange.bind(this)),\r\n                ),\r\n              ),\r\n            ),\r\n          ),\r\n      ).hide();\r\n  }\r\n\r\n  resetData(data) {\r\n    this.data = data;\r\n  }\r\n\r\n  preview() {\r\n    const { data, paper } = this;\r\n    const { width, height, padding } = paper;\r\n    const iwidth = width - padding * 2;\r\n    const iheight = height - padding * 2;\r\n    const cr = data.contentRange();\r\n    const pages = parseInt(cr.h / iheight, 10) + 1;\r\n    const scale = iwidth / cr.w;\r\n    let left = padding;\r\n    const top = padding;\r\n    if (scale > 1) {\r\n      left += (iwidth - cr.w) / 2;\r\n    }\r\n    let ri = 0;\r\n    let yoffset = 0;\r\n    this.contentEl.html('');\r\n    this.canvases = [];\r\n    const mViewRange = {\r\n      sri: 0,\r\n      sci: 0,\r\n      eri: 0,\r\n      eci: 0,\r\n    };\r\n    for (let i = 0; i < pages; i += 1) {\r\n      let th = 0;\r\n      let yo = 0;\r\n      const wrap = h('div', `${cssPrefix}-canvas-card`);\r\n      const canvas = h('canvas', `${cssPrefix}-canvas`);\r\n      this.canvases.push(canvas.el);\r\n      const draw = new Draw(canvas.el, width, height);\r\n      // cell-content\r\n      draw.save();\r\n      draw.translate(left, top);\r\n      if (scale < 1) draw.scale(scale, scale);\r\n      // console.log('ri:', ri, cr.eri, yoffset);\r\n      for (; ri <= cr.eri; ri += 1) {\r\n        const rh = data.rows.getHeight(ri);\r\n        th += rh;\r\n        if (th < iheight) {\r\n          for (let ci = 0; ci <= cr.eci; ci += 1) {\r\n            renderCell(draw, data, ri, ci, yoffset);\r\n            mViewRange.eci = ci;\r\n          }\r\n        } else {\r\n          yo = -(th - rh);\r\n          break;\r\n        }\r\n      }\r\n      mViewRange.eri = ri;\r\n      draw.restore();\r\n      // merge-cell\r\n      draw.save();\r\n      draw.translate(left, top);\r\n      if (scale < 1) draw.scale(scale, scale);\r\n      const yof = yoffset;\r\n      data.eachMergesInView(mViewRange, ({ sri, sci }) => {\r\n        renderCell(draw, data, sri, sci, yof);\r\n      });\r\n      draw.restore();\r\n\r\n      mViewRange.sri = mViewRange.eri;\r\n      mViewRange.sci = mViewRange.eci;\r\n      yoffset += yo;\r\n      this.contentEl.child(h('div', `${cssPrefix}-canvas-card-wraper`).child(wrap.child(canvas)));\r\n    }\r\n    this.el.show();\r\n  }\r\n\r\n  toPrint() {\r\n    this.el.hide();\r\n    const { paper } = this;\r\n    const iframe = h('iframe', '').hide();\r\n    const { el } = iframe;\r\n    window.document.body.appendChild(el);\r\n    const { contentWindow } = el;\r\n    const idoc = contentWindow.document;\r\n    const style = document.createElement('style');\r\n    style.innerHTML = `\r\n      @page { size: ${paper.width}px ${paper.height}px; };\r\n      canvas {\r\n        page-break-before: auto;        \r\n        page-break-after: always;\r\n        image-rendering: pixelated;\r\n      };\r\n    `;\r\n    idoc.head.appendChild(style);\r\n    this.canvases.forEach((it) => {\r\n      const cn = it.cloneNode(false);\r\n      const ctx = cn.getContext('2d');\r\n      // ctx.imageSmoothingEnabled = true;\r\n      ctx.drawImage(it, 0, 0);\r\n      idoc.body.appendChild(cn);\r\n    });\r\n    contentWindow.print();\r\n  }\r\n}\r\n","/* global window */\r\nimport { h } from './element';\r\nimport { mouseMoveUp } from './event';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default class Resizer {\r\n  constructor(vertical = false, minDistance) {\r\n    this.moving = false;\r\n    this.vertical = vertical;\r\n    this.el = h('div', `${cssPrefix}-resizer ${vertical ? 'vertical' : 'horizontal'}`).children(\r\n      this.unhideHoverEl = h('div', `${cssPrefix}-resizer-hover`)\r\n        .on('dblclick.stop', evt => this.mousedblclickHandler(evt))\r\n        .css('position', 'absolute').hide(),\r\n      this.hoverEl = h('div', `${cssPrefix}-resizer-hover`)\r\n        .on('mousedown.stop', evt => this.mousedownHandler(evt)),\r\n      this.lineEl = h('div', `${cssPrefix}-resizer-line`).hide(),\r\n    ).hide();\r\n    // cell rect\r\n    this.cRect = null;\r\n    this.finishedFn = null;\r\n    this.minDistance = minDistance;\r\n    this.unhideFn = () => {};\r\n  }\r\n\r\n  showUnhide(index) {\r\n    this.unhideIndex = index;\r\n    this.unhideHoverEl.show();\r\n  }\r\n\r\n  hideUnhide() {\r\n    this.unhideHoverEl.hide();\r\n  }\r\n\r\n  // rect : {top, left, width, height}\r\n  // line : {width, height}\r\n  show(rect, line) {\r\n    const {\r\n      moving, vertical, hoverEl, lineEl, el,\r\n      unhideHoverEl,\r\n    } = this;\r\n    if (moving) return;\r\n    this.cRect = rect;\r\n    const {\r\n      left, top, width, height,\r\n    } = rect;\r\n    el.offset({\r\n      left: vertical ? left + width - 5 : left,\r\n      top: vertical ? top : top + height - 5,\r\n    }).show();\r\n    hoverEl.offset({\r\n      width: vertical ? 5 : width,\r\n      height: vertical ? height : 5,\r\n    });\r\n    lineEl.offset({\r\n      width: vertical ? 0 : line.width,\r\n      height: vertical ? line.height : 0,\r\n    });\r\n    unhideHoverEl.offset({\r\n      left: vertical ? 5 - width : left,\r\n      top: vertical ? top : 5 - height,\r\n      width: vertical ? 5 : width,\r\n      height: vertical ? height : 5,\r\n    });\r\n  }\r\n\r\n  hide() {\r\n    this.el.offset({\r\n      left: 0,\r\n      top: 0,\r\n    }).hide();\r\n    this.hideUnhide();\r\n  }\r\n\r\n  mousedblclickHandler() {\r\n    if (this.unhideIndex) this.unhideFn(this.unhideIndex);\r\n  }\r\n\r\n  mousedownHandler(evt) {\r\n    let startEvt = evt;\r\n    const {\r\n      el, lineEl, cRect, vertical, minDistance,\r\n    } = this;\r\n    let distance = vertical ? cRect.width : cRect.height;\r\n    //console.log('distance:', distance);\r\n    lineEl.show();\r\n    mouseMoveUp(window, (e) => {\r\n      this.moving = true;\r\n      if (startEvt !== null && e.buttons === 1) {\r\n         //console.log('top:', top, ', left:', top, ', cRect:', cRect);\r\n        if (vertical) {\r\n          distance += e.movementX;\r\n          if (distance > minDistance) {\r\n            el.css('left', `${cRect.left + distance}px`);\r\n          }\r\n        } else {\r\n          distance += e.movementY;\r\n          if (distance > minDistance) {\r\n            el.css('top', `${cRect.top + distance}px`);\r\n          }\r\n        }\r\n        startEvt = e;\r\n      }\r\n    }, () => {\r\n      startEvt = null;\r\n      lineEl.hide();\r\n      this.moving = false;\r\n      this.hide();\r\n      if (this.finishedFn) {\r\n        if (distance < minDistance) distance = minDistance;\r\n        this.finishedFn(cRect, distance);\r\n      }\r\n    });\r\n  }\r\n}\r\n","import { h } from './element';\nimport { cssPrefix } from '../config';\n\nexport default class Scrollbar {\n  constructor(vertical) {\n    this.vertical = vertical;\n    this.moveFn = null;\n    this.el = h('div', `${cssPrefix}-scrollbar ${vertical ? 'vertical' : 'horizontal'}`)\n      .child(this.contentEl = h('div', ''))\n      .on('mousemove.stop', () => {})\n      .on('scroll.stop', (evt) => {\n        const { scrollTop, scrollLeft } = evt.target;\n        // console.log('scrollTop:', scrollTop);\n        if (this.moveFn) {\n          this.moveFn(this.vertical ? scrollTop : scrollLeft, evt);\n        }\n        // console.log('evt:::', evt);\n      });\n  }\n\n  move(v) {\n    this.el.scroll(v);\n    return this;\n  }\n\n  scroll() {\n    return this.el.scroll();\n  }\n\n  set(distance, contentDistance) {\n    const d = distance - 1;\n    // console.log('distance:', distance, ', contentDistance:', contentDistance);\n    if (contentDistance > d) {\n      const cssKey = this.vertical ? 'height' : 'width';\n      // console.log('d:', d);\n      this.el.css(cssKey, `${d - 15}px`).show();\n      this.contentEl\n        .css(this.vertical ? 'width' : 'height', '1px')\n        .css(cssKey, `${contentDistance}px`);\n    } else {\n      this.el.hide();\n    }\n    return this;\n  }\n}\n","import { h } from './element';\r\nimport { cssPrefix } from '../config';\r\nimport { CellRange } from '../core/cell_range';\r\n\r\nconst selectorHeightBorderWidth = 2 * 2 - 1;\r\nlet startZIndex = 10;\r\n\r\nclass SelectorElement {\r\n  constructor(useHideInput = false) {\r\n    this.useHideInput = useHideInput;\r\n    this.inputChange = () => {};\r\n    this.cornerEl = h('div', `${cssPrefix}-selector-corner`);\r\n    this.areaEl = h('div', `${cssPrefix}-selector-area`)\r\n      .child(this.cornerEl).hide();\r\n    this.clipboardEl = h('div', `${cssPrefix}-selector-clipboard`).hide();\r\n    this.autofillEl = h('div', `${cssPrefix}-selector-autofill`).hide();\r\n    this.el = h('div', `${cssPrefix}-selector`)\r\n      .css('z-index', `${startZIndex}`)\r\n      .children(this.areaEl, this.clipboardEl, this.autofillEl)\r\n      .hide();\r\n    if (useHideInput) {\r\n      this.hideInput = h('input', '')\r\n        .on('compositionend', (evt) => {\r\n          this.inputChange(evt.target.value);\r\n        });\r\n      this.el.child(this.hideInputDiv = h('div', 'hide-input').child(this.hideInput));\r\n      this.el.child(this.hideInputDiv = h('div', 'hide-input').child(this.hideInput));\r\n    }\r\n    startZIndex += 1;\r\n  }\r\n\r\n  setOffset(v) {\r\n    this.el.offset(v).show();\r\n    return this;\r\n  }\r\n\r\n  hide() {\r\n    this.el.hide();\r\n    return this;\r\n  }\r\n\r\n  setAreaOffset(v) {\r\n    const {\r\n      left, top, width, height,\r\n    } = v;\r\n    const of = {\r\n      width: width - selectorHeightBorderWidth + 0.8,\r\n      height: height - selectorHeightBorderWidth + 0.8,\r\n      left: left - 0.8,\r\n      top: top - 0.8,\r\n    };\r\n    this.areaEl.offset(of).show();\r\n    if (this.useHideInput) {\r\n      this.hideInputDiv.offset(of);\r\n      this.hideInput.val('').focus();\r\n    }\r\n  }\r\n\r\n  setClipboardOffset(v) {\r\n    const {\r\n      left, top, width, height,\r\n    } = v;\r\n    this.clipboardEl.offset({\r\n      left,\r\n      top,\r\n      width: width - 5,\r\n      height: height - 5,\r\n    });\r\n  }\r\n\r\n  showAutofill(v) {\r\n    const {\r\n      left, top, width, height,\r\n    } = v;\r\n    this.autofillEl.offset({\r\n      width: width - selectorHeightBorderWidth,\r\n      height: height - selectorHeightBorderWidth,\r\n      left,\r\n      top,\r\n    }).show();\r\n  }\r\n\r\n  hideAutofill() {\r\n    this.autofillEl.hide();\r\n  }\r\n\r\n  showClipboard() {\r\n    this.clipboardEl.show();\r\n  }\r\n\r\n  hideClipboard() {\r\n    this.clipboardEl.hide();\r\n  }\r\n}\r\n\r\nfunction calBRAreaOffset(offset) {\r\n  const { data } = this;\r\n  const {\r\n    left, top, width, height, scroll, l, t,\r\n  } = offset;\r\n  const ftwidth = data.freezeTotalWidth();\r\n  const ftheight = data.freezeTotalHeight();\r\n  let left0 = left - ftwidth;\r\n  if (ftwidth > l) left0 -= scroll.x;\r\n  let top0 = top - ftheight;\r\n  if (ftheight > t) top0 -= scroll.y;\r\n  return {\r\n    left: left0,\r\n    top: top0,\r\n    width,\r\n    height,\r\n  };\r\n}\r\n\r\nfunction calTAreaOffset(offset) {\r\n  const { data } = this;\r\n  const {\r\n    left, width, height, l, t, scroll,\r\n  } = offset;\r\n  const ftwidth = data.freezeTotalWidth();\r\n  let left0 = left - ftwidth;\r\n  if (ftwidth > l) left0 -= scroll.x;\r\n  return {\r\n    left: left0, top: t, width, height,\r\n  };\r\n}\r\n\r\nfunction calLAreaOffset(offset) {\r\n  const { data } = this;\r\n  const {\r\n    top, width, height, l, t, scroll,\r\n  } = offset;\r\n  const ftheight = data.freezeTotalHeight();\r\n  let top0 = top - ftheight;\r\n  // console.log('ftheight:', ftheight, ', t:', t);\r\n  if (ftheight > t) top0 -= scroll.y;\r\n  return {\r\n    left: l, top: top0, width, height,\r\n  };\r\n}\r\n\r\nfunction setBRAreaOffset(offset) {\r\n  const { br } = this;\r\n  br.setAreaOffset(calBRAreaOffset.call(this, offset));\r\n}\r\n\r\nfunction setTLAreaOffset(offset) {\r\n  const { tl } = this;\r\n  tl.setAreaOffset(offset);\r\n}\r\n\r\nfunction setTAreaOffset(offset) {\r\n  const { t } = this;\r\n  t.setAreaOffset(calTAreaOffset.call(this, offset));\r\n}\r\n\r\nfunction setLAreaOffset(offset) {\r\n  const { l } = this;\r\n  l.setAreaOffset(calLAreaOffset.call(this, offset));\r\n}\r\n\r\nfunction setLClipboardOffset(offset) {\r\n  const { l } = this;\r\n  l.setClipboardOffset(calLAreaOffset.call(this, offset));\r\n}\r\n\r\nfunction setBRClipboardOffset(offset) {\r\n  const { br } = this;\r\n  br.setClipboardOffset(calBRAreaOffset.call(this, offset));\r\n}\r\n\r\nfunction setTLClipboardOffset(offset) {\r\n  const { tl } = this;\r\n  tl.setClipboardOffset(offset);\r\n}\r\n\r\nfunction setTClipboardOffset(offset) {\r\n  const { t } = this;\r\n  t.setClipboardOffset(calTAreaOffset.call(this, offset));\r\n}\r\n\r\nfunction setAllAreaOffset(offset) {\r\n  setBRAreaOffset.call(this, offset);\r\n  setTLAreaOffset.call(this, offset);\r\n  setTAreaOffset.call(this, offset);\r\n  setLAreaOffset.call(this, offset);\r\n}\r\n\r\nfunction setAllClipboardOffset(offset) {\r\n  setBRClipboardOffset.call(this, offset);\r\n  setTLClipboardOffset.call(this, offset);\r\n  setTClipboardOffset.call(this, offset);\r\n  setLClipboardOffset.call(this, offset);\r\n}\r\n\r\nexport default class Selector {\r\n  constructor(data) {\r\n    this.inputChange = () => {};\r\n    this.data = data;\r\n    this.br = new SelectorElement(true);\r\n    this.t = new SelectorElement();\r\n    this.l = new SelectorElement();\r\n    this.tl = new SelectorElement();\r\n    this.br.inputChange = (v) => {\r\n      this.inputChange(v);\r\n    };\r\n    this.br.el.show();\r\n    this.offset = null;\r\n    this.areaOffset = null;\r\n    this.indexes = null;\r\n    this.range = null;\r\n    this.arange = null;\r\n    this.el = h('div', `${cssPrefix}-selectors`)\r\n      .children(\r\n        this.tl.el,\r\n        this.t.el,\r\n        this.l.el,\r\n        this.br.el,\r\n      ).hide();\r\n\r\n    // for performance\r\n    this.lastri = -1;\r\n    this.lastci = -1;\r\n\r\n    startZIndex += 1;\r\n  }\r\n\r\n  resetData(data) {\r\n    this.data = data;\r\n    this.range = data.selector.range;\r\n    this.resetAreaOffset();\r\n  }\r\n\r\n  hide() {\r\n    this.el.hide();\r\n  }\r\n\r\n  resetOffset() {\r\n    const {\r\n      data, tl, t, l, br,\r\n    } = this;\r\n    const freezeHeight = data.freezeTotalHeight();\r\n    const freezeWidth = data.freezeTotalWidth();\r\n    if (freezeHeight > 0 || freezeWidth > 0) {\r\n      tl.setOffset({ width: freezeWidth, height: freezeHeight });\r\n      t.setOffset({ left: freezeWidth, height: freezeHeight });\r\n      l.setOffset({ top: freezeHeight, width: freezeWidth });\r\n      br.setOffset({ left: freezeWidth, top: freezeHeight });\r\n    } else {\r\n      tl.hide();\r\n      t.hide();\r\n      l.hide();\r\n      br.setOffset({ left: 0, top: 0 });\r\n    }\r\n  }\r\n\r\n  resetAreaOffset() {\r\n    // console.log('offset:', offset);\r\n    const offset = this.data.getSelectedRect();\r\n    const coffset = this.data.getClipboardRect();\r\n    setAllAreaOffset.call(this, offset);\r\n    setAllClipboardOffset.call(this, coffset);\r\n    this.resetOffset();\r\n  }\r\n\r\n  resetBRTAreaOffset() {\r\n    const offset = this.data.getSelectedRect();\r\n    const coffset = this.data.getClipboardRect();\r\n    setBRAreaOffset.call(this, offset);\r\n    setTAreaOffset.call(this, offset);\r\n    setBRClipboardOffset.call(this, coffset);\r\n    setTClipboardOffset.call(this, coffset);\r\n    this.resetOffset();\r\n  }\r\n\r\n  resetBRLAreaOffset() {\r\n    const offset = this.data.getSelectedRect();\r\n    const coffset = this.data.getClipboardRect();\r\n    setBRAreaOffset.call(this, offset);\r\n    setLAreaOffset.call(this, offset);\r\n    setBRClipboardOffset.call(this, coffset);\r\n    setLClipboardOffset.call(this, coffset);\r\n    this.resetOffset();\r\n  }\r\n\r\n  set(ri, ci, indexesUpdated = true) {\r\n    const { data } = this;\r\n    const cellRange = data.calSelectedRangeByStart(ri, ci);\r\n    const { sri, sci } = cellRange;\r\n    if (indexesUpdated) {\r\n      let [cri, cci] = [ri, ci];\r\n      if (ri < 0) cri = 0;\r\n      if (ci < 0) cci = 0;\r\n      data.selector.setIndexes(cri, cci);\r\n      this.indexes = [cri, cci];\r\n    }\r\n\r\n    this.moveIndexes = [sri, sci];\r\n    // this.sIndexes = sIndexes;\r\n    // this.eIndexes = eIndexes;\r\n    this.range = cellRange;\r\n    this.resetAreaOffset();\r\n    this.el.show();\r\n  }\r\n\r\n  setEnd(ri, ci, moving = true) {\r\n    const { data, lastri, lastci } = this;\r\n    if (moving) {\r\n      if (ri === lastri && ci === lastci) return;\r\n      this.lastri = ri;\r\n      this.lastci = ci;\r\n    }\r\n    this.range = data.calSelectedRangeByEnd(ri, ci);\r\n    setAllAreaOffset.call(this, this.data.getSelectedRect());\r\n  }\r\n\r\n  reset() {\r\n    // console.log('::::', this.data);\r\n    const { eri, eci } = this.data.selector.range;\r\n    this.setEnd(eri, eci);\r\n  }\r\n\r\n  showAutofill(ri, ci) {\r\n    if (ri === -1 && ci === -1) return;\r\n    // console.log('ri:', ri, ', ci:', ci);\r\n    // const [sri, sci] = this.sIndexes;\r\n    // const [eri, eci] = this.eIndexes;\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this.range;\r\n    const [nri, nci] = [ri, ci];\r\n    // const rn = eri - sri;\r\n    // const cn = eci - sci;\r\n    const srn = sri - ri;\r\n    const scn = sci - ci;\r\n    const ern = eri - ri;\r\n    const ecn = eci - ci;\r\n    if (scn > 0) {\r\n      // left\r\n      // console.log('left');\r\n      this.arange = new CellRange(sri, nci, eri, sci - 1);\r\n      // this.saIndexes = [sri, nci];\r\n      // this.eaIndexes = [eri, sci - 1];\r\n      // data.calRangeIndexes2(\r\n    } else if (srn > 0) {\r\n      // top\r\n      // console.log('top');\r\n      // nri = sri;\r\n      this.arange = new CellRange(nri, sci, sri - 1, eci);\r\n      // this.saIndexes = [nri, sci];\r\n      // this.eaIndexes = [sri - 1, eci];\r\n    } else if (ecn < 0) {\r\n      // right\r\n      // console.log('right');\r\n      // nci = eci;\r\n      this.arange = new CellRange(sri, eci + 1, eri, nci);\r\n      // this.saIndexes = [sri, eci + 1];\r\n      // this.eaIndexes = [eri, nci];\r\n    } else if (ern < 0) {\r\n      // bottom\r\n      // console.log('bottom');\r\n      // nri = eri;\r\n      this.arange = new CellRange(eri + 1, sci, nri, eci);\r\n      // this.saIndexes = [eri + 1, sci];\r\n      // this.eaIndexes = [nri, eci];\r\n    } else {\r\n      // console.log('else:');\r\n      this.arange = null;\r\n      // this.saIndexes = null;\r\n      // this.eaIndexes = null;\r\n      return;\r\n    }\r\n    if (this.arange !== null) {\r\n      // console.log(this.saIndexes, ':', this.eaIndexes);\r\n      const offset = this.data.getRect(this.arange);\r\n      offset.width += 2;\r\n      offset.height += 2;\r\n      const {\r\n        br, l, t, tl,\r\n      } = this;\r\n      br.showAutofill(calBRAreaOffset.call(this, offset));\r\n      l.showAutofill(calLAreaOffset.call(this, offset));\r\n      t.showAutofill(calTAreaOffset.call(this, offset));\r\n      tl.showAutofill(offset);\r\n    }\r\n  }\r\n\r\n  hideAutofill() {\r\n    ['br', 'l', 't', 'tl'].forEach((property) => {\r\n      this[property].hideAutofill();\r\n    });\r\n  }\r\n\r\n  showClipboard() {\r\n    const coffset = this.data.getClipboardRect();\r\n    setAllClipboardOffset.call(this, coffset);\r\n    ['br', 'l', 't', 'tl'].forEach((property) => {\r\n      this[property].showClipboard();\r\n    });\r\n  }\r\n\r\n  hideClipboard() {\r\n    ['br', 'l', 't', 'tl'].forEach((property) => {\r\n      this[property].hideClipboard();\r\n    });\r\n  }\r\n}\r\n","/* global window */\r\nimport { h } from './element';\r\nimport { bind, mouseMoveUp, bindTouch, createEventEmitter } from './event';\r\nimport Resizer from './resizer';\r\nimport Scrollbar from './scrollbar';\r\nimport Selector from './selector';\r\nimport Editor from './editor';\r\nimport Print from './print';\r\nimport ContextMenu from './contextmenu';\r\nimport Table from './table';\r\nimport Toolbar from './toolbar/index';\r\nimport ModalValidation from './modal_validation';\r\nimport ModalJumpTo from './modal_jumpto';\r\nimport SortFilter from './sort_filter';\r\nimport { xtoast } from './message';\r\nimport { cssPrefix } from '../config';\r\nimport { formulas } from '../core/formula';\r\n\r\n/**\r\n * @desc throttle fn\r\n * @param func function\r\n * @param wait Delay in milliseconds\r\n */\r\nfunction throttle(func, wait) {\r\n  let timeout;\r\n  return (...arg) => {\r\n    const that = this;\r\n    const args = arg;\r\n    if (!timeout) {\r\n      timeout = setTimeout(() => {\r\n        timeout = null;\r\n        func.apply(that, args);\r\n      }, wait);\r\n    }\r\n  };\r\n}\r\n\r\nfunction scrollbarMove() {\r\n  const {\r\n    data, verticalScrollbar, horizontalScrollbar,\r\n  } = this;\r\n  const {\r\n    l, t, left, top, width, height,\r\n  } = data.getSelectedRect();\r\n  const tableOffset = this.getTableOffset();\r\n  // console.log(',l:', l, ', left:', left, ', tOffset.left:', tableOffset.width);\r\n  if (Math.abs(left) + width > tableOffset.width) {\r\n    horizontalScrollbar.move({ left: l + width - tableOffset.width });\r\n  } else {\r\n    const fsw = data.freezeTotalWidth();\r\n    if (left < fsw) {\r\n      horizontalScrollbar.move({ left: l - 1 - fsw });\r\n    }\r\n  }\r\n  // console.log('top:', top, ', height:', height, ', tof.height:', tableOffset.height);\r\n  if (Math.abs(top) + height > tableOffset.height) {\r\n    verticalScrollbar.move({ top: t + height - tableOffset.height - 1 });\r\n  } else {\r\n    const fsh = data.freezeTotalHeight();\r\n    if (top < fsh) {\r\n      verticalScrollbar.move({ top: t - 1 - fsh });\r\n    }\r\n  }\r\n}\r\n\r\nfunction selectorSet(multiple, ri, ci, indexesUpdated = true, moving = true) {\r\n  if (ri === -1 && ci === -1) return;\r\n  const {\r\n    table, selector, toolbar, data,\r\n    contextMenu,\r\n  } = this;\r\n  contextMenu.setMode((ri === -1 || ci === -1) ? 'row-col' : 'range');\r\n  const cell = data.getCell(ri, ci);\r\n  if (multiple) {\r\n    selector.setEnd(ri, ci, moving);\r\n    this.trigger('cells-selected', cell, selector.range);\r\n  } else {\r\n    // trigger click event\r\n    selector.set(ri, ci, indexesUpdated);\r\n    this.trigger('cell-selected', cell, ri, ci);\r\n  }\r\n  toolbar.reset();\r\n  table.render();\r\n}\r\n\r\n// multiple: boolean\r\n// direction: left | right | up | down | row-first | row-last | col-first | col-last\r\nfunction selectorMove(multiple, direction) {\r\n  const {\r\n    selector, data,\r\n  } = this;\r\n  const { rows, cols } = data;\r\n  let [ri, ci] = selector.indexes;\r\n  const { eri, eci } = selector.range;\r\n  if (multiple) {\r\n    [ri, ci] = selector.moveIndexes;\r\n  }\r\n  // console.log('selector.move:', ri, ci);\r\n  if (direction === 'left') {\r\n    if (ci > 0) ci -= 1;\r\n  } else if (direction === 'right') {\r\n    if (eci !== ci) ci = eci;\r\n    if (ci < cols.len - 1) ci += 1;\r\n  } else if (direction === 'up') {\r\n    if (ri > 0) ri -= 1;\r\n  } else if (direction === 'down') {\r\n    if (eri !== ri) ri = eri;\r\n    if (ri < rows.len - 1) ri += 1;\r\n  } else if (direction === 'row-first') {\r\n    ci = 0;\r\n  } else if (direction === 'row-last') {\r\n    ci = cols.len - 1;\r\n  } else if (direction === 'col-first') {\r\n    ri = 0;\r\n  } else if (direction === 'col-last') {\r\n    ri = rows.len - 1;\r\n  }\r\n  if (multiple) {\r\n    selector.moveIndexes = [ri, ci];\r\n  }\r\n  selectorSet.call(this, multiple, ri, ci);\r\n  scrollbarMove.call(this);\r\n}\r\n\r\n// private methods\r\nfunction overlayerMousemove(evt) {\r\n  // console.log('x:', evt.offsetX, ', y:', evt.offsetY);\r\n  if (evt.buttons !== 0) return;\r\n  if (evt.target.className === `${cssPrefix}-resizer-hover`) return;\r\n  const { offsetX, offsetY } = evt;\r\n  const {\r\n    rowResizer, colResizer, tableEl, data,\r\n  } = this;\r\n  const { rows, cols } = data;\r\n  if (offsetX > cols.indexWidth && offsetY > rows.height) {\r\n    rowResizer.hide();\r\n    colResizer.hide();\r\n    return;\r\n  }\r\n  const tRect = tableEl.box();\r\n  const cRect = data.getCellRectByXY(evt.offsetX, evt.offsetY);\r\n  if (cRect.ri >= 0 && cRect.ci === -1) {\r\n    cRect.width = cols.indexWidth;\r\n    rowResizer.show(cRect, {\r\n      width: tRect.width,\r\n    });\r\n    if (rows.isHide(cRect.ri - 1)) {\r\n      rowResizer.showUnhide(cRect.ri);\r\n    } else {\r\n      rowResizer.hideUnhide();\r\n    }\r\n  } else {\r\n    rowResizer.hide();\r\n  }\r\n  if (cRect.ri === -1 && cRect.ci >= 0) {\r\n    cRect.height = rows.height;\r\n    colResizer.show(cRect, {\r\n      height: tRect.height,\r\n    });\r\n    if (cols.isHide(cRect.ci - 1)) {\r\n      colResizer.showUnhide(cRect.ci);\r\n    } else {\r\n      colResizer.hideUnhide();\r\n    }\r\n  } else {\r\n    colResizer.hide();\r\n  }\r\n}\r\n\r\n// let scrollThreshold = 15;\r\nfunction overlayerMousescroll(evt) {\r\n  // scrollThreshold -= 1;\r\n  // if (scrollThreshold > 0) return;\r\n  // scrollThreshold = 15;\r\n  const { verticalScrollbar, horizontalScrollbar, data } = this;\r\n  const { top } = verticalScrollbar.scroll();\r\n  const { left } = horizontalScrollbar.scroll();\r\n  // console.log('evt:::', evt.wheelDelta, evt.detail * 40);\r\n\r\n  const { rows, cols } = data;\r\n\r\n  // deltaY for vertical delta\r\n  const { deltaY, deltaX } = evt;\r\n  const loopValue = (ii, vFunc) => {\r\n    let i = ii;\r\n    let v = 0;\r\n    do {\r\n      v = vFunc(i);\r\n      i += 1;\r\n    } while (v <= 0);\r\n    return v;\r\n  };\r\n  // console.log('deltaX', deltaX, 'evt.detail', evt.detail);\r\n  // if (evt.detail) deltaY = evt.detail * 40;\r\n  const moveY = (vertical) => {\r\n    if (vertical > 0) {\r\n      // up\r\n      const ri = data.scroll.ri + 1;\r\n      if (ri < rows.len) {\r\n        const rh = loopValue(ri, i => rows.getHeight(i));\r\n        verticalScrollbar.move({ top: top + rh - 1 });\r\n      }\r\n    } else {\r\n      // down\r\n      const ri = data.scroll.ri - 1;\r\n      if (ri >= 0) {\r\n        const rh = loopValue(ri, i => rows.getHeight(i));\r\n        verticalScrollbar.move({ top: ri === 0 ? 0 : top - rh });\r\n      }\r\n    }\r\n  };\r\n\r\n  // deltaX for Mac horizontal scroll\r\n  const moveX = (horizontal) => {\r\n    if (horizontal > 0) {\r\n      // left\r\n      const ci = data.scroll.ci + 1;\r\n      if (ci < cols.len) {\r\n        const cw = loopValue(ci, i => cols.getWidth(i))/2;\r\n        horizontalScrollbar.move({ left: left + cw - 1 });\r\n      }\r\n    } else {\r\n      // right\r\n      const ci = data.scroll.ci - 1;\r\n      if (ci >= 0) {\r\n        const cw = loopValue(ci, i => cols.getWidth(i))/2;\r\n        horizontalScrollbar.move({ left: ci === 0 ? 0 : left - cw });\r\n      }\r\n    }\r\n  };\r\n  const tempY = Math.abs(deltaY);\r\n  const tempX = Math.abs(deltaX/10);\r\n  const temp = Math.max(tempY, tempX);\r\n  //console.log('dX tX t:', deltaX, tempX, temp);\r\n  // detail for windows/mac firefox vertical scroll\r\n  if (/Firefox/i.test(window.navigator.userAgent)) throttle(moveY(evt.detail), 50);\r\n  if (temp === tempX) throttle(moveX(deltaX/10), 500);\r\n  else if (temp === tempY) throttle(moveY(deltaY), 50);\r\n}\r\n\r\nfunction overlayerTouch(direction, distance) {\r\n  const { verticalScrollbar, horizontalScrollbar } = this;\r\n  const { top } = verticalScrollbar.scroll();\r\n  const { left } = horizontalScrollbar.scroll();\r\n\r\n  if (direction === 'left' || direction === 'right') {\r\n    horizontalScrollbar.move({ left: left - distance });\r\n  } else if (direction === 'up' || direction === 'down') {\r\n    verticalScrollbar.move({ top: top - distance });\r\n  }\r\n}\r\n\r\nfunction verticalScrollbarSet() {\r\n  const { data, verticalScrollbar } = this;\r\n  const { height } = this.getTableOffset();\r\n  const erth = data.exceptRowTotalHeight(0, -1);\r\n  //console.log('erth:', erth);\r\n  verticalScrollbar.set(height, data.rows.totalHeight() - erth);\r\n}\r\n\r\nfunction horizontalScrollbarSet() {\r\n  const { data, horizontalScrollbar } = this;\r\n  const { width } = this.getTableOffset();\r\n  if (data) {\r\n    horizontalScrollbar.set(width, data.cols.totalWidth());\r\n  }\r\n}\r\n\r\nfunction sheetFreeze() {\r\n  const {\r\n    selector, data, editor,\r\n  } = this;\r\n  const [ri, ci] = data.freeze;\r\n  if (ri > 0 || ci > 0) {\r\n    const fwidth = data.freezeTotalWidth();\r\n    const fheight = data.freezeTotalHeight();\r\n    editor.setFreezeLengths(fwidth, fheight);\r\n  }\r\n  selector.resetAreaOffset();\r\n}\r\n\r\nfunction sheetReset() {\r\n  const {\r\n    tableEl,\r\n    overlayerEl,\r\n    overlayerCEl,\r\n    table,\r\n    toolbar,\r\n    selector,\r\n    el,\r\n  } = this;\r\n  const tOffset = this.getTableOffset();\r\n  const vRect = this.getRect();\r\n  tableEl.attr(vRect);\r\n  overlayerEl.offset(vRect);\r\n  overlayerCEl.offset(tOffset);\r\n  el.css('width', `${vRect.width}px`);\r\n  verticalScrollbarSet.call(this);\r\n  horizontalScrollbarSet.call(this);\r\n  sheetFreeze.call(this);\r\n  table.render();\r\n  toolbar.reset();\r\n  selector.reset();\r\n}\r\n\r\nfunction clearClipboard() {\r\n  const { data, selector } = this;\r\n  data.clearClipboard();\r\n  selector.hideClipboard();\r\n}\r\n\r\nfunction copy() {\r\n  const { data, selector } = this;\r\n  data.copy();\r\n  data.copyToSystemClipboard();\r\n  selector.showClipboard();\r\n}\r\n\r\nfunction cut() {\r\n  const { data, selector } = this;\r\n  data.cut();\r\n  selector.showClipboard();\r\n}\r\n\r\nfunction paste(what, evt) {\r\n  const { data } = this;\r\n  if (data.settings.mode === 'read') return;\r\n  if (data.paste(what, msg => xtoast('Tip', msg))) {\r\n    sheetReset.call(this);\r\n  } else if (evt) {\r\n    const cdata = evt.clipboardData.getData('text/plain');\r\n    this.data.pasteFromText(cdata);\r\n    sheetReset.call(this);\r\n  }\r\n}\r\n\r\nfunction hideRowsOrCols() {\r\n  this.data.hideRowsOrCols();\r\n  sheetReset.call(this);\r\n}\r\n\r\nfunction unhideRowsOrCols(type, index) {\r\n  this.data.unhideRowsOrCols(type, index);\r\n  sheetReset.call(this);\r\n}\r\n\r\nfunction autofilter() {\r\n  const { data } = this;\r\n  data.autofilter();\r\n  sheetReset.call(this);\r\n}\r\n\r\nfunction toolbarChangePaintformatPaste() {\r\n  const { toolbar } = this;\r\n  if (toolbar.paintformatActive()) {\r\n    paste.call(this, 'format');\r\n    clearClipboard.call(this);\r\n    toolbar.paintformatToggle();\r\n  }\r\n}\r\n\r\nfunction overlayerMousedown(evt) {\r\n  // console.log(':::::overlayer.mousedown:', evt.detail, evt.button, evt.buttons, evt.shiftKey);\r\n  // console.log('evt.target.className:', evt.target.className);\r\n  const {\r\n    selector, data, table, sortFilter,\r\n  } = this;\r\n  const { offsetX, offsetY } = evt;\r\n  const isAutofillEl = evt.target.className === `${cssPrefix}-selector-corner`;\r\n  const cellRect = data.getCellRectByXY(offsetX, offsetY);\r\n  const {\r\n    left, top, width, height,\r\n  } = cellRect;\r\n  let { ri, ci } = cellRect;\r\n  // sort or filter\r\n  const { autoFilter } = data;\r\n  if (autoFilter.includes(ri, ci)) {\r\n    if (left + width - 20 < offsetX && top + height - 20 < offsetY) {\r\n      const items = autoFilter.items(ci, (r, c) => data.rows.getCell(r, c));\r\n      sortFilter.hide();\r\n      sortFilter.set(ci, items, autoFilter.getFilter(ci), autoFilter.getSort(ci));\r\n      sortFilter.setOffset({ left, top: top + height + 2 });\r\n      return;\r\n    }\r\n  }\r\n\r\n  // console.log('ri:', ri, ', ci:', ci);\r\n  if (!evt.shiftKey) {\r\n    // console.log('selectorSetStart:::');\r\n    if (isAutofillEl) {\r\n      selector.showAutofill(ri, ci);\r\n    } else {\r\n      selectorSet.call(this, false, ri, ci);\r\n    }\r\n\r\n    // mouse move up\r\n    mouseMoveUp(window, (e) => {\r\n      // console.log('mouseMoveUp::::');\r\n      ({ ri, ci } = data.getCellRectByXY(e.offsetX, e.offsetY));\r\n      if (isAutofillEl) {\r\n        selector.showAutofill(ri, ci);\r\n      } else if (e.buttons === 1 && !e.shiftKey) {\r\n        selectorSet.call(this, true, ri, ci, true, true);\r\n      }\r\n    }, () => {\r\n      if (isAutofillEl && selector.arange && data.settings.mode !== 'read') {\r\n        if (data.autofill(selector.arange, 'all', msg => xtoast('Tip', msg))) {\r\n          table.render();\r\n        }\r\n      }\r\n      selector.hideAutofill();\r\n      toolbarChangePaintformatPaste.call(this);\r\n    });\r\n  }\r\n\r\n  if (!isAutofillEl && evt.buttons === 1) {\r\n    if (evt.shiftKey) {\r\n      // console.log('shiftKey::::');\r\n      selectorSet.call(this, true, ri, ci);\r\n    }\r\n  }\r\n}\r\n\r\nfunction editorSetOffset() {\r\n  const { editor, data } = this;\r\n  const sOffset = data.getSelectedRect();\r\n  const tOffset = this.getTableOffset();\r\n  let sPosition = 'top';\r\n  // console.log('sOffset:', sOffset, ':', tOffset);\r\n  if (sOffset.top > tOffset.height / 2) {\r\n    sPosition = 'bottom';\r\n  }\r\n  editor.setOffset(sOffset, sPosition);\r\n}\r\n\r\nfunction editorSet() {\r\n  const { editor, data } = this;\r\n  if (data.settings.mode === 'read') return;\r\n  editorSetOffset.call(this);\r\n  editor.setCell(data.getSelectedCell(), data.getSelectedValidator());\r\n  clearClipboard.call(this);\r\n}\r\n\r\nfunction verticalScrollbarMove(distance) {\r\n  const { data, table, selector } = this;\r\n  data.scrolly(distance, () => {\r\n    selector.resetBRLAreaOffset();\r\n    editorSetOffset.call(this);\r\n    table.render();\r\n  });\r\n}\r\n\r\nfunction horizontalScrollbarMove(distance) {\r\n  const { data, table, selector } = this;\r\n  data.scrollx(distance, () => {\r\n    selector.resetBRTAreaOffset();\r\n    editorSetOffset.call(this);\r\n    table.render();\r\n  });\r\n}\r\n\r\nfunction rowResizerFinished(cRect, distance) {\r\n  const { ri } = cRect;\r\n  const { table, selector, data } = this;\r\n  data.rows.setHeight(ri, distance);\r\n  table.render();\r\n  selector.resetAreaOffset();\r\n  verticalScrollbarSet.call(this);\r\n  editorSetOffset.call(this);\r\n}\r\n\r\nfunction colResizerFinished(cRect, distance) {\r\n  const { ci } = cRect;\r\n  const { table, selector, data } = this;\r\n  data.cols.setWidth(ci, distance);\r\n  // console.log('data:', data);\r\n  table.render();\r\n  selector.resetAreaOffset();\r\n  horizontalScrollbarSet.call(this);\r\n  editorSetOffset.call(this);\r\n}\r\n\r\nfunction dataSetCellText(text, state = 'finished') {\r\n  const { data, table } = this;\r\n  // const [ri, ci] = selector.indexes;\r\n  if (data.settings.mode === 'read') return;\r\n  data.setSelectedCellText(text, state);\r\n  const { ri, ci } = data.selector;\r\n  if (state === 'finished') {\r\n    table.render();\r\n  } else {\r\n    this.trigger('cell-edited', text, ri, ci);\r\n  }\r\n}\r\n\r\nfunction insertDeleteRowColumn(type) {\r\n  const { data } = this;\r\n  if (data.settings.mode === 'read') return;\r\n  if (type === 'insert-row') {\r\n    data.insert('row');\r\n  } else if (type === 'delete-row') {\r\n    data.delete('row');\r\n  } else if (type === 'insert-column') {\r\n    data.insert('column');\r\n  } else if (type === 'delete-column') {\r\n    data.delete('column');\r\n  } else if (type === 'delete-cell') {\r\n    data.deleteCell();\r\n  } else if (type === 'delete-cell-format') {\r\n    data.deleteCell('format');\r\n  } else if (type === 'delete-cell-text') {\r\n    data.deleteCell('text');\r\n  } else if (type === 'cell-printable') {\r\n    data.setSelectedCellAttr('printable', true);\r\n  } else if (type === 'cell-non-printable') {\r\n    data.setSelectedCellAttr('printable', false);\r\n  } else if (type === 'cell-editable') {\r\n    data.setSelectedCellAttr('editable', true);\r\n  } else if (type === 'cell-non-editable') {\r\n    data.setSelectedCellAttr('editable', false);\r\n  }\r\n  clearClipboard.call(this);\r\n  sheetReset.call(this);\r\n}\r\n\r\nfunction toolbarChange(type, value) {\r\n  const { data } = this;\r\n  if (type === 'undo') {\r\n    this.undo();\r\n  } else if (type === 'redo') {\r\n    this.redo();\r\n  } else if (type === 'print') {\r\n    this.print.preview();\r\n  } else if (type === 'paintformat') {\r\n    if (value === true) copy.call(this);\r\n    else clearClipboard.call(this);\r\n  } else if (type === 'clearformat') {\r\n    insertDeleteRowColumn.call(this, 'delete-cell-format');\r\n  } else if (type === 'link') {\r\n    // link\r\n  } else if (type === 'chart') {\r\n    // chart\r\n  } else if (type === 'autofilter') {\r\n    // filter\r\n    autofilter.call(this);\r\n  } else if (type === 'freeze') {\r\n    if (value) {\r\n      const { ri, ci } = data.selector;\r\n      this.freeze(ri, ci);\r\n    } else {\r\n      this.freeze(0, 0);\r\n    }\r\n  } else if (type == \"jumpToCell\") {\r\n    this.modalJumpTo.showTo();\r\n  } else {\r\n    data.setSelectedCellAttr(type, value);\r\n    if (type === 'formula' && !data.selector.multiple()) {\r\n      editorSet.call(this);\r\n    }\r\n    sheetReset.call(this);\r\n  }\r\n}\r\n\r\nfunction sortFilterChange(ci, order, operator, value) {\r\n  // console.log('sort:', sortDesc, operator, value);\r\n  this.data.setAutoFilter(ci, order, operator, value);\r\n  sheetReset.call(this);\r\n}\r\n\r\nfunction sheetInitEvents() {\r\n  const {\r\n    selector,\r\n    overlayerEl,\r\n    rowResizer,\r\n    colResizer,\r\n    verticalScrollbar,\r\n    horizontalScrollbar,\r\n    editor,\r\n    contextMenu,\r\n    toolbar,\r\n    modalValidation,\r\n    sortFilter,\r\n    modalJumpTo\r\n  } = this;\r\n  // overlayer\r\n  overlayerEl\r\n    .on('mousemove', (evt) => {\r\n      overlayerMousemove.call(this, evt);\r\n    })\r\n    .on('mousedown', (evt) => {\r\n      editor.clear();\r\n      contextMenu.hide();\r\n      // the left mouse button: mousedown → mouseup → click\r\n      // the right mouse button: mousedown → contenxtmenu → mouseup\r\n      if (evt.buttons === 2) {\r\n        if (this.data.xyInSelectedRect(evt.offsetX, evt.offsetY)) {\r\n          contextMenu.setPosition(evt.offsetX, evt.offsetY);\r\n        } else {\r\n          overlayerMousedown.call(this, evt);\r\n          contextMenu.setPosition(evt.offsetX, evt.offsetY);\r\n        }\r\n        evt.stopPropagation();\r\n      } else if (evt.detail === 2) {\r\n        editorSet.call(this);\r\n      } else {\r\n        overlayerMousedown.call(this, evt);\r\n      }\r\n    })\r\n    .on('mousewheel.stop', (evt) => {\r\n      overlayerMousescroll.call(this, evt);\r\n    })\r\n    .on('mouseout', (evt) => {\r\n      const { offsetX, offsetY } = evt;\r\n      if (offsetY <= 0) colResizer.hide();\r\n      if (offsetX <= 0) rowResizer.hide();\r\n    });\r\n\r\n  selector.inputChange = (v) => {\r\n    dataSetCellText.call(this, v, 'input');\r\n    editorSet.call(this);\r\n  };\r\n\r\n  // slide on mobile\r\n  bindTouch(overlayerEl.el, {\r\n    move: (direction, d) => {\r\n      overlayerTouch.call(this, direction, d);\r\n    },\r\n  });\r\n\r\n  // toolbar change\r\n  toolbar.change = (type, value) => toolbarChange.call(this, type, value);\r\n\r\n  // sort filter ok\r\n  sortFilter.ok = (ci, order, o, v) => sortFilterChange.call(this, ci, order, o, v);\r\n\r\n  // resizer finished callback\r\n  rowResizer.finishedFn = (cRect, distance) => {\r\n    rowResizerFinished.call(this, cRect, distance);\r\n  };\r\n  colResizer.finishedFn = (cRect, distance) => {\r\n    colResizerFinished.call(this, cRect, distance);\r\n  };\r\n  // resizer unhide callback\r\n  rowResizer.unhideFn = (index) => {\r\n    unhideRowsOrCols.call(this, 'row', index);\r\n  };\r\n  colResizer.unhideFn = (index) => {\r\n    unhideRowsOrCols.call(this, 'col', index);\r\n  };\r\n  // scrollbar move callback\r\n  verticalScrollbar.moveFn = (distance, evt) => {\r\n    verticalScrollbarMove.call(this, distance, evt);\r\n  };\r\n  horizontalScrollbar.moveFn = (distance, evt) => {\r\n    horizontalScrollbarMove.call(this, distance, evt);\r\n  };\r\n  // editor\r\n  editor.change = (state, itext) => {\r\n    dataSetCellText.call(this, itext, state);\r\n  };\r\n  // modal validation\r\n  modalValidation.change = (action, ...args) => {\r\n    if (action === 'save') {\r\n      this.data.addValidation(...args);\r\n    } else {\r\n      this.data.removeValidation();\r\n    }\r\n  };\r\n  //JumpToRow Modal\r\n  modalJumpTo.change = (row) => {\r\n    if(isNaN(row) || row == undefined || row == \"\") {\r\n      row = 1;\r\n    }\r\n    selectorSet.call(this, false, Number(row) - 1, 0);\r\n    this.overlayerCEl.el.scrollTop = 0;\r\n    scrollbarMove.call(this);\r\n  };\r\n  // contextmenu\r\n  contextMenu.itemClick = (type) => {\r\n    // console.log('type:', type);\r\n    if (type === 'validation') {\r\n      modalValidation.setValue(this.data.getSelectedValidation());\r\n    } else if (type === 'copy') {\r\n      copy.call(this);\r\n    } else if (type === 'cut') {\r\n      cut.call(this);\r\n    } else if (type === 'paste') {\r\n      paste.call(this, 'all');\r\n    } else if (type === 'paste-value') {\r\n      paste.call(this, 'text');\r\n    } else if (type === 'paste-format') {\r\n      paste.call(this, 'format');\r\n    } else if (type === 'hide') {\r\n      hideRowsOrCols.call(this);\r\n    } else {\r\n      insertDeleteRowColumn.call(this, type);\r\n    }\r\n  };\r\n\r\n  bind(window, 'resize', () => {\r\n    this.reload();\r\n  });\r\n\r\n  bind(window, 'click', (evt) => {\r\n    this.focusing = overlayerEl.contains(evt.target);\r\n  });\r\n\r\n  bind(window, 'paste', (evt) => {\r\n    if(!this.focusing) return;\r\n    paste.call(this, 'all', evt);\r\n    evt.preventDefault();\r\n  });\r\n\r\n  // for selector\r\n  bind(window, 'keydown', (evt) => {\r\n    if (!this.focusing) return;\r\n    const keyCode = evt.keyCode || evt.which;\r\n    const {\r\n      key, ctrlKey, shiftKey, metaKey,\r\n    } = evt;\r\n    // console.log('keydown.evt: ', keyCode);\r\n    if (ctrlKey || metaKey) {\r\n      // const { sIndexes, eIndexes } = selector;\r\n      // let what = 'all';\r\n      // if (shiftKey) what = 'text';\r\n      // if (altKey) what = 'format';\r\n      switch (keyCode) {\r\n        case 90:\r\n          // undo: ctrl + z\r\n          this.undo();\r\n          evt.preventDefault();\r\n          break;\r\n        case 89:\r\n          // redo: ctrl + y\r\n          this.redo();\r\n          evt.preventDefault();\r\n          break;\r\n        case 67:\r\n          // ctrl + c\r\n          copy.call(this);\r\n          evt.preventDefault();\r\n          break;\r\n        case 88:\r\n          // ctrl + x\r\n          cut.call(this);\r\n          evt.preventDefault();\r\n          break;\r\n        case 85:\r\n          // ctrl + u\r\n          toolbar.trigger('underline');\r\n          evt.preventDefault();\r\n          break;\r\n        case 86:\r\n          // ctrl + v\r\n          // => paste\r\n          // evt.preventDefault();\r\n          break;\r\n        case 37:\r\n          // ctrl + left\r\n          selectorMove.call(this, shiftKey, 'row-first');\r\n          evt.preventDefault();\r\n          break;\r\n        case 38:\r\n          // ctrl + up\r\n          selectorMove.call(this, shiftKey, 'col-first');\r\n          evt.preventDefault();\r\n          break;\r\n        case 39:\r\n          // ctrl + right\r\n          selectorMove.call(this, shiftKey, 'row-last');\r\n          evt.preventDefault();\r\n          break;\r\n        case 40:\r\n          // ctrl + down\r\n          selectorMove.call(this, shiftKey, 'col-last');\r\n          evt.preventDefault();\r\n          break;\r\n        case 32:\r\n          // ctrl + space, all cells in col\r\n          selectorSet.call(this, false, -1, this.data.selector.ci, false);\r\n          evt.preventDefault();\r\n          break;\r\n        case 66:\r\n          // ctrl + B\r\n          toolbar.trigger('bold');\r\n          break;\r\n        case 73:\r\n          // ctrl + I\r\n          toolbar.trigger('italic');\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n    } else {\r\n      // console.log('evt.keyCode:', evt.keyCode);\r\n      switch (keyCode) {\r\n        case 32:\r\n          if (shiftKey) {\r\n            // shift + space, all cells in row\r\n            selectorSet.call(this, false, this.data.selector.ri, -1, false);\r\n          }\r\n          break;\r\n        case 27: // esc\r\n          contextMenu.hide();\r\n          clearClipboard.call(this);\r\n          break;\r\n        case 37: // left\r\n          selectorMove.call(this, shiftKey, 'left');\r\n          evt.preventDefault();\r\n          break;\r\n        case 38: // up\r\n          selectorMove.call(this, shiftKey, 'up');\r\n          evt.preventDefault();\r\n          break;\r\n        case 39: // right\r\n          selectorMove.call(this, shiftKey, 'right');\r\n          evt.preventDefault();\r\n          break;\r\n        case 40: // down\r\n          selectorMove.call(this, shiftKey, 'down');\r\n          evt.preventDefault();\r\n          break;\r\n        case 9: // tab\r\n          editor.clear();\r\n          // shift + tab => move left\r\n          // tab => move right\r\n          selectorMove.call(this, false, shiftKey ? 'left' : 'right');\r\n          evt.preventDefault();\r\n          break;\r\n        case 13: // enter\r\n          editor.clear();\r\n          // shift + enter => move up\r\n          // enter => move down\r\n          selectorMove.call(this, false, shiftKey ? 'up' : 'down');\r\n          evt.preventDefault();\r\n          break;\r\n        case 8: // backspace\r\n          insertDeleteRowColumn.call(this, 'delete-cell-text');\r\n          evt.preventDefault();\r\n          break;\r\n        default:\r\n          break;\r\n      }\r\n\r\n      if (key === 'Delete') {\r\n        insertDeleteRowColumn.call(this, 'delete-cell-text');\r\n        evt.preventDefault();\r\n      } else if ((keyCode >= 65 && keyCode <= 90)\r\n        || (keyCode >= 48 && keyCode <= 57)\r\n        || (keyCode >= 96 && keyCode <= 105)\r\n        || evt.key === '='\r\n      ) {\r\n        dataSetCellText.call(this, evt.key, 'input');\r\n        editorSet.call(this);\r\n      } else if (keyCode === 113) {\r\n        // F2\r\n        editorSet.call(this);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\nexport default class Sheet {\r\n  constructor(targetEl, data) {\r\n    this.eventMap = createEventEmitter();\r\n    const { view, showToolbar, showContextmenu } = data.settings;\r\n    this.el = h('div', `${cssPrefix}-sheet`);\r\n    this.toolbar = new Toolbar(data, view.width, !showToolbar);\r\n    this.print = new Print(data);\r\n    targetEl.children(this.toolbar.el, this.el, this.print.el);\r\n    this.data = data;\r\n    // table\r\n    this.tableEl = h('canvas', `${cssPrefix}-table`);\r\n    // resizer\r\n    this.rowResizer = new Resizer(false, data.rows.height);\r\n    this.colResizer = new Resizer(true, data.cols.minWidth);\r\n    // scrollbar\r\n    this.verticalScrollbar = new Scrollbar(true);\r\n    this.horizontalScrollbar = new Scrollbar(false);\r\n    // editor\r\n    this.editor = new Editor(\r\n      formulas,\r\n      () => this.getTableOffset(),\r\n      data.rows.height,\r\n    );\r\n    //modal JumpTo\r\n    this.modalJumpTo = new ModalJumpTo();\r\n    // data validation\r\n    this.modalValidation = new ModalValidation();\r\n    // contextMenu\r\n    this.contextMenu = new ContextMenu(() => this.getRect(), !showContextmenu);\r\n    // selector\r\n    this.selector = new Selector(data);\r\n    this.overlayerCEl = h('div', `${cssPrefix}-overlayer-content`)\r\n      .children(\r\n        this.editor.el,\r\n        this.selector.el,\r\n      );\r\n    this.overlayerEl = h('div', `${cssPrefix}-overlayer`)\r\n      .child(this.overlayerCEl);\r\n    // sortFilter\r\n    this.sortFilter = new SortFilter();\r\n    // root element\r\n    this.el.children(\r\n      this.tableEl,\r\n      this.overlayerEl.el,\r\n      this.rowResizer.el,\r\n      this.colResizer.el,\r\n      this.verticalScrollbar.el,\r\n      this.horizontalScrollbar.el,\r\n      this.contextMenu.el,\r\n      this.modalValidation.el,\r\n      this.sortFilter.el,\r\n      this.modalJumpTo.el\r\n    );\r\n    // table\r\n    this.table = new Table(this.tableEl.el, data);\r\n    sheetInitEvents.call(this);\r\n    sheetReset.call(this);\r\n    // init selector [0, 0]\r\n    selectorSet.call(this, false, 0, 0);\r\n  }\r\n\r\n  on(eventName, func) {\r\n    this.eventMap.on(eventName, func);\r\n    return this;\r\n  }\r\n\r\n  jump(row) {\r\n    selectorSet.call(this, false, Number(row) - 1, 0);\r\n    this.overlayerCEl.el.scrollTop = 0;\r\n    scrollbarMove.call(this);\r\n  }\r\n\r\n  trigger(eventName, ...args) {\r\n    const { eventMap } = this;\r\n    eventMap.fire(eventName, args)\r\n  }\r\n\r\n  resetData(data) {\r\n    // before\r\n    this.editor.clear();\r\n    // after\r\n    this.data = data;\r\n    verticalScrollbarSet.call(this);\r\n    horizontalScrollbarSet.call(this);\r\n    this.toolbar.resetData(data);\r\n    this.print.resetData(data);\r\n    this.selector.resetData(data);\r\n    this.table.resetData(data);\r\n  }\r\n\r\n  loadData(data) {\r\n    this.data.setData(data);\r\n    sheetReset.call(this);\r\n    return this;\r\n  }\r\n\r\n  // freeze rows or cols\r\n  freeze(ri, ci) {\r\n    console.log(\"freeze\", ri);\r\n    const { data } = this;\r\n    data.setFreeze(ri, ci);\r\n    sheetReset.call(this);\r\n    return this;\r\n  }\r\n\r\n  undo() {\r\n    this.data.undo();\r\n    sheetReset.call(this);\r\n  }\r\n\r\n  redo() {\r\n    this.data.redo();\r\n    sheetReset.call(this);\r\n  }\r\n\r\n  reload() {\r\n    sheetReset.call(this);\r\n    return this;\r\n  }\r\n\r\n  getRect() {\r\n    const { data } = this;\r\n    return { width: data.viewWidth(), height: data.viewHeight() };\r\n  }\r\n\r\n  getTableOffset() {\r\n    const { rows, cols } = this.data;\r\n    const { width, height } = this.getRect();\r\n    return {\r\n      width: width - cols.indexWidth,\r\n      height: height - rows.height,\r\n      left: cols.indexWidth,\r\n      top: rows.height,\r\n    };\r\n  }\r\n}\r\n","import { h } from './element';\r\nimport Button from './button';\r\nimport { bindClickoutside, unbindClickoutside } from './event';\r\nimport { cssPrefix } from '../config';\r\nimport { t } from '../locale/locale';\r\n\r\nfunction buildMenu(clsName) {\r\n  return h('div', `${cssPrefix}-item ${clsName}`);\r\n}\r\n\r\nfunction buildSortItem(it) {\r\n  return buildMenu('state').child(t(`sort.${it}`))\r\n    .on('click.stop', () => this.itemClick(it));\r\n}\r\n\r\nfunction buildFilterBody(items) {\r\n  const { filterbEl, filterValues } = this;\r\n  filterbEl.html('');\r\n  const itemKeys = Object.keys(items);\r\n  itemKeys.forEach((it, index) => {\r\n    const cnt = items[it];\r\n    const active = filterValues.includes(it) ? 'checked' : '';\r\n    filterbEl.child(h('div', `${cssPrefix}-item state ${active}`)\r\n      .on('click.stop', () => this.filterClick(index, it))\r\n      .children(it === '' ? t('filter.empty') : it, h('div', 'label').html(`(${cnt})`)));\r\n  });\r\n}\r\n\r\nfunction resetFilterHeader() {\r\n  const { filterhEl, filterValues, values } = this;\r\n  filterhEl.html(`${filterValues.length} / ${values.length}`);\r\n  filterhEl.checked(filterValues.length === values.length);\r\n}\r\n\r\nexport default class SortFilter {\r\n  constructor() {\r\n    this.filterbEl = h('div', `${cssPrefix}-body`);\r\n    this.filterhEl = h('div', `${cssPrefix}-header state`).on('click.stop', () => this.filterClick(0, 'all'));\r\n    this.el = h('div', `${cssPrefix}-sort-filter`).children(\r\n      this.sortAscEl = buildSortItem.call(this, 'asc'),\r\n      this.sortDescEl = buildSortItem.call(this, 'desc'),\r\n      buildMenu('divider'),\r\n      h('div', `${cssPrefix}-filter`).children(\r\n        this.filterhEl,\r\n        this.filterbEl,\r\n      ),\r\n      h('div', `${cssPrefix}-buttons`).children(\r\n        new Button('cancel').on('click', () => this.btnClick('cancel')),\r\n        new Button('ok', 'primary').on('click', () => this.btnClick('ok')),\r\n      ),\r\n    ).hide();\r\n    // this.setFilters(['test1', 'test2', 'text3']);\r\n    this.ci = null;\r\n    this.sortDesc = null;\r\n    this.values = null;\r\n    this.filterValues = [];\r\n  }\r\n\r\n  btnClick(it) {\r\n    if (it === 'ok') {\r\n      const { ci, sort, filterValues } = this;\r\n      if (this.ok) {\r\n        this.ok(ci, sort, 'in', filterValues);\r\n      }\r\n    }\r\n    this.hide();\r\n  }\r\n\r\n  itemClick(it) {\r\n    // console.log('it:', it);\r\n    this.sort = it;\r\n    const { sortAscEl, sortDescEl } = this;\r\n    sortAscEl.checked(it === 'asc');\r\n    sortDescEl.checked(it === 'desc');\r\n  }\r\n\r\n  filterClick(index, it) {\r\n    // console.log('index:', index, it);\r\n    const { filterbEl, filterValues, values } = this;\r\n    const children = filterbEl.children();\r\n    if (it === 'all') {\r\n      if (children.length === filterValues.length) {\r\n        this.filterValues = [];\r\n        children.forEach(i => h(i).checked(false));\r\n      } else {\r\n        this.filterValues = Array.from(values);\r\n        children.forEach(i => h(i).checked(true));\r\n      }\r\n    } else {\r\n      const checked = h(children[index]).toggle('checked');\r\n      if (checked) {\r\n        filterValues.push(it);\r\n      } else {\r\n        filterValues.splice(filterValues.findIndex(i => i === it), 1);\r\n      }\r\n    }\r\n    resetFilterHeader.call(this);\r\n  }\r\n\r\n  // v: autoFilter\r\n  // items: {value: cnt}\r\n  // sort { ci, order }\r\n  set(ci, items, filter, sort) {\r\n    this.ci = ci;\r\n    const { sortAscEl, sortDescEl } = this;\r\n    if (sort !== null) {\r\n      this.sort = sort.order;\r\n      sortAscEl.checked(sort.asc());\r\n      sortDescEl.checked(sort.desc());\r\n    } else {\r\n      this.sortDesc = null;\r\n      sortAscEl.checked(false);\r\n      sortDescEl.checked(false);\r\n    }\r\n    // this.setFilters(items, filter);\r\n    this.values = Object.keys(items);\r\n    this.filterValues = filter ? Array.from(filter.value) : Object.keys(items);\r\n    buildFilterBody.call(this, items, filter);\r\n    resetFilterHeader.call(this);\r\n  }\r\n\r\n  setOffset(v) {\r\n    this.el.offset(v).show();\r\n    let tindex = 1;\r\n    bindClickoutside(this.el, () => {\r\n      if (tindex <= 0) {\r\n        this.hide();\r\n      }\r\n      tindex -= 1;\r\n    });\r\n  }\r\n\r\n  show() {\r\n    this.el.show();\r\n  }\r\n\r\n  hide() {\r\n    this.el.hide();\r\n    unbindClickoutside(this.el);\r\n  }\r\n}\r\n","import { h } from './element';\r\nimport { bindClickoutside, unbindClickoutside } from './event';\r\nimport { cssPrefix } from '../config';\r\nimport Scrollbar from './scrollbar';\r\n\r\nfunction inputMovePrev(evt) {\r\n  evt.preventDefault();\r\n  evt.stopPropagation();\r\n  const { filterItems } = this;\r\n  if (filterItems.length <= 0) return;\r\n  if (this.itemIndex >= 0) filterItems[this.itemIndex].toggle();\r\n  this.itemIndex -= 1;\r\n  if (this.itemIndex < 0) {\r\n    this.itemIndex = filterItems.length - 1;\r\n  }\r\n  filterItems[this.itemIndex].toggle();\r\n}\r\n\r\nfunction inputMoveNext(evt) {\r\n  evt.stopPropagation();\r\n  const { filterItems } = this;\r\n  if (filterItems.length <= 0) return;\r\n  if (this.itemIndex >= 0) filterItems[this.itemIndex].toggle();\r\n  this.itemIndex += 1;\r\n  if (this.itemIndex > filterItems.length - 1) {\r\n    this.itemIndex = 0;\r\n  }\r\n  filterItems[this.itemIndex].toggle();\r\n}\r\n\r\nfunction inputEnter(evt) {\r\n  evt.preventDefault();\r\n  const { filterItems } = this;\r\n  if (filterItems.length <= 0) return;\r\n  evt.stopPropagation();\r\n  if (this.itemIndex < 0) this.itemIndex = 0;\r\n  filterItems[this.itemIndex].el.click();\r\n  this.hide();\r\n}\r\n\r\nfunction inputKeydownHandler(evt) {\r\n  const { keyCode } = evt;\r\n  if (evt.ctrlKey) {\r\n    evt.stopPropagation();\r\n  }\r\n  switch (keyCode) {\r\n    case 37: // left\r\n      evt.stopPropagation();\r\n      break;\r\n    case 38: // up\r\n      inputMovePrev.call(this, evt);\r\n      break;\r\n    case 39: // right\r\n      evt.stopPropagation();\r\n      break;\r\n    case 40: // down\r\n      inputMoveNext.call(this, evt);\r\n      break;\r\n    case 13: // enter\r\n      inputEnter.call(this, evt);\r\n      break;\r\n    case 9:\r\n      inputEnter.call(this, evt);\r\n      break;\r\n    default:\r\n      evt.stopPropagation();\r\n      break;\r\n  }\r\n}\r\n\r\nexport default class Suggest {\r\n  constructor(items, itemClick, width = '200px') {\r\n    this.scrollbar = new Scrollbar(true);\r\n    this.filterItems = [];\r\n    this.items = items;\r\n    this.el = h('div', `${cssPrefix}-suggest`).css('width', width).hide();\r\n    this.itemClick = itemClick;\r\n    this.itemIndex = -1;\r\n  }\r\n\r\n  setOffset(v) {\r\n    this.el.cssRemoveKeys('top', 'bottom')\r\n      .offset(v);\r\n  }\r\n\r\n  hide() {\r\n    const { el } = this;\r\n    this.filterItems = [];\r\n    this.itemIndex = -1;\r\n    el.hide();\r\n    unbindClickoutside(this.el.parent());\r\n  }\r\n\r\n  setItems(items) {\r\n    this.items = items;\r\n    // this.search('');\r\n  }\r\n\r\n  search(word) {\r\n    let { items } = this;\r\n    if (!/^\\s*$/.test(word)) {\r\n      items = items.filter(it => (it.key || it).startsWith(word.toUpperCase()));\r\n    }\r\n    items = items.map((it) => {\r\n      let { title } = it;\r\n      if (title) {\r\n        if (typeof title === 'function') {\r\n          title = title();\r\n        }\r\n      } else {\r\n        title = it;\r\n      }\r\n      const item = h('div', `${cssPrefix}-item`)\r\n        .child(title)\r\n        .on('click.stop', () => {\r\n          this.itemClick(it);\r\n          this.hide();\r\n        });\r\n      if (it.label) {\r\n        item.child(h('div', 'label').html(it.label));\r\n      }\r\n      return item;\r\n    });\r\n    this.filterItems = items;\r\n    if (items.length <= 0) {\r\n      return;\r\n    }\r\n    const { el } = this;\r\n    // items[0].toggle();\r\n    el.html('').children(...items).show();\r\n    bindClickoutside(el.parent(), () => { this.hide(); });\r\n  }\r\n\r\n  bindInputEvents(input) {\r\n    input.on('keydown', evt => inputKeydownHandler.call(this, evt));\r\n  }\r\n}\r\n","import { stringAt } from '../core/alphabet';\r\nimport { getFontSizePxByPt } from '../core/font';\r\nimport _cell from '../core/cell';\r\nimport { formulam } from '../core/formula';\r\nimport { formatm } from '../core/format';\r\n\r\nimport {\r\n  Draw, DrawBox, thinLineWidth, npx,\r\n} from '../canvas/draw';\r\n// gobal var\r\nconst cellPaddingWidth = 5;\r\nconst tableFixedHeaderCleanStyle = { fillStyle: '#f4f5f8' };\r\nconst tableGridStyle = {\r\n  fillStyle: '#fff',\r\n  lineWidth: thinLineWidth,\r\n  strokeStyle: '#e6e6e6',\r\n};\r\nfunction tableFixedHeaderStyle() {\r\n  return {\r\n    textAlign: 'center',\r\n    textBaseline: 'middle',\r\n    font: `500 ${npx(12)}px Source Sans Pro`,\r\n    fillStyle: '#585757',\r\n    lineWidth: thinLineWidth(),\r\n    strokeStyle: '#e6e6e6',\r\n  };\r\n}\r\n\r\nfunction getDrawBox(data, rindex, cindex, yoffset = 0) {\r\n  const {\r\n    left, top, width, height,\r\n  } = data.cellRect(rindex, cindex);\r\n  return new DrawBox(left, top + yoffset, width, height, cellPaddingWidth);\r\n}\r\n/*\r\nfunction renderCellBorders(bboxes, translateFunc) {\r\n  const { draw } = this;\r\n  if (bboxes) {\r\n    const rset = new Set();\r\n    // console.log('bboxes:', bboxes);\r\n    bboxes.forEach(({ ri, ci, box }) => {\r\n      if (!rset.has(ri)) {\r\n        rset.add(ri);\r\n        translateFunc(ri);\r\n      }\r\n      draw.strokeBorders(box);\r\n    });\r\n  }\r\n}\r\n*/\r\n\r\nexport function renderCell(draw, data, rindex, cindex, yoffset = 0) {\r\n  const { sortedRowMap, rows, cols } = data;\r\n  if (rows.isHide(rindex) || cols.isHide(cindex)) return;\r\n  let nrindex = rindex;\r\n  if (sortedRowMap.has(rindex)) {\r\n    nrindex = sortedRowMap.get(rindex);\r\n  }\r\n\r\n  const cell = data.getCell(nrindex, cindex);\r\n  if (cell === null) return;\r\n  let frozen = false;\r\n  if ('editable' in cell && cell.editable === false) {\r\n    frozen = true;\r\n  }\r\n\r\n  const style = data.getCellStyleOrDefault(nrindex, cindex);\r\n  const dbox = getDrawBox(data, rindex, cindex, yoffset);\r\n  dbox.bgcolor = style.bgcolor;\r\n  if (style.border !== undefined) {\r\n    dbox.setBorders(style.border);\r\n    // bboxes.push({ ri: rindex, ci: cindex, box: dbox });\r\n    draw.strokeBorders(dbox);\r\n  }\r\n  draw.rect(dbox, () => {\r\n    // render text\r\n    let cellText = \"\";\r\n    if(!data.settings.evalPaused) {\r\n      cellText = _cell.render(cell.text || '', formulam, (y, x) => (data.getCellTextOrDefault(x, y)));\r\n    } else {\r\n      cellText = cell.text || '';\r\n    }\r\n    if (style.format) {\r\n      // console.log(data.formatm, '>>', cell.format);\r\n      cellText = formatm[style.format].render(cellText);\r\n    }\r\n    const font = Object.assign({}, style.font);\r\n    font.size = getFontSizePxByPt(font.size);\r\n    // console.log('style:', style);\r\n    draw.text(cellText, dbox, {\r\n      align: style.align,\r\n      valign: style.valign,\r\n      font,\r\n      color: style.color,\r\n      strike: style.strike,\r\n      underline: style.underline,\r\n    }, style.textwrap);\r\n    // error\r\n    const error = data.validations.getError(rindex, cindex);\r\n    if (error) {\r\n      // console.log('error:', rindex, cindex, error);\r\n      draw.error(dbox);\r\n    }\r\n    if (frozen) {\r\n      draw.frozen(dbox);\r\n    }\r\n    if (cell.changed) {\r\n      draw.changed(dbox);\r\n\r\n    }\r\n  });\r\n}\r\n\r\nfunction renderAutofilter(viewRange) {\r\n  const { data, draw } = this;\r\n  if (viewRange) {\r\n    const { autoFilter } = data;\r\n    if (!autoFilter.active()) return;\r\n    const afRange = autoFilter.hrange();\r\n    if (viewRange.intersects(afRange)) {\r\n      afRange.each((ri, ci) => {\r\n        const dbox = getDrawBox(data, ri, ci);\r\n        draw.dropdown(dbox);\r\n      });\r\n    }\r\n  }\r\n}\r\n\r\nfunction renderContent(viewRange, fw, fh, tx, ty) {\r\n  const { draw, data } = this;\r\n  draw.save();\r\n  draw.translate(fw, fh)\r\n    .translate(tx, ty);\r\n\r\n  const { exceptRowSet } = data;\r\n  // const exceptRows = Array.from(exceptRowSet);\r\n  const filteredTranslateFunc = (ri) => {\r\n    const ret = exceptRowSet.has(ri);\r\n    if (ret) {\r\n      const height = data.rows.getHeight(ri);\r\n      draw.translate(0, -height);\r\n    }\r\n    return !ret;\r\n  };\r\n\r\n  const exceptRowTotalHeight = data.exceptRowTotalHeight(viewRange.sri, viewRange.eri);\r\n  // 1 render cell\r\n  draw.save();\r\n  draw.translate(0, -exceptRowTotalHeight);\r\n  viewRange.each((ri, ci) => {\r\n    renderCell(draw, data, ri, ci);\r\n  }, ri => filteredTranslateFunc(ri));\r\n  draw.restore();\r\n\r\n\r\n  // 2 render mergeCell\r\n  const rset = new Set();\r\n  draw.save();\r\n  draw.translate(0, -exceptRowTotalHeight);\r\n  data.eachMergesInView(viewRange, ({ sri, sci, eri }) => {\r\n    if (!exceptRowSet.has(sri)) {\r\n      renderCell(draw, data, sri, sci);\r\n    } else if (!rset.has(sri)) {\r\n      rset.add(sri);\r\n      const height = data.rows.sumHeight(sri, eri + 1);\r\n      draw.translate(0, -height);\r\n    }\r\n  });\r\n  draw.restore();\r\n\r\n  // 3 render autofilter\r\n  renderAutofilter.call(this, viewRange);\r\n\r\n  draw.restore();\r\n}\r\n\r\nfunction renderSelectedHeaderCell(x, y, w, h) {\r\n  const { draw } = this;\r\n  draw.save();\r\n  draw.attr({ fillStyle: 'rgba(75, 137, 255, 0.08)' })\r\n    .fillRect(x, y, w, h);\r\n  draw.restore();\r\n}\r\n\r\n// viewRange\r\n// type: all | left | top\r\n// w: the fixed width of header\r\n// h: the fixed height of header\r\n// tx: moving distance on x-axis\r\n// ty: moving distance on y-axis\r\nfunction renderFixedHeaders(type, viewRange, w, h, tx, ty) {\r\n  const { draw, data } = this;\r\n  const sumHeight = viewRange.h; // rows.sumHeight(viewRange.sri, viewRange.eri + 1);\r\n  const sumWidth = viewRange.w; // cols.sumWidth(viewRange.sci, viewRange.eci + 1);\r\n  const nty = ty + h;\r\n  const ntx = tx + w;\r\n\r\n  draw.save();\r\n  // draw rect background\r\n  draw.attr(tableFixedHeaderCleanStyle);\r\n  if (type === 'all' || type === 'left') draw.fillRect(0, nty, w, sumHeight);\r\n  if (type === 'all' || type === 'top') draw.fillRect(ntx, 0, sumWidth, h);\r\n\r\n  const {\r\n    sri, sci, eri, eci,\r\n  } = data.selector.range;\r\n  // console.log(data.selectIndexes);\r\n  // draw text\r\n  // text font, align...\r\n  draw.attr(tableFixedHeaderStyle());\r\n  // y-header-text\r\n  if (type === 'all' || type === 'left') {\r\n    data.rowEach(viewRange.sri, viewRange.eri, (i, y1, rowHeight) => {\r\n      const y = nty + y1;\r\n      const ii = i;\r\n      draw.line([0, y], [w, y]);\r\n      if (sri <= ii && ii < eri + 1) {\r\n        renderSelectedHeaderCell.call(this, 0, y, w, rowHeight);\r\n      }\r\n      draw.fillText(ii + 1, w / 2, y + (rowHeight / 2));\r\n      if (i > 0 && data.rows.isHide(i - 1)) {\r\n        draw.save();\r\n        draw.attr({ strokeStyle: '#c6c6c6' });\r\n        draw.line([5, y + 5], [w - 5, y + 5]);\r\n        draw.restore();\r\n      }\r\n    });\r\n    draw.line([0, sumHeight + nty], [w, sumHeight + nty]);\r\n    draw.line([w, nty], [w, sumHeight + nty]);\r\n  }\r\n  // x-header-text\r\n  if (type === 'all' || type === 'top') {\r\n    data.colEach(viewRange.sci, viewRange.eci, (i, x1, colWidth) => {\r\n      const x = ntx + x1;\r\n      const ii = i;\r\n      draw.line([x, 0], [x, h]);\r\n      if (sci <= ii && ii < eci + 1) {\r\n        renderSelectedHeaderCell.call(this, x, 0, colWidth, h);\r\n      }\r\n      draw.fillText(stringAt(ii), x + (colWidth / 2), h / 2);\r\n      if (i > 0 && data.cols.isHide(i - 1)) {\r\n        draw.save();\r\n        draw.attr({ strokeStyle: '#c6c6c6' });\r\n        draw.line([x + 5, 5], [x + 5, h - 5]);\r\n        draw.restore();\r\n      }\r\n    });\r\n    draw.line([sumWidth + ntx, 0], [sumWidth + ntx, h]);\r\n    draw.line([0, h], [sumWidth + ntx, h]);\r\n  }\r\n  draw.restore();\r\n}\r\n\r\nfunction renderFixedLeftTopCell(fw, fh) {\r\n  const { draw } = this;\r\n  draw.save();\r\n  // left-top-cell\r\n  draw.attr({ fillStyle: '#f4f5f8' })\r\n    .fillRect(0, 0, fw, fh);\r\n  draw.restore();\r\n}\r\n\r\nfunction renderContentGrid({\r\n  sri, sci, eri, eci, w, h,\r\n}, fw, fh, tx, ty, dx, dy) {\r\n  const { draw, data } = this;\r\n  const { settings } = data;\r\n\r\n  draw.save();\r\n  draw.attr(tableGridStyle)\r\n    .translate(fw, fh)\r\n    .clearRect(tx, ty, w, h)\r\n    .translate(dx, dy);\r\n  // const sumWidth = cols.sumWidth(sci, eci + 1);\r\n  // const sumHeight = rows.sumHeight(sri, eri + 1);\r\n  // console.log('sumWidth:', sumWidth);\r\n//  draw.clearRect(0, 0, w, h);\r\n  if (!settings.showGrid) {\r\n    draw.restore();\r\n    return;\r\n  }\r\n  \r\n  // console.log('rowStart:', rowStart, ', rowLen:', rowLen);\r\n  data.rowEach(0, eri, (i, y, ch) => {\r\n    // console.log('y:', y);\r\n    if (i > sri) draw.line([0, y], [w - dx, y]);\r\n    if (i === eri) draw.line([0, y + ch], [w, y + ch]);\r\n  });\r\n  data.colEach(0, eci, (i, x, cw) => {\r\n    if (i > sci) draw.line([x, 0], [x, h - dy]);\r\n    if (i === eci) draw.line([x + cw, 0], [x + cw, h]);\r\n  });\r\n  draw.restore();\r\n}\r\n\r\nfunction renderFreezeHighlightLine(fw, fh, ftw, fth) {\r\n  const { draw, data } = this;\r\n  const twidth = data.viewWidth() - fw;\r\n  const theight = data.viewHeight() - fh;\r\n  draw.save()\r\n    .translate(fw, fh)\r\n    .attr({ strokeStyle: 'rgba(75, 137, 255, .6)' });\r\n  draw.line([0, fth], [twidth, fth]);\r\n  draw.line([ftw, 0], [ftw, theight]);\r\n  draw.restore();\r\n}\r\n\r\n/** end */\r\nclass Table {\r\n  constructor(el, data) {\r\n    this.el = el;\r\n    this.draw = new Draw(el, data.viewWidth(), data.viewHeight());\r\n    this.data = data;\r\n  }\r\n\r\n  resetData(data) {\r\n    this.data = data;\r\n    this.render();\r\n  }\r\n\r\n  render() {\r\n    // resize canvas\r\n    const { data } = this;\r\n    const { rows, cols } = data;\r\n    // fixed width of header\r\n    const fw = cols.indexWidth;\r\n    // fixed height of header\r\n    const fh = rows.height;\r\n\r\n    this.draw.resize(data.viewWidth(), data.viewHeight());\r\n    this.clear();\r\n\r\n    const viewRange = data.viewRange();\r\n    // renderAll.call(this, viewRange, data.scroll);\r\n    const tx = data.freezeTotalWidth();\r\n    const ty = data.freezeTotalHeight();\r\n    const { x, y } = data.scroll;\r\n    // 1\r\n    renderContentGrid.call(this, viewRange, fw, fh, tx, ty, -x, -y);\r\n    renderContent.call(this, viewRange, fw, fh, -x, -y);\r\n    renderFixedHeaders.call(this, 'all', viewRange, fw, fh, tx, ty);\r\n    renderFixedLeftTopCell.call(this, fw, fh);\r\n    const [fri, fci] = data.freeze;\r\n    if (fri > 0 || fci > 0) {\r\n      // 2\r\n      if (fri > 0) {\r\n        const vr = viewRange.clone();\r\n        vr.sri = 0;\r\n        vr.eri = fri - 1;\r\n        vr.h = ty;\r\n        renderContentGrid.call(this, vr, fw, fh, tx, 0);\r\n        renderContent.call(this, vr, fw, fh, -x, 0);\r\n        renderFixedHeaders.call(this, 'top', vr, fw, fh, tx, 0);\r\n      }\r\n      // 3\r\n      if (fci > 0) {\r\n        const vr = viewRange.clone();\r\n        vr.sci = 0;\r\n        vr.eci = fci - 1;\r\n        vr.w = tx;\r\n        renderContentGrid.call(this, vr, fw, fh, 0, ty);\r\n        renderFixedHeaders.call(this, 'left', vr, fw, fh, 0, ty);\r\n        renderContent.call(this, vr, fw, fh, 0, -y);\r\n      }\r\n      // 4\r\n      const freezeViewRange = data.freezeViewRange();\r\n      renderContentGrid.call(this, freezeViewRange, fw, fh, 0, 0);\r\n      renderFixedHeaders.call(this, 'all', freezeViewRange, fw, fh, 0, 0);\r\n      renderContent.call(this, freezeViewRange, fw, fh, 0, 0);\r\n      // 5\r\n      renderFreezeHighlightLine.call(this, fw, fh, tx, ty);\r\n    }\r\n  }\r\n\r\n  clear() {\r\n    this.draw.clear();\r\n  }\r\n}\r\n\r\nexport default Table;\r\n","import DropdownItem from './dropdown_item';\r\nimport DropdownAlign from '../dropdown_align';\r\n\r\nexport default class Align extends DropdownItem {\r\n  constructor(value) {\r\n    super('align', '', value);\r\n  }\r\n\r\n  dropdown() {\r\n    const { value } = this;\r\n    return new DropdownAlign(['left', 'center', 'right'], value);\r\n  }\r\n}\r\n","import ToggleItem from './toggle_item';\r\n\r\nexport default class Autofilter extends ToggleItem {\r\n  constructor() {\r\n    super('autofilter');\r\n  }\r\n\r\n  setState() {}\r\n}\r\n","import ToggleItem from './toggle_item';\r\n\r\nexport default class Bold extends ToggleItem {\r\n  constructor() {\r\n    super('font-bold', 'Ctrl+B');\r\n  }\r\n}\r\n","import DropdownItem from './dropdown_item';\r\nimport DropdownBorder from '../dropdown_border';\r\n\r\nexport default class Border extends DropdownItem {\r\n  constructor() {\r\n    super('border');\r\n  }\r\n\r\n  dropdown() {\r\n    return new DropdownBorder();\r\n  }\r\n}\r\n","import IconItem from './icon_item';\r\n\r\nexport default class Clearformat extends IconItem {\r\n  constructor() {\r\n    super('clearformat');\r\n  }\r\n}\r\n","import Item from './item';\r\n\r\nexport default class DropdownItem extends Item {\r\n  dropdown() {}\r\n\r\n  getValue(v) {\r\n    return v;\r\n  }\r\n\r\n  element() {\r\n    const { tag } = this;\r\n    this.dd = this.dropdown();\r\n    this.dd.change = it => this.change(tag, this.getValue(it));\r\n    return super.element().child(\r\n      this.dd,\r\n    );\r\n  }\r\n\r\n  setState(v) {\r\n    if (v) {\r\n      this.value = v;\r\n      this.dd.setTitle(v);\r\n    }\r\n  }\r\n}\r\n","import DropdownItem from './dropdown_item';\r\nimport DropdownColor from '../dropdown_color';\r\n\r\nexport default class FillColor extends DropdownItem {\r\n  constructor(color) {\r\n    super('bgcolor', undefined, color);\r\n  }\r\n\r\n  dropdown() {\r\n    const { tag, value } = this;\r\n    return new DropdownColor(tag, value);\r\n  }\r\n}\r\n","import DropdownItem from './dropdown_item';\r\nimport DropdownFont from '../dropdown_font';\r\n\r\nexport default class Font extends DropdownItem {\r\n  constructor() {\r\n    super('font-name');\r\n  }\r\n\r\n  getValue(it) {\r\n    return it.key;\r\n  }\r\n\r\n  dropdown() {\r\n    return new DropdownFont();\r\n  }\r\n}\r\n","import DropdownItem from './dropdown_item';\r\nimport DropdownFontsize from '../dropdown_fontsize';\r\n\r\nexport default class Format extends DropdownItem {\r\n  constructor() {\r\n    super('font-size');\r\n  }\r\n\r\n  getValue(it) {\r\n    return it.pt;\r\n  }\r\n\r\n  dropdown() {\r\n    return new DropdownFontsize();\r\n  }\r\n}\r\n","import DropdownItem from './dropdown_item';\r\nimport DropdownFormat from '../dropdown_format';\r\n\r\nexport default class Format extends DropdownItem {\r\n  constructor() {\r\n    super('format');\r\n  }\r\n\r\n  getValue(it) {\r\n    return it.key;\r\n  }\r\n\r\n  dropdown() {\r\n    return new DropdownFormat();\r\n  }\r\n}\r\n","import DropdownItem from './dropdown_item';\r\nimport DropdownFormula from '../dropdown_formula';\r\n\r\nexport default class Format extends DropdownItem {\r\n  constructor() {\r\n    super('formula');\r\n  }\r\n\r\n  getValue(it) {\r\n    return it.key;\r\n  }\r\n\r\n  dropdown() {\r\n    return new DropdownFormula();\r\n  }\r\n}\r\n","import ToggleItem from './toggle_item';\r\n\r\nexport default class Freeze extends ToggleItem {\r\n  constructor() {\r\n    super('freeze');\r\n  }\r\n}\r\n","import Item from './item';\r\nimport Icon from '../icon';\r\n\r\nexport default class IconItem extends Item {\r\n  element() {\r\n    return super.element()\r\n      .child(new Icon(this.tag))\r\n      .on('click', () => this.change(this.tag));\r\n  }\r\n\r\n  setState(disabled) {\r\n    this.el.disabled(disabled);\r\n  }\r\n}\r\n","/* global window */\n\nimport Align from './align';\nimport Valign from './valign';\nimport Autofilter from './autofilter';\nimport Bold from './bold';\nimport Italic from './italic';\nimport Strike from './strike';\nimport Underline from './underline';\nimport Border from './border';\nimport Clearformat from './clearformat';\nimport Paintformat from './paintformat';\nimport TextColor from './text_color';\nimport FillColor from './fill_color';\nimport FontSize from './font_size';\nimport Font from './font';\nimport Format from './format';\nimport Formula from './formula';\nimport Freeze from './freeze';\nimport Merge from './merge';\nimport Redo from './redo';\nimport Undo from './undo';\nimport Print from './print';\nimport Textwrap from './textwrap';\nimport More from './more';\nimport JumpToCell from './jumptocell';\n\nimport { h } from '../element';\nimport { cssPrefix } from '../../config';\nimport { bind } from '../event';\n\nfunction buildDivider() {\n  return h('div', `${cssPrefix}-toolbar-divider`);\n}\n\nfunction initBtns2() {\n  this.btns2 = [];\n  this.items.forEach((it) => {\n    if (Array.isArray(it)) {\n      it.forEach(({ el }) => {\n        const rect = el.box();\n        const { marginLeft, marginRight } = el.computedStyle();\n        this.btns2.push([el, rect.width + parseInt(marginLeft, 10) + parseInt(marginRight, 10)]);\n      });\n    } else {\n      const rect = it.box();\n      const { marginLeft, marginRight } = it.computedStyle();\n      this.btns2.push([it, rect.width + parseInt(marginLeft, 10) + parseInt(marginRight, 10)]);\n    }\n  });\n}\n\nfunction moreResize() {\n  const {\n    el, btns, moreEl, btns2,\n  } = this;\n  const { moreBtns, contentEl } = moreEl.dd;\n  el.css('width', `${this.widthFn() - 60}px`);\n  const elBox = el.box();\n\n  let sumWidth = 160;\n  let sumWidth2 = 12;\n  const list1 = [];\n  const list2 = [];\n  btns2.forEach(([it, w], index) => {\n    sumWidth += w;\n    if (index >= btns2.length - 3 || sumWidth < elBox.width) {\n      list1.push(it);\n    } else {\n      sumWidth2 += w;\n      list2.push(it);\n    }\n  });\n  btns.html('').children(...list1);\n  moreBtns.html('').children(...list2);\n  contentEl.css('width', `${sumWidth2}px`);\n  if (list2.length > 0) {\n    moreEl.show();\n  } else {\n    moreEl.hide();\n  }\n}\n\nexport default class Toolbar {\n  constructor(data, widthFn, isHide = false) {\n    this.data = data;\n    this.change = () => {};\n    this.widthFn = widthFn;\n    this.isHide = isHide;\n    const style = data.defaultStyle();\n    this.items = [\n      [\n        this.undoEl = new Undo(),\n        this.redoEl = new Redo(),\n        new Print(),\n        this.paintformatEl = new Paintformat(),\n        this.clearformatEl = new Clearformat(),\n      ],\n      buildDivider(),\n      [\n        this.formatEl = new Format(),\n      ],\n      buildDivider(),\n      [\n        this.fontEl = new Font(),\n        this.fontSizeEl = new FontSize(),\n      ],\n      buildDivider(),\n      [\n        this.boldEl = new Bold(),\n        this.italicEl = new Italic(),\n        this.underlineEl = new Underline(),\n        this.strikeEl = new Strike(),\n        this.textColorEl = new TextColor(style.color),\n      ],\n      buildDivider(),\n      [\n        this.fillColorEl = new FillColor(style.bgcolor),\n        this.borderEl = new Border(),\n        this.mergeEl = new Merge(),\n      ],\n      buildDivider(),\n      [\n        this.alignEl = new Align(style.align),\n        this.valignEl = new Valign(style.valign),\n        this.textwrapEl = new Textwrap(),\n      ],\n      buildDivider(),\n      [\n        this.freezeEl = new Freeze(),\n        this.autofilterEl = new Autofilter(),\n        this.formulaEl = new Formula(),\n        this.moreEl = new More(),\n      ],\n      buildDivider(),\n      [\n        this.jumpToCellEl = new JumpToCell(),\n      ],\n    ];\n\n    this.el = h('div', `${cssPrefix}-toolbar`);\n    this.btns = h('div', `${cssPrefix}-toolbar-btns`);\n\n    this.items.forEach((it) => {\n      if (Array.isArray(it)) {\n        it.forEach((i) => {\n          this.btns.child(i.el);\n          i.change = (...args) => {\n            this.change(...args);\n          };\n        });\n      } else {\n        this.btns.child(it.el);\n      }\n    });\n\n    this.el.child(this.btns);\n    if (isHide) {\n      this.el.hide();\n    } else {\n      this.reset();\n      setTimeout(() => {\n        initBtns2.call(this);\n        moreResize.call(this);\n      }, 0);\n      bind(window, 'resize', () => {\n        moreResize.call(this);\n      });\n    }\n  }\n\n  paintformatActive() {\n    return this.paintformatEl.active();\n  }\n\n  paintformatToggle() {\n    this.paintformatEl.toggle();\n  }\n\n  trigger(type) {\n    this[`${type}El`].click();\n  }\n\n  resetData(data) {\n    this.data = data;\n    this.reset();\n  }\n\n  reset() {\n    if (this.isHide) return;\n    const { data } = this;\n    const style = data.getSelectedCellStyle();\n    // console.log('canUndo:', data.canUndo());\n    this.undoEl.setState(!data.canUndo());\n    this.redoEl.setState(!data.canRedo());\n    this.mergeEl.setState(data.canUnmerge(), !data.selector.multiple());\n    this.autofilterEl.setState(!data.canAutofilter());\n    // this.mergeEl.disabled();\n    // console.log('selectedCell:', style, cell);\n    const { font, format } = style;\n    this.formatEl.setState(format);\n    this.fontEl.setState(font.name);\n    this.fontSizeEl.setState(font.size);\n    this.boldEl.setState(font.bold);\n    this.italicEl.setState(font.italic);\n    this.underlineEl.setState(style.underline);\n    this.strikeEl.setState(style.strike);\n    this.textColorEl.setState(style.color);\n    this.fillColorEl.setState(style.bgcolor);\n    this.alignEl.setState(style.align);\n    this.valignEl.setState(style.valign);\n    this.textwrapEl.setState(style.textwrap);\n    // console.log('freeze is Active:', data.freezeIsActive());\n    this.freezeEl.setState(data.freezeIsActive());\n  }\n}\n","import ToggleItem from './toggle_item';\r\n\r\nexport default class Italic extends ToggleItem {\r\n  constructor() {\r\n    super('font-italic', 'Ctrl+I');\r\n  }\r\n}\r\n","import { cssPrefix } from '../../config';\r\nimport tooltip from '../tooltip';\r\nimport { h } from '../element';\r\nimport { t } from '../../locale/locale';\r\n\r\nexport default class Item {\r\n  // tooltip\r\n  // tag: the subclass type\r\n  // shortcut: shortcut key\r\n  constructor(tag, shortcut, value) {\r\n    this.tip = t(`toolbar.${tag.replace(/-[a-z]/g, c => c[1].toUpperCase())}`);\r\n    if (shortcut) this.tip += ` (${shortcut})`;\r\n    this.tag = tag;\r\n    this.shortcut = shortcut;\r\n    this.value = value;\r\n    this.el = this.element();\r\n    this.change = () => {};\r\n  }\r\n\r\n  element() {\r\n    const { tip } = this;\r\n    return h('div', `${cssPrefix}-toolbar-btn`)\r\n      .on('mouseenter', (evt) => {\r\n        tooltip(tip, evt.target);\r\n      })\r\n      .attr('data-tooltip', tip);\r\n  }\r\n\r\n  setState() {}\r\n}\r\n","import IconItem from './icon_item';\r\n\r\nexport default class JumpToCell extends IconItem {\r\n  constructor() {\r\n    super('jumpToCell');\r\n  }\r\n}\r\n","import ToggleItem from './toggle_item';\r\n\r\nexport default class Merge extends ToggleItem {\r\n  constructor() {\r\n    super('merge');\r\n  }\r\n\r\n  setState(active, disabled) {\r\n    this.el.active(active).disabled(disabled);\r\n  }\r\n}\r\n","import Dropdown from '../dropdown';\r\nimport DropdownItem from './dropdown_item';\r\n\r\nimport { cssPrefix } from '../../config';\r\nimport { h } from '../element';\r\nimport Icon from '../icon';\r\n\r\nclass DropdownMore extends Dropdown {\r\n  constructor() {\r\n    const icon = new Icon('ellipsis');\r\n    const moreBtns = h('div', `${cssPrefix}-toolbar-more`);\r\n    super(icon, 'auto', false, 'bottom-right', moreBtns);\r\n    this.moreBtns = moreBtns;\r\n    this.contentEl.css('max-width', '420px');\r\n  }\r\n}\r\n\r\nexport default class More extends DropdownItem {\r\n  constructor() {\r\n    super('more');\r\n    this.el.hide();\r\n  }\r\n\r\n  dropdown() {\r\n    return new DropdownMore();\r\n  }\r\n\r\n  show() {\r\n    this.el.show();\r\n  }\r\n\r\n  hide() {\r\n    this.el.hide();\r\n  }\r\n}\r\n","import ToggleItem from './toggle_item';\r\n\r\nexport default class Paintformat extends ToggleItem {\r\n  constructor() {\r\n    super('paintformat');\r\n  }\r\n\r\n  setState() {}\r\n}\r\n","import IconItem from './icon_item';\r\n\r\nexport default class Print extends IconItem {\r\n  constructor() {\r\n    super('print', 'Ctrl+P');\r\n  }\r\n}\r\n","import IconItem from './icon_item';\r\n\r\nexport default class Redo extends IconItem {\r\n  constructor() {\r\n    super('redo', 'Ctrl+Y');\r\n  }\r\n}\r\n","import ToggleItem from './toggle_item';\r\n\r\nexport default class Strike extends ToggleItem {\r\n  constructor() {\r\n    super('strike', 'Ctrl+U');\r\n  }\r\n}\r\n","import DropdownItem from './dropdown_item';\r\nimport DropdownColor from '../dropdown_color';\r\n\r\nexport default class TextColor extends DropdownItem {\r\n  constructor(color) {\r\n    super('color', undefined, color);\r\n  }\r\n\r\n  dropdown() {\r\n    const { tag, value } = this;\r\n    return new DropdownColor(tag, value);\r\n  }\r\n}\r\n","import ToggleItem from './toggle_item';\r\n\r\nexport default class Textwrap extends ToggleItem {\r\n  constructor() {\r\n    super('textwrap');\r\n  }\r\n}\r\n","import Item from './item';\r\nimport Icon from '../icon';\r\n\r\nexport default class ToggleItem extends Item {\r\n  element() {\r\n    const { tag } = this;\r\n    return super.element()\r\n      .child(new Icon(tag))\r\n      .on('click', () => this.click());\r\n  }\r\n\r\n  click() {\r\n    this.change(this.tag, this.toggle());\r\n  }\r\n\r\n  setState(active) {\r\n    this.el.active(active);\r\n  }\r\n\r\n  toggle() {\r\n    return this.el.toggle();\r\n  }\r\n\r\n  active() {\r\n    return this.el.hasClass('active');\r\n  }\r\n}\r\n","import ToggleItem from './toggle_item';\r\n\r\nexport default class Underline extends ToggleItem {\r\n  constructor() {\r\n    super('underline', 'Ctrl+U');\r\n  }\r\n}\r\n","import IconItem from './icon_item';\r\n\r\nexport default class Undo extends IconItem {\r\n  constructor() {\r\n    super('undo', 'Ctrl+Z');\r\n  }\r\n}\r\n","import DropdownItem from './dropdown_item';\r\nimport DropdownAlign from '../dropdown_align';\r\n\r\nexport default class Valign extends DropdownItem {\r\n  constructor(value) {\r\n    super('valign', '', value);\r\n  }\r\n\r\n  dropdown() {\r\n    const { value } = this;\r\n    return new DropdownAlign(['top', 'middle', 'bottom'], value);\r\n  }\r\n}\r\n","/* global document */\r\nimport { h } from './element';\r\nimport { bind } from './event';\r\nimport { cssPrefix } from '../config';\r\n\r\nexport default function tooltip(html, target) {\r\n  if (target.classList.contains('active')) {\r\n    return;\r\n  }\r\n  const {\r\n    left, top, width, height,\r\n  } = target.getBoundingClientRect();\r\n  const el = h('div', `${cssPrefix}-tooltip`).html(html).show();\r\n  document.body.appendChild(el.el);\r\n  const elBox = el.box();\r\n  // console.log('elBox:', elBox);\r\n  el.css('left', `${left + (width / 2) - (elBox.width / 2)}px`)\r\n    .css('top', `${top + height + 2}px`);\r\n\r\n  bind(target, 'mouseleave', () => {\r\n    if (document.body.contains(el.el)) {\r\n      document.body.removeChild(el.el);\r\n    }\r\n  });\r\n\r\n  bind(target, 'click', () => {\r\n    if (document.body.contains(el.el)) {\r\n      document.body.removeChild(el.el);\r\n    }\r\n  });\r\n}\r\n","/* global window */\r\nexport const cssPrefix = 'x-spreadsheet';\r\nexport const dpr = window.devicePixelRatio || 1;\r\nexport default {\r\n  cssPrefix,\r\n  dpr,\r\n};\r\n","// font.js\r\n/**\r\n * @typedef {number} fontsizePX px for fontSize\r\n */\r\n/**\r\n * @typedef {number} fontsizePT pt for fontSize\r\n */\r\n/**\r\n * @typedef {object} BaseFont\r\n * @property {string} key inner key\r\n * @property {string} title title for display\r\n */\r\n\r\n/**\r\n * @typedef {object} FontSize\r\n * @property {fontsizePT} pt\r\n * @property {fontsizePX} px\r\n */\r\n\r\n// alphabet.js\r\n/**\r\n * @typedef {string} tagA1 A1 tag for XY-tag (0, 0)\r\n * @example \"A1\"\r\n */\r\n/**\r\n * @typedef {[number, number]} tagXY\r\n * @example [0, 0]\r\n */\r\n","import './_.prototypes';\r\n\r\nconst alphabets = ['A', 'B', 'C', 'D', 'E', 'F', 'G', 'H', 'I', 'J', 'K', 'L', 'M', 'N', 'O', 'P', 'Q', 'R', 'S', 'T', 'U', 'V', 'W', 'X', 'Y', 'Z'];\r\n\r\n/** index number 2 letters\r\n * @example stringAt(26) ==> 'AA'\r\n * @date 2019-10-10\r\n * @export\r\n * @param {number} index\r\n * @returns {string}\r\n */\r\nexport function stringAt(index) {\r\n  let str = '';\r\n  let cindex = index;\r\n  while (cindex >= alphabets.length) {\r\n    cindex /= alphabets.length;\r\n    cindex -= 1;\r\n    str += alphabets[parseInt(cindex, 10) % alphabets.length];\r\n  }\r\n  const last = index % alphabets.length;\r\n  str += alphabets[last];\r\n  return str;\r\n}\r\n\r\n/** translate letter in A1-tag to number\r\n * @date 2019-10-10\r\n * @export\r\n * @param {string} str \"AA\" in A1-tag \"AA1\"\r\n * @returns {number}\r\n */\r\nexport function indexAt(str) {\r\n  let ret = 0;\r\n  for (let i = 0; i < str.length - 1; i += 1) {\r\n    const cindex = str.charCodeAt(i) - 65;\r\n    const exponet = str.length - 1 - i;\r\n    ret += (alphabets.length ** exponet) + (alphabets.length * cindex);\r\n  }\r\n  ret += str.charCodeAt(str.length - 1) - 65;\r\n  return ret;\r\n}\r\n\r\n// B10 => x,y\r\n/** translate A1-tag to XY-tag\r\n * @date 2019-10-10\r\n * @export\r\n * @param {tagA1} src\r\n * @returns {tagXY}\r\n */\r\nexport function expr2xy(src) {\r\n  let x = '';\r\n  let y = '';\r\n  for (let i = 0; i < src.length; i += 1) {\r\n    if (src.charAt(i) >= '0' && src.charAt(i) <= '9') {\r\n      y += src.charAt(i);\r\n    } else {\r\n      x += src.charAt(i);\r\n    }\r\n  }\r\n  return [indexAt(x), parseInt(y, 10) - 1];\r\n}\r\n\r\n/** translate XY-tag to A1-tag\r\n * @example x,y => B10\r\n * @date 2019-10-10\r\n * @export\r\n * @param {number} x\r\n * @param {number} y\r\n * @returns {tagA1}\r\n */\r\nexport function xy2expr(x, y) {\r\n  return `${stringAt(x)}${y + 1}`;\r\n}\r\n\r\n/** translate A1-tag src by (xn, yn)\r\n * @date 2019-10-10\r\n * @export\r\n * @param {tagA1} src\r\n * @param {number} xn\r\n * @param {number} yn\r\n * @returns {tagA1}\r\n */\r\nexport function expr2expr(src, xn, yn, condition = () => true) {\r\n  if (xn === 0 && yn === 0) return src;\r\n  const [x, y] = expr2xy(src);\r\n  if (!condition(x, y)) return src;\r\n  return xy2expr(x + xn, y + yn);\r\n}\r\n\r\nexport default {\r\n  stringAt,\r\n  indexAt,\r\n  expr2xy,\r\n  xy2expr,\r\n  expr2expr,\r\n};\r\n","import { CellRange } from './cell_range';\r\n// operator: all|eq|neq|gt|gte|lt|lte|in|be\r\n// value:\r\n//   in => []\r\n//   be => [min, max]\r\nclass Filter {\r\n  constructor(ci, operator, value) {\r\n    this.ci = ci;\r\n    this.operator = operator;\r\n    this.value = value;\r\n  }\r\n\r\n  set(operator, value) {\r\n    this.operator = operator;\r\n    this.value = value;\r\n  }\r\n\r\n  includes(v) {\r\n    const { operator, value } = this;\r\n    if (operator === 'all') {\r\n      return true;\r\n    }\r\n    if (operator === 'in') {\r\n      return value.includes(v);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  vlength() {\r\n    const { operator, value } = this;\r\n    if (operator === 'in') {\r\n      return value.length;\r\n    }\r\n    return 0;\r\n  }\r\n\r\n  getData() {\r\n    const { ci, operator, value } = this;\r\n    return { ci, operator, value };\r\n  }\r\n}\r\n\r\nclass Sort {\r\n  constructor(ci, order) {\r\n    this.ci = ci;\r\n    this.order = order;\r\n  }\r\n\r\n  asc() {\r\n    return this.order === 'asc';\r\n  }\r\n\r\n  desc() {\r\n    return this.order === 'desc';\r\n  }\r\n}\r\n\r\nexport default class AutoFilter {\r\n  constructor() {\r\n    this.ref = null;\r\n    this.filters = [];\r\n    this.sort = null;\r\n  }\r\n\r\n  setData({ ref, filters, sort }) {\r\n    if (ref != null) {\r\n      this.ref = ref;\r\n      this.filters = filters.map(it => new Filter(it.ci, it.operator, it.value));\r\n      if (sort) {\r\n        this.sort = new Sort(sort.ci, sort.order);\r\n      }\r\n    }\r\n  }\r\n\r\n  getData() {\r\n    if (this.active()) {\r\n      const { ref, filters, sort } = this;\r\n      return { ref, filters: filters.map(it => it.getData()), sort };\r\n    }\r\n    return {};\r\n  }\r\n\r\n  addFilter(ci, operator, value) {\r\n    const filter = this.getFilter(ci);\r\n    if (filter == null) {\r\n      this.filters.push(new Filter(ci, operator, value));\r\n    } else {\r\n      filter.set(operator, value);\r\n    }\r\n  }\r\n\r\n  setSort(ci, order) {\r\n    this.sort = order ? new Sort(ci, order) : null;\r\n  }\r\n\r\n  includes(ri, ci) {\r\n    if (this.active()) {\r\n      return this.hrange().includes(ri, ci);\r\n    }\r\n    return false;\r\n  }\r\n\r\n  getSort(ci) {\r\n    const { sort } = this;\r\n    if (sort && sort.ci === ci) {\r\n      return sort;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getFilter(ci) {\r\n    const { filters } = this;\r\n    for (let i = 0; i < filters.length; i += 1) {\r\n      if (filters[i].ci === ci) {\r\n        return filters[i];\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  filteredRows(getCell) {\r\n    // const ary = [];\r\n    // let lastri = 0;\r\n    const rset = new Set();\r\n    const fset = new Set();\r\n    if (this.active()) {\r\n      const { sri, eri } = this.range();\r\n      const { filters } = this;\r\n      for (let ri = sri + 1; ri <= eri; ri += 1) {\r\n        for (let i = 0; i < filters.length; i += 1) {\r\n          const filter = filters[i];\r\n          const cell = getCell(ri, filter.ci);\r\n          const ctext = cell ? cell.text : '';\r\n          if (!filter.includes(ctext)) {\r\n            rset.add(ri);\r\n            break;\r\n          } else {\r\n            fset.add(ri);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    return { rset, fset };\r\n  }\r\n\r\n  items(ci, getCell) {\r\n    const m = {};\r\n    if (this.active()) {\r\n      const { sri, eri } = this.range();\r\n      for (let ri = sri + 1; ri <= eri; ri += 1) {\r\n        const cell = getCell(ri, ci);\r\n        if (cell !== null && !/^\\s*$/.test(cell.text)) {\r\n          const key = cell.text;\r\n          const cnt = (m[key] || 0) + 1;\r\n          m[key] = cnt;\r\n        } else {\r\n          m[''] = (m[''] || 0) + 1;\r\n        }\r\n      }\r\n    }\r\n    return m;\r\n  }\r\n\r\n  range() {\r\n    return CellRange.valueOf(this.ref);\r\n  }\r\n\r\n  hrange() {\r\n    const r = this.range();\r\n    r.eri = r.sri;\r\n    return r;\r\n  }\r\n\r\n  clear() {\r\n    this.ref = null;\r\n    this.filters = [];\r\n    this.sort = null;\r\n  }\r\n\r\n  active() {\r\n    return this.ref !== null;\r\n  }\r\n}\r\n","import { expr2xy, xy2expr } from './alphabet';\r\nimport { numberCalc } from './helper';\r\n\r\n// Converting infix expression to a suffix expression\r\n// src: AVERAGE(SUM(A1,A2), B1) + 50 + B20\r\n// return: [A1, A2], SUM[, B1],AVERAGE,50,+,B20,+\r\nconst infixExprToSuffixExpr = (src) => {\r\n  const operatorStack = [];\r\n  const stack = [];\r\n  let subStrs = []; // SUM, A1, B2, 50 ...\r\n  let fnArgType = 0; // 1 => , 2 => :\r\n  let fnArgOperator = '';\r\n  let fnArgsLen = 1; // A1,A2,A3...\r\n  let oldc = '';\r\n  for (let i = 0; i < src.length; i += 1) {\r\n    const c = src.charAt(i);\r\n    if (c !== ' ') {\r\n      if (c >= 'a' && c <= 'z') {\r\n        subStrs.push(c.toUpperCase());\r\n      } else if ((c >= '0' && c <= '9') || (c >= 'A' && c <= 'Z') || c === '.') {\r\n        subStrs.push(c);\r\n      } else if (c === '\"') {\r\n        i += 1;\r\n        while (src.charAt(i) !== '\"') {\r\n          subStrs.push(src.charAt(i));\r\n          i += 1;\r\n        }\r\n        stack.push(`\"${subStrs.join('')}`);\r\n        subStrs = [];\r\n      } else if (c === '-' && /[+\\-*/,(]/.test(oldc)) {\r\n        subStrs.push(c);\r\n      } else {\r\n        // console.log('subStrs:', subStrs.join(''), stack);\r\n        if (c !== '(' && subStrs.length > 0) {\r\n          stack.push(subStrs.join(''));\r\n        }\r\n        if (c === ')') {\r\n          let c1 = operatorStack.pop();\r\n          if (fnArgType === 2) {\r\n            // fn argument range => A1:B5\r\n            try {\r\n              const [ex, ey] = expr2xy(stack.pop());\r\n              const [sx, sy] = expr2xy(stack.pop());\r\n              // console.log('::', sx, sy, ex, ey);\r\n              let rangelen = 0;\r\n              for (let x = sx; x <= ex; x += 1) {\r\n                for (let y = sy; y <= ey; y += 1) {\r\n                  stack.push(xy2expr(x, y));\r\n                  rangelen += 1;\r\n                }\r\n              }\r\n              stack.push([c1, rangelen]);\r\n            } catch (e) {\r\n              // console.log(e);\r\n            }\r\n          } else if (fnArgType === 1 || fnArgType === 3) {\r\n            if (fnArgType === 3) stack.push(fnArgOperator);\r\n            // fn argument => A1,A2,B5\r\n            stack.push([c1, fnArgsLen]);\r\n            fnArgsLen = 1;\r\n          } else {\r\n            // console.log('c1:', c1, fnArgType, stack, operatorStack);\r\n            while (c1 !== '(') {\r\n              stack.push(c1);\r\n              if (operatorStack.length <= 0) break;\r\n              c1 = operatorStack.pop();\r\n            }\r\n          }\r\n          fnArgType = 0;\r\n        } else if (c === '=' || c === '>' || c === '<') {\r\n          const nc = src.charAt(i + 1);\r\n          fnArgOperator = c;\r\n          if (nc === '=' || nc === '-') {\r\n            fnArgOperator += nc;\r\n            i += 1;\r\n          }\r\n          fnArgType = 3;\r\n        } else if (c === ':') {\r\n          fnArgType = 2;\r\n        } else if (c === ',') {\r\n          if (fnArgType === 3) {\r\n            stack.push(fnArgOperator);\r\n          }\r\n          fnArgType = 1;\r\n          fnArgsLen += 1;\r\n        } else if (c === '(' && subStrs.length > 0) {\r\n          // function\r\n          operatorStack.push(subStrs.join(''));\r\n        } else {\r\n          // priority: */ > +-\r\n          // console.log('xxxx:', operatorStack, c, stack);\r\n          if (operatorStack.length > 0 && (c === '+' || c === '-')) {\r\n            let top = operatorStack[operatorStack.length - 1];\r\n            if (top !== '(') stack.push(operatorStack.pop());\r\n            if (top === '*' || top === '/') {\r\n              while (operatorStack.length > 0) {\r\n                top = operatorStack[operatorStack.length - 1];\r\n                if (top !== '(') stack.push(operatorStack.pop());\r\n                else break;\r\n              }\r\n            }\r\n          } else if (operatorStack.length > 0) {\r\n            const top = operatorStack[operatorStack.length - 1];\r\n            if (top === '*' || top === '/') stack.push(operatorStack.pop());\r\n          }\r\n          operatorStack.push(c);\r\n        }\r\n        subStrs = [];\r\n      }\r\n      oldc = c;\r\n    }\r\n  }\r\n  if (subStrs.length > 0) {\r\n    stack.push(subStrs.join(''));\r\n  }\r\n  while (operatorStack.length > 0) {\r\n    stack.push(operatorStack.pop());\r\n  }\r\n  return stack;\r\n};\r\n\r\nconst evalSubExpr = (subExpr, cellRender) => {\r\n  const [fl] = subExpr;\r\n  let expr = subExpr;\r\n  if (fl === '\"') {\r\n    return subExpr.substring(1);\r\n  }\r\n  let ret = 1;\r\n  if (fl === '-') {\r\n    expr = subExpr.substring(1);\r\n    ret = -1;\r\n  }\r\n  if (expr[0] >= '0' && expr[0] <= '9') {\r\n    return ret * Number(expr);\r\n  }\r\n  const [x, y] = expr2xy(expr);\r\n  let cellValue = cellRender(x, y);\r\n  const regex = /(\\$*)\\d*(.*|,*)\\d*(hr*|%*)/gm;\r\n  let cellValueReg = regex.test(cellValue);\r\n  if (cellValueReg) {\r\n    return cellValue;\r\n  }\r\n  else {\r\n    return ret * cellValue;\r\n  }\r\n  \r\n};\r\n\r\n// evaluate the suffix expression\r\n// srcStack: <= infixExprToSufixExpr\r\n// formulaMap: {'SUM': {}, ...}\r\n// cellRender: (x, y) => {}\r\nconst evalSuffixExpr = (srcStack, formulaMap, cellRender, cellList) => {\r\n  const stack = [];\r\n  // console.log(':::::formulaMap:', formulaMap);\r\n  for (let i = 0; i < srcStack.length; i += 1) {\r\n    // console.log(':::>>>', srcStack[i]);\r\n    const expr = srcStack[i];\r\n    const fc = expr[0];\r\n    if (expr === '+') {\r\n      const top = stack.pop();\r\n      stack.push(numberCalc('+', stack.pop(), top));\r\n    } else if (expr === '-') {\r\n      if (stack.length === 1) {\r\n        const top = stack.pop();\r\n        stack.push(numberCalc('*', top, -1));\r\n      } else {\r\n        const top = stack.pop();\r\n        stack.push(numberCalc('-', stack.pop(), top));\r\n      }\r\n    } else if (expr === '*') {\r\n      stack.push(numberCalc('*', stack.pop(), stack.pop()));\r\n    } else if (expr === '/') {\r\n      const top = stack.pop();\r\n      stack.push(numberCalc('/', stack.pop(), top));\r\n    } else if (fc === '=' || fc === '>' || fc === '<') {\r\n      let top = stack.pop();\r\n      if (!Number.isNaN(top)) top = Number(top);\r\n      let left = stack.pop();\r\n      if (!Number.isNaN(left)) left = Number(left);\r\n      let ret = false;\r\n      if (fc === '=') {\r\n        ret = (left === top);\r\n      } else if (expr === '>') {\r\n        ret = (left > top);\r\n      } else if (expr === '>=') {\r\n        ret = (left >= top);\r\n      } else if (expr === '<') {\r\n        ret = (left < top);\r\n      } else if (expr === '<=') {\r\n        ret = (left <= top);\r\n      }\r\n      stack.push(ret);\r\n    } else if (Array.isArray(expr)) {\r\n      const [formula, len] = expr;\r\n      const params = [];\r\n      for (let j = 0; j < len; j += 1) {\r\n        params.push(stack.pop());\r\n      }\r\n      stack.push(formulaMap[formula].render(params.reverse()));\r\n    } else {\r\n      if (cellList.includes(expr)) {\r\n        return 0;\r\n      }\r\n      if ((fc >= 'a' && fc <= 'z') || (fc >= 'A' && fc <= 'Z')) {\r\n        cellList.push(expr);\r\n      }\r\n      stack.push(evalSubExpr(expr, cellRender));\r\n      cellList.pop();\r\n    }\r\n  }\r\n  return stack[0];\r\n};\r\n\r\nconst cellRender = (src, formulaMap, getCellText, cellList = []) => {\r\n  if (src[0] === '=') {\r\n    const stack = infixExprToSuffixExpr(src.substring(1));\r\n    if (stack.length <= 0) return src;\r\n    return evalSuffixExpr(\r\n      stack,\r\n      formulaMap,\r\n      (x, y) => cellRender(getCellText(x, y), formulaMap, getCellText, cellList),\r\n      cellList,\r\n    );\r\n  }\r\n  return src;\r\n};\r\n\r\nexport default {\r\n  render: cellRender,\r\n};\r\nexport {\r\n  infixExprToSuffixExpr,\r\n};\r\n","import { xy2expr, expr2xy } from './alphabet';\r\n\r\nclass CellRange {\r\n  constructor(sri, sci, eri, eci, w = 0, h = 0) {\r\n    this.sri = sri;\r\n    this.sci = sci;\r\n    this.eri = eri;\r\n    this.eci = eci;\r\n    this.w = w;\r\n    this.h = h;\r\n  }\r\n\r\n  set(sri, sci, eri, eci) {\r\n    this.sri = sri;\r\n    this.sci = sci;\r\n    this.eri = eri;\r\n    this.eci = eci;\r\n  }\r\n\r\n  multiple() {\r\n    return this.eri - this.sri > 0 || this.eci - this.sci > 0;\r\n  }\r\n\r\n  // cell-index: ri, ci\r\n  // cell-ref: A10\r\n  includes(...args) {\r\n    let [ri, ci] = [0, 0];\r\n    if (args.length === 1) {\r\n      [ci, ri] = expr2xy(args[0]);\r\n    } else if (args.length === 2) {\r\n      [ri, ci] = args;\r\n    }\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    return sri <= ri && ri <= eri && sci <= ci && ci <= eci;\r\n  }\r\n\r\n  each(cb, rowFilter = () => true) {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    for (let i = sri; i <= eri; i += 1) {\r\n      if (rowFilter(i)) {\r\n        for (let j = sci; j <= eci; j += 1) {\r\n          cb(i, j);\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  contains(other) {\r\n    return this.sri <= other.sri\r\n      && this.sci <= other.sci\r\n      && this.eri >= other.eri\r\n      && this.eci >= other.eci;\r\n  }\r\n\r\n  // within\r\n  within(other) {\r\n    return this.sri >= other.sri\r\n      && this.sci >= other.sci\r\n      && this.eri <= other.eri\r\n      && this.eci <= other.eci;\r\n  }\r\n\r\n  // disjoint\r\n  disjoint(other) {\r\n    return this.sri > other.eri\r\n      || this.sci > other.eci\r\n      || other.sri > this.eri\r\n      || other.sci > this.eci;\r\n  }\r\n\r\n  // intersects\r\n  intersects(other) {\r\n    return this.sri <= other.eri\r\n      && this.sci <= other.eci\r\n      && other.sri <= this.eri\r\n      && other.sci <= this.eci;\r\n  }\r\n\r\n  // union\r\n  union(other) {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    return new CellRange(\r\n      other.sri < sri ? other.sri : sri,\r\n      other.sci < sci ? other.sci : sci,\r\n      other.eri > eri ? other.eri : eri,\r\n      other.eci > eci ? other.eci : eci,\r\n    );\r\n  }\r\n\r\n  // intersection\r\n  // intersection(other) {}\r\n\r\n  // Returns Array<CellRange> that represents that part of this that does not intersect with other\r\n  // difference\r\n  difference(other) {\r\n    const ret = [];\r\n    const addRet = (sri, sci, eri, eci) => {\r\n      ret.push(new CellRange(sri, sci, eri, eci));\r\n    };\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    const dsr = other.sri - sri;\r\n    const dsc = other.sci - sci;\r\n    const der = eri - other.eri;\r\n    const dec = eci - other.eci;\r\n    if (dsr > 0) {\r\n      addRet(sri, sci, other.sri - 1, eci);\r\n      if (der > 0) {\r\n        addRet(other.eri + 1, sci, eri, eci);\r\n        if (dsc > 0) {\r\n          addRet(other.sri, sci, other.eri, other.sci - 1);\r\n        }\r\n        if (dec > 0) {\r\n          addRet(other.sri, other.eci + 1, other.eri, eci);\r\n        }\r\n      } else {\r\n        if (dsc > 0) {\r\n          addRet(other.sri, sci, eri, other.sci - 1);\r\n        }\r\n        if (dec > 0) {\r\n          addRet(other.sri, other.eci + 1, eri, eci);\r\n        }\r\n      }\r\n    } else if (der > 0) {\r\n      addRet(other.eri + 1, sci, eri, eci);\r\n      if (dsc > 0) {\r\n        addRet(sri, sci, other.eri, other.sci - 1);\r\n      }\r\n      if (dec > 0) {\r\n        addRet(sri, other.eci + 1, other.eri, eci);\r\n      }\r\n    }\r\n    if (dsc > 0) {\r\n      addRet(sri, sci, eri, other.sci - 1);\r\n      if (dec > 0) {\r\n        addRet(sri, other.eri + 1, eri, eci);\r\n        if (dsr > 0) {\r\n          addRet(sri, other.sci, other.sri - 1, other.eci);\r\n        }\r\n        if (der > 0) {\r\n          addRet(other.sri + 1, other.sci, eri, other.eci);\r\n        }\r\n      } else {\r\n        if (dsr > 0) {\r\n          addRet(sri, other.sci, other.sri - 1, eci);\r\n        }\r\n        if (der > 0) {\r\n          addRet(other.sri + 1, other.sci, eri, eci);\r\n        }\r\n      }\r\n    } else if (dec > 0) {\r\n      addRet(eri, other.eci + 1, eri, eci);\r\n      if (dsr > 0) {\r\n        addRet(sri, sci, other.sri - 1, other.eci);\r\n      }\r\n      if (der > 0) {\r\n        addRet(other.eri + 1, sci, eri, other.eci);\r\n      }\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  size() {\r\n    return [\r\n      this.eri - this.sri + 1,\r\n      this.eci - this.sci + 1,\r\n    ];\r\n  }\r\n\r\n  toString() {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this;\r\n    let ref = xy2expr(sci, sri);\r\n    if (this.multiple()) {\r\n      ref = `${ref}:${xy2expr(eci, eri)}`;\r\n    }\r\n    return ref;\r\n  }\r\n\r\n  clone() {\r\n    const {\r\n      sri, sci, eri, eci, w, h,\r\n    } = this;\r\n    return new CellRange(sri, sci, eri, eci, w, h);\r\n  }\r\n\r\n  /*\r\n  toJSON() {\r\n    return this.toString();\r\n  }\r\n  */\r\n\r\n  equals(other) {\r\n    return this.eri === other.eri\r\n      && this.eci === other.eci\r\n      && this.sri === other.sri\r\n      && this.sci === other.sci;\r\n  }\r\n\r\n  static valueOf(ref) {\r\n    // B1:B8, B1 => 1 x 1 cell range\r\n    const refs = ref.split(':');\r\n    const [sci, sri] = expr2xy(refs[0]);\r\n    let [eri, eci] = [sri, sci];\r\n    if (refs.length > 1) {\r\n      [eci, eri] = expr2xy(refs[1]);\r\n    }\r\n    return new CellRange(sri, sci, eri, eci);\r\n  }\r\n}\r\n\r\nexport default CellRange;\r\n\r\nexport {\r\n  CellRange,\r\n};\r\n","export default class Clipboard {\r\n  constructor() {\r\n    this.range = null; // CellRange\r\n    this.state = 'clear';\r\n  }\r\n\r\n  copy(cellRange) {\r\n    this.range = cellRange;\r\n    this.state = 'copy';\r\n    return this;\r\n  }\r\n\r\n  cut(cellRange) {\r\n    this.range = cellRange;\r\n    this.state = 'cut';\r\n    return this;\r\n  }\r\n\r\n  isCopy() {\r\n    return this.state === 'copy';\r\n  }\r\n\r\n  isCut() {\r\n    return this.state === 'cut';\r\n  }\r\n\r\n  isClear() {\r\n    return this.state === 'clear';\r\n  }\r\n\r\n  clear() {\r\n    this.range = null;\r\n    this.state = 'clear';\r\n  }\r\n}\r\n","import helper from './helper';\r\n\r\nclass Cols {\r\n  constructor({\r\n    len, width, indexWidth, minWidth,\r\n  }) {\r\n    this._ = {};\r\n    this.len = len;\r\n    this.width = width;\r\n    this.indexWidth = indexWidth;\r\n    this.minWidth = minWidth;\r\n  }\r\n\r\n  setData(d) {\r\n    if (d.len) {\r\n      this.len = d.len;\r\n      delete d.len;\r\n    }\r\n    this._ = d;\r\n  }\r\n\r\n  getData() {\r\n    const { len } = this;\r\n    return Object.assign({ len }, this._);\r\n  }\r\n\r\n  getWidth(i) {\r\n    if (this.isHide(i)) return 0;\r\n    const col = this._[i];\r\n    if (col && col.width) {\r\n      return col.width;\r\n    }\r\n    return this.width;\r\n  }\r\n\r\n  getOrNew(ci) {\r\n    this._[ci] = this._[ci] || {};\r\n    return this._[ci];\r\n  }\r\n\r\n  setWidth(ci, width) {\r\n    const col = this.getOrNew(ci);\r\n    col.width = width;\r\n  }\r\n\r\n  unhide(idx) {\r\n    let index = idx;\r\n    while (index > 0) {\r\n      index -= 1;\r\n      if (this.isHide(index)) {\r\n        this.setHide(index, false);\r\n      } else break;\r\n    }\r\n  }\r\n\r\n  isHide(ci) {\r\n    const col = this._[ci];\r\n    return col && col.hide;\r\n  }\r\n\r\n  setHide(ci, v) {\r\n    const col = this.getOrNew(ci);\r\n    if (v === true) col.hide = true;\r\n    else delete col.hide;\r\n  }\r\n\r\n  setStyle(ci, style) {\r\n    const col = this.getOrNew(ci);\r\n    col.style = style;\r\n  }\r\n\r\n  sumWidth(min, max) {\r\n    return helper.rangeSum(min, max, i => this.getWidth(i));\r\n  }\r\n\r\n  totalWidth() {\r\n    return this.sumWidth(0, this.len);\r\n  }\r\n}\r\n\r\nexport default {};\r\nexport {\r\n  Cols,\r\n};\r\n","/* global document */\r\n\r\nimport Selector from './selector';\r\nimport Scroll from './scroll';\r\nimport History from './history';\r\nimport Clipboard from './clipboard';\r\nimport AutoFilter from './auto_filter';\r\nimport { Merges } from './merge';\r\nimport helper from './helper';\r\nimport { Rows } from './row';\r\nimport { Cols } from './col';\r\nimport { Validations } from './validation';\r\nimport { CellRange } from './cell_range';\r\nimport { expr2xy, xy2expr } from './alphabet';\r\nimport { t } from '../locale/locale';\r\n\r\n// private methods\r\n/*\r\n * {\r\n *  name: ''\r\n *  freeze: [0, 0],\r\n *  formats: [],\r\n *  styles: [\r\n *    {\r\n *      bgcolor: '',\r\n *      align: '',\r\n *      valign: '',\r\n *      textwrap: false,\r\n *      strike: false,\r\n *      underline: false,\r\n *      color: '',\r\n *      format: 1,\r\n *      border: {\r\n *        left: [style, color],\r\n *        right: [style, color],\r\n *        top: [style, color],\r\n *        bottom: [style, color],\r\n *      },\r\n *      font: {\r\n *        name: 'Helvetica',\r\n *        size: 10,\r\n *        bold: false,\r\n *        italic: false,\r\n *      }\r\n *    }\r\n *  ],\r\n *  merges: [\r\n *    'A1:F11',\r\n *    ...\r\n *  ],\r\n *  rows: {\r\n *    1: {\r\n *      height: 50,\r\n *      style: 1,\r\n *      cells: {\r\n *        1: {\r\n *          style: 2,\r\n *          type: 'string',\r\n *          text: '',\r\n *          value: '', // cal result\r\n *        }\r\n *      }\r\n *    },\r\n *    ...\r\n *  },\r\n *  cols: {\r\n *    2: { width: 100, style: 1 }\r\n *  }\r\n * }\r\n */\r\nconst defaultSettings = {\r\n  mode: 'edit', // edit | read\r\n  view: {\r\n    height: () => document.documentElement.clientHeight,\r\n    width: () => document.documentElement.clientWidth,\r\n  },\r\n  showGrid: true,\r\n  showToolbar: true,\r\n  showContextmenu: true,\r\n  row: {\r\n    len: 100,\r\n    height: 25,\r\n  },\r\n  col: {\r\n    len: 26,\r\n    width: 100,\r\n    indexWidth: 60,\r\n    minWidth: 40,\r\n  },\r\n  style: {\r\n    bgcolor: '#ffffff',\r\n    align: 'left',\r\n    valign: 'middle',\r\n    textwrap: false,\r\n    strike: false,\r\n    underline: false,\r\n    color: '#0a0a0a',\r\n    font: {\r\n      name: 'Arial',\r\n      size: 10,\r\n      bold: false,\r\n      italic: false,\r\n    },\r\n    format: 'normal',\r\n  },\r\n};\r\n\r\nconst toolbarHeight = 41;\r\nconst bottombarHeight = 41;\r\n\r\n\r\n// src: cellRange\r\n// dst: cellRange\r\nfunction canPaste(src, dst, error = () => {}) {\r\n  const { merges } = this;\r\n  const cellRange = dst.clone();\r\n  const [srn, scn] = src.size();\r\n  const [drn, dcn] = dst.size();\r\n  if (srn > drn) {\r\n    cellRange.eri = dst.sri + srn - 1;\r\n  }\r\n  if (scn > dcn) {\r\n    cellRange.eci = dst.sci + scn - 1;\r\n  }\r\n  if (merges.intersects(cellRange)) {\r\n    error(t('error.pasteForMergedCell'));\r\n    return false;\r\n  }\r\n  return true;\r\n}\r\nfunction copyPaste(srcCellRange, dstCellRange, what, autofill = false) {\r\n  const { rows, merges } = this;\r\n  // delete dest merge\r\n  if (what === 'all' || what === 'format') {\r\n    rows.deleteCells(dstCellRange, what);\r\n    merges.deleteWithin(dstCellRange);\r\n  }\r\n  rows.copyPaste(srcCellRange, dstCellRange, what, autofill, (ri, ci, cell) => {\r\n    if (cell && cell.merge) {\r\n      // console.log('cell:', ri, ci, cell);\r\n      const [rn, cn] = cell.merge;\r\n      if (rn <= 0 && cn <= 0) return;\r\n      merges.add(new CellRange(ri, ci, ri + rn, ci + cn));\r\n    }\r\n  });\r\n}\r\n\r\nfunction cutPaste(srcCellRange, dstCellRange) {\r\n  const { clipboard, rows, merges } = this;\r\n  rows.cutPaste(srcCellRange, dstCellRange);\r\n  merges.move(srcCellRange,\r\n    dstCellRange.sri - srcCellRange.sri,\r\n    dstCellRange.sci - srcCellRange.sci);\r\n  clipboard.clear();\r\n}\r\n\r\n// bss: { top, bottom, left, right }\r\nfunction setStyleBorder(ri, ci, bss) {\r\n  const { styles, rows } = this;\r\n  const cell = rows.getCellOrNew(ri, ci);\r\n  let cstyle = {};\r\n  if (cell.style !== undefined) {\r\n    cstyle = helper.cloneDeep(styles[cell.style]);\r\n  }\r\n  cstyle = helper.merge(cstyle, { border: bss });\r\n  cell.style = this.addStyle(cstyle);\r\n}\r\n\r\nfunction setStyleBorders({ mode, style, color }) {\r\n  const { styles, selector, rows } = this;\r\n  const {\r\n    sri, sci, eri, eci,\r\n  } = selector.range;\r\n  const multiple = !this.isSignleSelected();\r\n  if (!multiple) {\r\n    if (mode === 'inside' || mode === 'horizontal' || mode === 'vertical') {\r\n      return;\r\n    }\r\n  }\r\n  if (mode === 'outside' && !multiple) {\r\n    setStyleBorder.call(this, sri, sci, {\r\n      top: [style, color], bottom: [style, color], left: [style, color], right: [style, color],\r\n    });\r\n  } else if (mode === 'none') {\r\n    selector.range.each((ri, ci) => {\r\n      const cell = rows.getCell(ri, ci);\r\n      if (cell && cell.style !== undefined) {\r\n        const ns = helper.cloneDeep(styles[cell.style]);\r\n        delete ns.border;\r\n        // ['bottom', 'top', 'left', 'right'].forEach((prop) => {\r\n        //   if (ns[prop]) delete ns[prop];\r\n        // });\r\n        cell.style = this.addStyle(ns);\r\n      }\r\n    });\r\n  } else if (mode === 'all' || mode === 'inside' || mode === 'outside'\r\n    || mode === 'horizontal' || mode === 'vertical') {\r\n    const merges = [];\r\n    for (let ri = sri; ri <= eri; ri += 1) {\r\n      for (let ci = sci; ci <= eci; ci += 1) {\r\n        // jump merges -- start\r\n        const mergeIndexes = [];\r\n        for (let ii = 0; ii < merges.length; ii += 1) {\r\n          const [mri, mci, rn, cn] = merges[ii];\r\n          if (ri === mri + rn + 1) mergeIndexes.push(ii);\r\n          if (mri <= ri && ri <= mri + rn) {\r\n            if (ci === mci) {\r\n              ci += cn + 1;\r\n              break;\r\n            }\r\n          }\r\n        }\r\n        mergeIndexes.forEach(it => merges.splice(it, 1));\r\n        if (ci > eci) break;\r\n        // jump merges -- end\r\n        const cell = rows.getCell(ri, ci);\r\n        let [rn, cn] = [0, 0];\r\n        if (cell && cell.merge) {\r\n          [rn, cn] = cell.merge;\r\n          merges.push([ri, ci, rn, cn]);\r\n        }\r\n        const mrl = rn > 0 && ri + rn === eri;\r\n        const mcl = cn > 0 && ci + cn === eci;\r\n        let bss = {};\r\n        if (mode === 'all') {\r\n          bss = {\r\n            bottom: [style, color],\r\n            top: [style, color],\r\n            left: [style, color],\r\n            right: [style, color],\r\n          };\r\n        } else if (mode === 'inside') {\r\n          if (!mcl && ci < eci) bss.right = [style, color];\r\n          if (!mrl && ri < eri) bss.bottom = [style, color];\r\n        } else if (mode === 'horizontal') {\r\n          if (!mrl && ri < eri) bss.bottom = [style, color];\r\n        } else if (mode === 'vertical') {\r\n          if (!mcl && ci < eci) bss.right = [style, color];\r\n        } else if (mode === 'outside' && multiple) {\r\n          if (sri === ri) bss.top = [style, color];\r\n          if (mrl || eri === ri) bss.bottom = [style, color];\r\n          if (sci === ci) bss.left = [style, color];\r\n          if (mcl || eci === ci) bss.right = [style, color];\r\n        }\r\n        if (Object.keys(bss).length > 0) {\r\n          setStyleBorder.call(this, ri, ci, bss);\r\n        }\r\n        ci += cn;\r\n      }\r\n    }\r\n  } else if (mode === 'top' || mode === 'bottom') {\r\n    for (let ci = sci; ci <= eci; ci += 1) {\r\n      if (mode === 'top') {\r\n        setStyleBorder.call(this, sri, ci, { top: [style, color] });\r\n        ci += rows.getCellMerge(sri, ci)[1];\r\n      }\r\n      if (mode === 'bottom') {\r\n        setStyleBorder.call(this, eri, ci, { bottom: [style, color] });\r\n        ci += rows.getCellMerge(eri, ci)[1];\r\n      }\r\n    }\r\n  } else if (mode === 'left' || mode === 'right') {\r\n    for (let ri = sri; ri <= eri; ri += 1) {\r\n      if (mode === 'left') {\r\n        setStyleBorder.call(this, ri, sci, { left: [style, color] });\r\n        ri += rows.getCellMerge(ri, sci)[0];\r\n      }\r\n      if (mode === 'right') {\r\n        setStyleBorder.call(this, ri, eci, { right: [style, color] });\r\n        ri += rows.getCellMerge(ri, eci)[0];\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nfunction getCellRowByY(y, scrollOffsety) {\r\n  const { rows } = this;\r\n  const fsh = this.freezeTotalHeight();\r\n  // console.log('y:', y, ', fsh:', fsh);\r\n  let inits = rows.height;\r\n  if (fsh + rows.height < y) inits -= scrollOffsety;\r\n\r\n  // handle ri in autofilter\r\n  const frset = this.exceptRowSet;\r\n\r\n  let ri = 0;\r\n  let top = inits;\r\n  let { height } = rows;\r\n  for (; ri < rows.len; ri += 1) {\r\n    if (top > y) break;\r\n    if (!frset.has(ri)) {\r\n      height = rows.getHeight(ri);\r\n      top += height;\r\n    }\r\n  }\r\n  top -= height;\r\n  // console.log('ri:', ri, ', top:', top, ', height:', height);\r\n\r\n  if (top <= 0) {\r\n    return { ri: -1, top: 0, height };\r\n  }\r\n\r\n  return { ri: ri - 1, top, height };\r\n}\r\n\r\nfunction getCellColByX(x, scrollOffsetx) {\r\n  const { cols } = this;\r\n  const fsw = this.freezeTotalWidth();\r\n  let inits = cols.indexWidth;\r\n  if (fsw + cols.indexWidth < x) inits -= scrollOffsetx;\r\n  const [ci, left, width] = helper.rangeReduceIf(\r\n    0,\r\n    cols.len,\r\n    inits,\r\n    cols.indexWidth,\r\n    x,\r\n    i => cols.getWidth(i),\r\n  );\r\n  if (left <= 0) {\r\n    return { ci: -1, left: 0, width: cols.indexWidth };\r\n  }\r\n  return { ci: ci - 1, left, width };\r\n}\r\n\r\nexport default class DataProxy {\r\n  constructor(name, settings) {\r\n    this.settings = helper.merge(defaultSettings, settings || {});\r\n    // save data begin\r\n    this.name = name || 'sheet';\r\n    this.freeze = [0, 0];\r\n    this.styles = []; // Array<Style>\r\n    this.merges = new Merges(); // [CellRange, ...]\r\n    this.rows = new Rows(this.settings.row);\r\n    this.cols = new Cols(this.settings.col);\r\n    this.validations = new Validations();\r\n    this.hyperlinks = {};\r\n    this.comments = {};\r\n    // save data end\r\n\r\n    // don't save object\r\n    this.selector = new Selector();\r\n    this.scroll = new Scroll();\r\n    this.history = new History();\r\n    this.clipboard = new Clipboard();\r\n    this.autoFilter = new AutoFilter();\r\n    this.change = () => {};\r\n    this.exceptRowSet = new Set();\r\n    this.sortedRowMap = new Map();\r\n    this.unsortedRowMap = new Map();\r\n  }\r\n\r\n  addValidation(mode, ref, validator) {\r\n    // console.log('mode:', mode, ', ref:', ref, ', validator:', validator);\r\n    this.changeData(() => {\r\n      this.validations.add(mode, ref, validator);\r\n    });\r\n  }\r\n\r\n  removeValidation() {\r\n    const { range } = this.selector;\r\n    this.changeData(() => {\r\n      this.validations.remove(range);\r\n    });\r\n  }\r\n\r\n  getSelectedValidator() {\r\n    const { ri, ci } = this.selector;\r\n    const v = this.validations.get(ri, ci);\r\n    return v ? v.validator : null;\r\n  }\r\n\r\n  getSelectedValidation() {\r\n    const { ri, ci, range } = this.selector;\r\n    const v = this.validations.get(ri, ci);\r\n    const ret = { ref: range.toString() };\r\n    if (v !== null) {\r\n      ret.mode = v.mode;\r\n      ret.validator = v.validator;\r\n    }\r\n    return ret;\r\n  }\r\n\r\n  canUndo() {\r\n    return this.history.canUndo();\r\n  }\r\n\r\n  canRedo() {\r\n    return this.history.canRedo();\r\n  }\r\n\r\n  undo() {\r\n    this.history.undo(this.getData(), (d) => {\r\n      this.setData(d);\r\n    });\r\n  }\r\n\r\n  redo() {\r\n    this.history.redo(this.getData(), (d) => {\r\n      this.setData(d);\r\n    });\r\n  }\r\n\r\n  copy() {\r\n    this.clipboard.copy(this.selector.range);\r\n  }\r\n\r\n  copyToSystemClipboard() {\r\n    if (navigator.clipboard == undefined) {\r\n      return\r\n    }\r\n    var copyText = \"\";\r\n    var rowData = this.rows.getData();\r\n    for (var ri = this.selector.range.sri; ri <= this.selector.range.eri; ri++) {\r\n      if (rowData.hasOwnProperty(ri)) {\r\n        for (var ci = this.selector.range.sci; ci <= this.selector.range.eci; ci++) {\r\n          if (ci > this.selector.range.sci) {\r\n            copyText += '\\t'\r\n          }\r\n          if (rowData[ri].cells.hasOwnProperty(ci)) {\r\n            var cellText = String(rowData[ri].cells[ci].text)\r\n            if ((cellText.indexOf(\"\\n\") == -1) && (cellText.indexOf(\"\\t\") == -1) && (cellText.indexOf(\"\\\"\") == -1)) {\r\n              copyText += cellText;\r\n            } else {\r\n              copyText += \"\\\"\" + cellText + \"\\\"\";\r\n            }\r\n          }\r\n        }\r\n      } else {\r\n        for (var ci = this.selector.range.sci; ci <= this.selector.range.eci; ci++) {\r\n          copyText += '\\t'\r\n        }\r\n      }\r\n      copyText += '\\n'\r\n    }\r\n    navigator.clipboard.writeText(copyText).then(function () {}, function (err) {\r\n      console.log('text copy to the system clipboard error  ', copyText, err);\r\n    });\r\n  }\r\n\r\n  cut() {\r\n    this.clipboard.cut(this.selector.range);\r\n  }\r\n\r\n  // what: all | text | format\r\n  paste(what = 'all', error = () => {}) {\r\n    // console.log('sIndexes:', sIndexes);\r\n    const { clipboard, selector } = this;\r\n    if (clipboard.isClear()) return false;\r\n    if (!canPaste.call(this, clipboard.range, selector.range, error)) return false;\r\n\r\n    this.changeData(() => {\r\n      if (clipboard.isCopy()) {\r\n        copyPaste.call(this, clipboard.range, selector.range, what);\r\n      } else if (clipboard.isCut()) {\r\n        cutPaste.call(this, clipboard.range, selector.range);\r\n      }\r\n    });\r\n    return true;\r\n  }\r\n\r\n  pasteFromText(txt) {\r\n    const lines = txt.split('\\r\\n').map(it => it.replace(/\"/g, '').split('\\t'));\r\n    if (lines.length > 0) lines.length -= 1;\r\n    const { rows, selector } = this;\r\n    this.changeData(() => {\r\n      rows.paste(lines, selector.range);\r\n    });\r\n  }\r\n\r\n  autofill(cellRange, what, error = () => {}) {\r\n    const srcRange = this.selector.range;\r\n    if (!canPaste.call(this, srcRange, cellRange, error)) return false;\r\n    this.changeData(() => {\r\n      copyPaste.call(this, srcRange, cellRange, what, true);\r\n    });\r\n    return true;\r\n  }\r\n\r\n  clearClipboard() {\r\n    this.clipboard.clear();\r\n  }\r\n\r\n  calSelectedRangeByEnd(ri, ci) {\r\n    const {\r\n      selector, rows, cols, merges,\r\n    } = this;\r\n    let {\r\n      sri, sci, eri, eci,\r\n    } = selector.range;\r\n    const cri = selector.ri;\r\n    const cci = selector.ci;\r\n    let [nri, nci] = [ri, ci];\r\n    if (ri < 0) nri = rows.len - 1;\r\n    if (ci < 0) nci = cols.len - 1;\r\n    if (nri > cri) [sri, eri] = [cri, nri];\r\n    else [sri, eri] = [nri, cri];\r\n    if (nci > cci) [sci, eci] = [cci, nci];\r\n    else [sci, eci] = [nci, cci];\r\n    selector.range = merges.union(new CellRange(\r\n      sri, sci, eri, eci,\r\n    ));\r\n    selector.range = merges.union(selector.range);\r\n    // console.log('selector.range:', selector.range);\r\n    return selector.range;\r\n  }\r\n\r\n  calSelectedRangeByStart(ri, ci) {\r\n    const {\r\n      selector, rows, cols, merges,\r\n    } = this;\r\n    let cellRange = merges.getFirstIncludes(ri, ci);\r\n    // console.log('cellRange:', cellRange, ri, ci, merges);\r\n    if (cellRange === null) {\r\n      cellRange = new CellRange(ri, ci, ri, ci);\r\n      if (ri === -1) {\r\n        cellRange.sri = 0;\r\n        cellRange.eri = rows.len - 1;\r\n      }\r\n      if (ci === -1) {\r\n        cellRange.sci = 0;\r\n        cellRange.eci = cols.len - 1;\r\n      }\r\n    }\r\n    selector.range = cellRange;\r\n    return cellRange;\r\n  }\r\n\r\n  setSelectedCellAttr(property, value) {\r\n    this.changeData(() => {\r\n      const { selector, styles, rows } = this;\r\n      if (property === 'merge') {\r\n        if (value) this.merge();\r\n        else this.unmerge();\r\n      } else if (property === 'border') {\r\n        setStyleBorders.call(this, value);\r\n      } else if (property === 'formula') {\r\n        // console.log('>>>', selector.multiple());\r\n        const { ri, ci, range } = selector;\r\n        if (selector.multiple()) {\r\n          const [rn, cn] = selector.size();\r\n          const {\r\n            sri, sci, eri, eci,\r\n          } = range;\r\n          if (rn > 1) {\r\n            for (let i = sci; i <= eci; i += 1) {\r\n              const cell = rows.getCellOrNew(eri + 1, i);\r\n              cell.text = `=${value}(${xy2expr(i, sri)}:${xy2expr(i, eri)})`;\r\n            }\r\n          } else if (cn > 1) {\r\n            const cell = rows.getCellOrNew(ri, eci + 1);\r\n            cell.text = `=${value}(${xy2expr(sci, ri)}:${xy2expr(eci, ri)})`;\r\n          }\r\n        } else {\r\n          const cell = rows.getCellOrNew(ri, ci);\r\n          cell.text = `=${value}()`;\r\n        }\r\n      } else {\r\n        selector.range.each((ri, ci) => {\r\n          const cell = rows.getCellOrNew(ri, ci);\r\n          let cstyle = {};\r\n          if (cell.style !== undefined) {\r\n            cstyle = helper.cloneDeep(styles[cell.style]);\r\n          }\r\n          if (property === 'format') {\r\n            cstyle.format = value;\r\n            cell.style = this.addStyle(cstyle);\r\n          } else if (property === 'font-bold' || property === 'font-italic'\r\n            || property === 'font-name' || property === 'font-size') {\r\n            const nfont = {};\r\n            nfont[property.split('-')[1]] = value;\r\n            cstyle.font = Object.assign(cstyle.font || {}, nfont);\r\n            cell.style = this.addStyle(cstyle);\r\n          } else if (property === 'strike' || property === 'textwrap'\r\n            || property === 'underline'\r\n            || property === 'align' || property === 'valign'\r\n            || property === 'color' || property === 'bgcolor') {\r\n            cstyle[property] = value;\r\n            cell.style = this.addStyle(cstyle);\r\n          } else {\r\n            cell[property] = value;\r\n          }\r\n        });\r\n      }\r\n    });\r\n  }\r\n\r\n  // state: input | finished\r\n  setSelectedCellText(text, state = 'input') {\r\n    const { autoFilter, selector, rows } = this;\r\n    const { ri, ci } = selector;\r\n    let nri = ri;\r\n    if (this.unsortedRowMap.has(ri)) {\r\n      nri = this.unsortedRowMap.get(ri);\r\n    }\r\n    const oldCell = rows.getCell(nri, ci);\r\n    const oldText = oldCell ? oldCell.text : '';\r\n    this.setCellText(nri, ci, text, state);\r\n    // replace filter.value\r\n    if (autoFilter.active()) {\r\n      const filter = autoFilter.getFilter(ci);\r\n      if (filter) {\r\n        const vIndex = filter.value.findIndex(v => v === oldText);\r\n        if (vIndex >= 0) {\r\n          filter.value.splice(vIndex, 1, text);\r\n        }\r\n        // console.log('filter:', filter, oldCell);\r\n      }\r\n    }\r\n    // this.resetAutoFilter();\r\n  }\r\n\r\n  getSelectedCell() {\r\n    const { ri, ci } = this.selector;\r\n    let nri = ri;\r\n    if (this.unsortedRowMap.has(ri)) {\r\n      nri = this.unsortedRowMap.get(ri);\r\n    }\r\n    return this.rows.getCell(nri, ci);\r\n  }\r\n\r\n  xyInSelectedRect(x, y) {\r\n    const {\r\n      left, top, width, height,\r\n    } = this.getSelectedRect();\r\n    const x1 = x - this.cols.indexWidth;\r\n    const y1 = y - this.rows.height;\r\n    // console.log('x:', x, ',y:', y, 'left:', left, 'top:', top);\r\n    return x1 > left && x1 < (left + width)\r\n      && y1 > top && y1 < (top + height);\r\n  }\r\n\r\n  getSelectedRect() {\r\n    return this.getRect(this.selector.range);\r\n  }\r\n\r\n  getClipboardRect() {\r\n    const { clipboard } = this;\r\n    if (!clipboard.isClear()) {\r\n      return this.getRect(clipboard.range);\r\n    }\r\n    return { left: -100, top: -100 };\r\n  }\r\n\r\n  getRect(cellRange) {\r\n    const {\r\n      scroll, rows, cols, exceptRowSet,\r\n    } = this;\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = cellRange;\r\n    // console.log('sri:', sri, ',sci:', sci, ', eri:', eri, ', eci:', eci);\r\n    // no selector\r\n    if (sri < 0 && sci < 0) {\r\n      return {\r\n        left: 0, l: 0, top: 0, t: 0, scroll,\r\n      };\r\n    }\r\n    const left = cols.sumWidth(0, sci);\r\n    const top = rows.sumHeight(0, sri, exceptRowSet);\r\n    const height = rows.sumHeight(sri, eri + 1, exceptRowSet);\r\n    const width = cols.sumWidth(sci, eci + 1);\r\n    // console.log('sri:', sri, ', sci:', sci, ', eri:', eri, ', eci:', eci);\r\n    let left0 = left - scroll.x;\r\n    let top0 = top - scroll.y;\r\n    const fsh = this.freezeTotalHeight();\r\n    const fsw = this.freezeTotalWidth();\r\n    if (fsw > 0 && fsw > left) {\r\n      left0 = left;\r\n    }\r\n    if (fsh > 0 && fsh > top) {\r\n      top0 = top;\r\n    }\r\n    return {\r\n      l: left,\r\n      t: top,\r\n      left: left0,\r\n      top: top0,\r\n      height,\r\n      width,\r\n      scroll,\r\n    };\r\n  }\r\n\r\n  getCellRectByXY(x, y) {\r\n    const {\r\n      scroll, merges, rows, cols,\r\n    } = this;\r\n    let { ri, top, height } = getCellRowByY.call(this, y, scroll.y);\r\n    let { ci, left, width } = getCellColByX.call(this, x, scroll.x);\r\n    if (ci === -1) {\r\n      width = cols.totalWidth();\r\n    }\r\n    if (ri === -1) {\r\n      height = rows.totalHeight();\r\n    }\r\n    if (ri >= 0 || ci >= 0) {\r\n      const merge = merges.getFirstIncludes(ri, ci);\r\n      if (merge) {\r\n        ri = merge.sri;\r\n        ci = merge.sci;\r\n        ({\r\n          left, top, width, height,\r\n        } = this.cellRect(ri, ci));\r\n      }\r\n    }\r\n    return {\r\n      ri, ci, left, top, width, height,\r\n    };\r\n  }\r\n\r\n  isSignleSelected() {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this.selector.range;\r\n    const cell = this.getCell(sri, sci);\r\n    if (cell && cell.merge) {\r\n      const [rn, cn] = cell.merge;\r\n      if (sri + rn === eri && sci + cn === eci) return true;\r\n    }\r\n    return !this.selector.multiple();\r\n  }\r\n\r\n  canUnmerge() {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = this.selector.range;\r\n    const cell = this.getCell(sri, sci);\r\n    if (cell && cell.merge) {\r\n      const [rn, cn] = cell.merge;\r\n      if (sri + rn === eri && sci + cn === eci) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  merge() {\r\n    const { selector, rows } = this;\r\n    if (this.isSignleSelected()) return;\r\n    const [rn, cn] = selector.size();\r\n    // console.log('merge:', rn, cn);\r\n    if (rn > 1 || cn > 1) {\r\n      const { sri, sci } = selector.range;\r\n      this.changeData(() => {\r\n        const cell = rows.getCellOrNew(sri, sci);\r\n        cell.merge = [rn - 1, cn - 1];\r\n        this.merges.add(selector.range);\r\n        // delete merge cells\r\n        this.rows.deleteCells(selector.range);\r\n        // console.log('cell:', cell, this.d);\r\n        this.rows.setCell(sri, sci, cell);\r\n      });\r\n    }\r\n  }\r\n\r\n  unmerge() {\r\n    const { selector } = this;\r\n    if (!this.isSignleSelected()) return;\r\n    const { sri, sci } = selector.range;\r\n    this.changeData(() => {\r\n      this.rows.deleteCell(sri, sci, 'merge');\r\n      this.merges.deleteWithin(selector.range);\r\n    });\r\n  }\r\n\r\n  canAutofilter() {\r\n    return !this.autoFilter.active();\r\n  }\r\n\r\n  autofilter() {\r\n    const { autoFilter, selector } = this;\r\n    this.changeData(() => {\r\n      if (autoFilter.active()) {\r\n        autoFilter.clear();\r\n        this.exceptRowSet = new Set();\r\n        this.sortedRowMap = new Map();\r\n        this.unsortedRowMap = new Map();\r\n      } else {\r\n        autoFilter.ref = selector.range.toString();\r\n      }\r\n    });\r\n  }\r\n\r\n  setAutoFilter(ci, order, operator, value) {\r\n    const { autoFilter } = this;\r\n    autoFilter.addFilter(ci, operator, value);\r\n    autoFilter.setSort(ci, order);\r\n    this.resetAutoFilter();\r\n  }\r\n\r\n  resetAutoFilter() {\r\n    const { autoFilter, rows } = this;\r\n    if (!autoFilter.active()) return;\r\n    const { sort } = autoFilter;\r\n    const { rset, fset } = autoFilter.filteredRows((r, c) => rows.getCell(r, c));\r\n    const fary = Array.from(fset);\r\n    const oldAry = Array.from(fset);\r\n    if (sort) {\r\n      fary.sort((a, b) => {\r\n        if (sort.order === 'asc') return a - b;\r\n        if (sort.order === 'desc') return b - a;\r\n        return 0;\r\n      });\r\n    }\r\n    this.exceptRowSet = rset;\r\n    this.sortedRowMap = new Map();\r\n    this.unsortedRowMap = new Map();\r\n    fary.forEach((it, index) => {\r\n      this.sortedRowMap.set(oldAry[index], it);\r\n      this.unsortedRowMap.set(it, oldAry[index]);\r\n    });\r\n  }\r\n\r\n  deleteCell(what = 'all') {\r\n    const { selector } = this;\r\n    this.changeData(() => {\r\n      this.rows.deleteCells(selector.range, what);\r\n      if (what === 'all' || what === 'format') {\r\n        this.merges.deleteWithin(selector.range);\r\n      }\r\n    });\r\n  }\r\n\r\n  // type: row | column\r\n  insert(type, n = 1) {\r\n    this.changeData(() => {\r\n      const { sri, sci } = this.selector.range;\r\n      const { rows, merges, cols } = this;\r\n      let si = sri;\r\n      if (type === 'row') {\r\n        rows.insert(sri, n);\r\n      } else if (type === 'column') {\r\n        rows.insertColumn(sci, n);\r\n        si = sci;\r\n        cols.len += 1;\r\n      }\r\n      merges.shift(type, si, n, (ri, ci, rn, cn) => {\r\n        const cell = rows.getCell(ri, ci);\r\n        cell.merge[0] += rn;\r\n        cell.merge[1] += cn;\r\n      });\r\n    });\r\n  }\r\n\r\n  // type: row | column\r\n  delete(type) {\r\n    this.changeData(() => {\r\n      const {\r\n        rows, merges, selector, cols,\r\n      } = this;\r\n      const { range } = selector;\r\n      const {\r\n        sri, sci, eri, eci,\r\n      } = selector.range;\r\n      const [rsize, csize] = selector.range.size();\r\n      let si = sri;\r\n      let size = rsize;\r\n      if (type === 'row') {\r\n        rows.delete(sri, eri);\r\n      } else if (type === 'column') {\r\n        rows.deleteColumn(sci, eci);\r\n        si = range.sci;\r\n        size = csize;\r\n        cols.len -= 1;\r\n      }\r\n      // console.log('type:', type, ', si:', si, ', size:', size);\r\n      merges.shift(type, si, -size, (ri, ci, rn, cn) => {\r\n        // console.log('ri:', ri, ', ci:', ci, ', rn:', rn, ', cn:', cn);\r\n        const cell = rows.getCell(ri, ci);\r\n        cell.merge[0] += rn;\r\n        cell.merge[1] += cn;\r\n        if (cell.merge[0] === 0 && cell.merge[1] === 0) {\r\n          delete cell.merge;\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  scrollx(x, cb) {\r\n    const { scroll, freeze, cols } = this;\r\n    const [, fci] = freeze;\r\n    const [\r\n      ci, left, width,\r\n    ] = helper.rangeReduceIf(fci, cols.len, 0, 0, x, i => cols.getWidth(i));\r\n    // console.log('fci:', fci, ', ci:', ci);\r\n    let x1 = left;\r\n    if (x > 0) x1 = x;//+= width;\r\n    if (scroll.x !== x1) {\r\n      scroll.ci = x > 0 ? ci : 0;\r\n      scroll.x = x1;\r\n      cb();\r\n    }\r\n  }\r\n\r\n  scrolly(y, cb) {\r\n    const { scroll, freeze, rows } = this;\r\n    const [fri] = freeze;\r\n    const [\r\n      ri, top, height,\r\n    ] = helper.rangeReduceIf(fri, rows.len, 0, 0, y, i => rows.getHeight(i));\r\n    let y1 = top;\r\n    if (y > 0) y1 = y;//+= height-20;\r\n    //console.log('scrolly', 'ri:', ri, ' ,y1:', y1, y, height, ri);\r\n    if (scroll.y !== y1) {\r\n      scroll.ri = y > 0 ? ri : 0;\r\n      scroll.y = y1;\r\n      cb();\r\n    }\r\n  }\r\n\r\n  cellRect(ri, ci) {\r\n    const { rows, cols } = this;\r\n    const left = cols.sumWidth(0, ci);\r\n    const top = rows.sumHeight(0, ri);\r\n    const cell = rows.getCell(ri, ci);\r\n    let width = cols.getWidth(ci);\r\n    let height = rows.getHeight(ri);\r\n    if (cell !== null) {\r\n      if (cell.merge) {\r\n        const [rn, cn] = cell.merge;\r\n        // console.log('cell.merge:', cell.merge);\r\n        if (rn > 0) {\r\n          for (let i = 1; i <= rn; i += 1) {\r\n            height += rows.getHeight(ri + i);\r\n          }\r\n        }\r\n        if (cn > 0) {\r\n          for (let i = 1; i <= cn; i += 1) {\r\n            width += cols.getWidth(ci + i);\r\n          }\r\n        }\r\n      }\r\n    }\r\n    // console.log('data:', this.d);\r\n    return {\r\n      left, top, width, height, cell,\r\n    };\r\n  }\r\n\r\n  getCell(ri, ci) {\r\n    return this.rows.getCell(ri, ci);\r\n  }\r\n\r\n  getCellTextOrDefault(ri, ci) {\r\n    const cell = this.getCell(ri, ci);\r\n    return (cell && cell.text) ? cell.text : '';\r\n  }\r\n\r\n  getCellStyle(ri, ci) {\r\n    const cell = this.getCell(ri, ci);\r\n    if (cell && cell.style !== undefined) {\r\n      return this.styles[cell.style];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getCellStyleOrDefault(ri, ci) {\r\n    const { styles, rows } = this;\r\n    const cell = rows.getCell(ri, ci);\r\n    const cellStyle = (cell && cell.style !== undefined) ? styles[cell.style] : {};\r\n    return helper.merge(this.defaultStyle(), cellStyle);\r\n  }\r\n\r\n  getSelectedCellStyle() {\r\n    const { ri, ci } = this.selector;\r\n    return this.getCellStyleOrDefault(ri, ci);\r\n  }\r\n\r\n  // state: input | finished\r\n  setCellText(ri, ci, text, state) {\r\n    const { rows, history, validations } = this;\r\n    if (state === 'finished') {\r\n      rows.setCellText(ri, ci, '');\r\n      history.add(this.getData());\r\n      rows.setCellText(ri, ci, text);\r\n    } else {\r\n      rows.setCellText(ri, ci, text);\r\n      this.change(this.getData());\r\n    }\r\n    // validator\r\n    validations.validate(ri, ci, text);\r\n  }\r\n\r\n  freezeIsActive() {\r\n    const [ri, ci] = this.freeze;\r\n    return ri > 0 || ci > 0;\r\n  }\r\n\r\n  setFreeze(ri, ci) {\r\n    this.changeData(() => {\r\n      this.freeze = [ri, ci];\r\n    });\r\n  }\r\n\r\n  freezeTotalWidth() {\r\n    return this.cols.sumWidth(0, this.freeze[1]);\r\n  }\r\n\r\n  freezeTotalHeight() {\r\n    return this.rows.sumHeight(0, this.freeze[0]);\r\n  }\r\n\r\n  setRowHeight(ri, height) {\r\n    this.changeData(() => {\r\n      this.rows.setHeight(ri, height);\r\n    });\r\n  }\r\n\r\n  setColWidth(ci, width) {\r\n    this.changeData(() => {\r\n      this.cols.setWidth(ci, width);\r\n    });\r\n  }\r\n\r\n  viewHeight() {\r\n    const { view, showToolbar } = this.settings;\r\n    let h = view.height();\r\n    h -= bottombarHeight;\r\n    if (showToolbar) {\r\n      h -= toolbarHeight;\r\n    }\r\n    return h;\r\n  }\r\n\r\n  viewWidth() {\r\n    return this.settings.view.width();\r\n  }\r\n\r\n  freezeViewRange() {\r\n    const [ri, ci] = this.freeze;\r\n    return new CellRange(0, 0, ri - 1, ci - 1, this.freezeTotalWidth(), this.freezeTotalHeight());\r\n  }\r\n\r\n  contentRange() {\r\n    const { rows, cols } = this;\r\n    const [ri, ci] = rows.maxCell();\r\n    const h = rows.sumHeight(0, ri + 1);\r\n    const w = cols.sumWidth(0, ci + 1);\r\n    return new CellRange(0, 0, ri, ci, w, h);\r\n  }\r\n\r\n  exceptRowTotalHeight(sri, eri) {\r\n    const { exceptRowSet, rows } = this;\r\n    const exceptRows = Array.from(exceptRowSet);\r\n    let exceptRowTH = 0;\r\n    exceptRows.forEach((ri) => {\r\n      if (ri < sri || ri > eri) {\r\n        const height = rows.getHeight(ri);\r\n        exceptRowTH += height;\r\n      }\r\n    });\r\n    return exceptRowTH;\r\n  }\r\n\r\n  viewRange() {\r\n    const {\r\n      scroll, rows, cols, freeze, exceptRowSet,\r\n    } = this;\r\n    // console.log('scroll:', scroll, ', freeze:', freeze)\r\n    let { ri, ci } = scroll;\r\n    if (ri <= 0) [ri] = freeze;\r\n    if (ci <= 0) [, ci] = freeze;\r\n\r\n    let [x, y] = [0, 0];\r\n    let [eri, eci] = [rows.len, cols.len];\r\n    for (let i = ri; i < rows.len; i += 1) {\r\n      if (!exceptRowSet.has(i)) {\r\n        y += rows.getHeight(i);\r\n        eri = i;\r\n      }\r\n      if (y > this.viewHeight()) break;\r\n    }\r\n    for (let j = ci; j < cols.len; j += 1) {\r\n      x += cols.getWidth(j);\r\n      eci = j;\r\n      if (x > this.viewWidth()) break;\r\n    }\r\n    // console.log(ri, ci, eri, eci, x, y);\r\n    return new CellRange(ri, ci, eri, eci, x, y);\r\n  }\r\n\r\n  eachMergesInView(viewRange, cb) {\r\n    this.merges.filterIntersects(viewRange)\r\n      .forEach(it => cb(it));\r\n  }\r\n\r\n  hideRowsOrCols() {\r\n    const { rows, cols, selector } = this;\r\n    const [rlen, clen] = selector.size();\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = selector.range;\r\n    if (rlen === rows.len) {\r\n      for (let ci = sci; ci <= eci; ci += 1) {\r\n        cols.setHide(ci, true);\r\n      }\r\n    } else if (clen === cols.len) {\r\n      for (let ri = sri; ri <= eri; ri += 1) {\r\n        rows.setHide(ri, true);\r\n      }\r\n    }\r\n  }\r\n\r\n  // type: row | col\r\n  // index row-index | col-index\r\n  unhideRowsOrCols(type, index) {\r\n    this[`${type}s`].unhide(index);\r\n  }\r\n\r\n  rowEach(min, max, cb) {\r\n    let y = 0;\r\n    const { rows } = this;\r\n    const frset = this.exceptRowSet;\r\n    const frary = [...frset];\r\n    let offset = 0;\r\n    for (let i = 0; i < frary.length; i += 1) {\r\n      if (frary[i] < min) {\r\n        offset += 1;\r\n      }\r\n    }\r\n    // console.log('min:', min, ', max:', max, ', scroll:', scroll);\r\n    for (let i = min + offset; i <= max + offset; i += 1) {\r\n      if (frset.has(i)) {\r\n        offset += 1;\r\n      } else {\r\n        const rowHeight = rows.getHeight(i);\r\n        if (rowHeight > 0) {\r\n          cb(i, y, rowHeight);\r\n          y += rowHeight;\r\n          //if (y > this.viewHeight()) break;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  colEach(min, max, cb) {\r\n    let x = 0;\r\n    const { cols } = this;\r\n    for (let i = min; i <= max; i += 1) {\r\n      const colWidth = cols.getWidth(i);\r\n      if (colWidth > 0) {\r\n        cb(i, x, colWidth);\r\n        x += colWidth;\r\n        //if (x > this.viewWidth()) break;\r\n      }\r\n    }\r\n  }\r\n\r\n  defaultStyle() {\r\n    return this.settings.style;\r\n  }\r\n\r\n  addStyle(nstyle) {\r\n    const { styles } = this;\r\n    // console.log('old.styles:', styles, nstyle);\r\n    for (let i = 0; i < styles.length; i += 1) {\r\n      const style = styles[i];\r\n      if (helper.equals(style, nstyle)) return i;\r\n    }\r\n    styles.push(nstyle);\r\n    return styles.length - 1;\r\n  }\r\n\r\n  changeData(cb) {\r\n    this.history.add(this.getData());\r\n    cb();\r\n    this.change(this.getData());\r\n  }\r\n\r\n  setData(d) {\r\n    Object.keys(d).forEach((property) => {\r\n      if (property === 'merges' || property === 'rows'\r\n        || property === 'cols' || property === 'validations') {\r\n        this[property].setData(d[property]);\r\n      } else if (property === 'freeze') {\r\n        const [x, y] = expr2xy(d[property]);\r\n        this.freeze = [y, x];\r\n      } else if (property === 'autofilter') {\r\n        this.autoFilter.setData(d[property]);\r\n      } else if (d[property] !== undefined) {\r\n        this[property] = d[property];\r\n      }\r\n    });\r\n    return this;\r\n  }\r\n\r\n  getData() {\r\n    const {\r\n      name, freeze, styles, merges, rows, cols, validations, autoFilter,\r\n    } = this;\r\n    return {\r\n      name,\r\n      freeze: xy2expr(freeze[1], freeze[0]),\r\n      styles,\r\n      merges: merges.getData(),\r\n      rows: rows.getData(),\r\n      cols: cols.getData(),\r\n      validations: validations.getData(),\r\n      autofilter: autoFilter.getData(),\r\n    };\r\n  }\r\n}\r\n","// docs\r\nimport './_.prototypes';\r\n\r\n/** default font list\r\n * @type {BaseFont[]}\r\n */\r\nconst baseFonts = [\r\n  { key: 'Arial', title: 'Arial' },\r\n  { key: 'Helvetica', title: 'Helvetica' },\r\n  { key: 'Source Sans Pro', title: 'Source Sans Pro' },\r\n  { key: 'Comic Sans MS', title: 'Comic Sans MS' },\r\n  { key: 'Courier New', title: 'Courier New' },\r\n  { key: 'Verdana', title: 'Verdana' },\r\n  { key: 'Lato', title: 'Lato' },\r\n];\r\n\r\n/** default fontSize list\r\n * @type {FontSize[]}\r\n */\r\nconst fontSizes = [\r\n  { pt: 7.5, px: 10 },\r\n  { pt: 8, px: 11 },\r\n  { pt: 9, px: 12 },\r\n  { pt: 10, px: 13 },\r\n  { pt: 10.5, px: 14 },\r\n  { pt: 11, px: 15 },\r\n  { pt: 12, px: 16 },\r\n  { pt: 14, px: 18.7 },\r\n  { pt: 15, px: 20 },\r\n  { pt: 16, px: 21.3 },\r\n  { pt: 18, px: 24 },\r\n  { pt: 22, px: 29.3 },\r\n  { pt: 24, px: 32 },\r\n  { pt: 26, px: 34.7 },\r\n  { pt: 36, px: 48 },\r\n  { pt: 42, px: 56 },\r\n  // { pt: 54, px: 71.7 },\r\n  // { pt: 63, px: 83.7 },\r\n  // { pt: 72, px: 95.6 },\r\n];\r\n\r\n/** map pt to px\r\n * @date 2019-10-10\r\n * @param {fontsizePT} pt\r\n * @returns {fontsizePX}\r\n */\r\nfunction getFontSizePxByPt(pt) {\r\n  for (let i = 0; i < fontSizes.length; i += 1) {\r\n    const fontSize = fontSizes[i];\r\n    if (fontSize.pt === pt) {\r\n      return fontSize.px;\r\n    }\r\n  }\r\n  return pt;\r\n}\r\n\r\n/** transform baseFonts to map\r\n * @date 2019-10-10\r\n * @param {BaseFont[]} [ary=[]]\r\n * @returns {object}\r\n */\r\nfunction fonts(ary = []) {\r\n  const map = {};\r\n  baseFonts.concat(ary).forEach((f) => {\r\n    map[f.key] = f;\r\n  });\r\n  return map;\r\n}\r\n\r\nexport default {};\r\nexport {\r\n  fontSizes,\r\n  fonts,\r\n  baseFonts,\r\n  getFontSizePxByPt,\r\n};\r\n","import { tf } from '../locale/locale';\r\n\r\nconst formatStringRender = v => v;\r\n\r\nconst formatNumberRender = (v) => {\r\n  // match \"-12.1\" or \"12\" or \"12.1\"\r\n  if (/^(-?\\d*.?\\d*)$/.test(v)) {\r\n    const v1 = Number(v).toFixed(2).toString();\r\n    const [first, ...parts] = v1.split('\\\\.');\r\n    return [first.replace(/(\\d)(?=(\\d{3})+(?!\\d))/g, '$1,'), ...parts];\r\n  }\r\n  return v;\r\n};\r\n\r\nconst baseFormats = [\r\n  {\r\n    key: 'normal',\r\n    title: tf('format.normal'),\r\n    type: 'string',\r\n    render: formatStringRender,\r\n  },\r\n  {\r\n    key: 'text',\r\n    title: tf('format.text'),\r\n    type: 'string',\r\n    render: formatStringRender,\r\n  },\r\n  {\r\n    key: 'number',\r\n    title: tf('format.number'),\r\n    type: 'number',\r\n    label: '1,000.12',\r\n    render: formatNumberRender,\r\n  },\r\n  {\r\n    key: 'percent',\r\n    title: tf('format.percent'),\r\n    type: 'number',\r\n    label: '10.12%',\r\n    render: v => `${v}%`,\r\n  },\r\n  {\r\n    key: 'rmb',\r\n    title: tf('format.rmb'),\r\n    type: 'number',\r\n    label: '￥10.00',\r\n    render: v => `￥${formatNumberRender(v)}`,\r\n  },\r\n  {\r\n    key: 'usd',\r\n    title: tf('format.usd'),\r\n    type: 'number',\r\n    label: '$10.00',\r\n    render: v => `$${formatNumberRender(v)}`,\r\n  },\r\n  {\r\n    key: 'eur',\r\n    title: tf('format.eur'),\r\n    type: 'number',\r\n    label: '€10.00',\r\n    render: v => `€${formatNumberRender(v)}`,\r\n  },\r\n  {\r\n    key: 'date',\r\n    title: tf('format.date'),\r\n    type: 'date',\r\n    label: '26/09/2008',\r\n    render: formatStringRender,\r\n  },\r\n  {\r\n    key: 'time',\r\n    title: tf('format.time'),\r\n    type: 'date',\r\n    label: '15:59:00',\r\n    render: formatStringRender,\r\n  },\r\n  {\r\n    key: 'datetime',\r\n    title: tf('format.datetime'),\r\n    type: 'date',\r\n    label: '26/09/2008 15:59:00',\r\n    render: formatStringRender,\r\n  },\r\n  {\r\n    key: 'duration',\r\n    title: tf('format.duration'),\r\n    type: 'date',\r\n    label: '24:01:00',\r\n    render: formatStringRender,\r\n  },\r\n];\r\n\r\n// const formats = (ary = []) => {\r\n//   const map = {};\r\n//   baseFormats.concat(ary).forEach((f) => {\r\n//     map[f.key] = f;\r\n//   });\r\n//   return map;\r\n// };\r\nconst formatm = {};\r\nbaseFormats.forEach((f) => {\r\n  formatm[f.key] = f;\r\n});\r\n\r\nexport default {\r\n};\r\nexport {\r\n  formatm,\r\n  baseFormats,\r\n};\r\n","/**\r\n  formula:\r\n    key\r\n    title\r\n    render\r\n*/\r\n/**\r\n * @typedef {object} Formula\r\n * @property {string} key\r\n * @property {function} title\r\n * @property {function} render\r\n */\r\nimport { tf } from '../locale/locale';\r\nimport { numberCalc, numberAvarage } from './helper';\r\n\r\n/** @type {Formula[]} */\r\nconst baseFormulas = [\r\n  {\r\n    key: 'SUM',\r\n    title: tf('formula.sum'),\r\n    render: ary => ary.reduce((a, b) => numberCalc('+', a, b, 0))\r\n  },\r\n  {\r\n    key: 'AVERAGE',\r\n    title: tf('formula.average'),\r\n    render: ary => numberAvarage(ary)\r\n    //render: ary => ary.reduce((a, b) => Number(a) + Number(b), 0) / ary.length,\r\n  },\r\n  {\r\n    key: 'MAX',\r\n    title: tf('formula.max'),\r\n    render: ary => Math.max(...ary.map(v => Number(v))),\r\n  },\r\n  {\r\n    key: 'MIN',\r\n    title: tf('formula.min'),\r\n    render: ary => Math.min(...ary.map(v => Number(v))),\r\n  },\r\n  {\r\n    key: 'IF',\r\n    title: tf('formula._if'),\r\n    render: ([b, t, f]) => (b ? t : f),\r\n  },\r\n  {\r\n    key: 'AND',\r\n    title: tf('formula.and'),\r\n    render: ary => ary.every(it => it),\r\n  },\r\n  {\r\n    key: 'OR',\r\n    title: tf('formula.or'),\r\n    render: ary => ary.some(it => it),\r\n  },\r\n  {\r\n    key: 'CONCAT',\r\n    title: tf('formula.concat'),\r\n    render: ary => ary.join(''),\r\n  },\r\n  /* support:  1 + A1 + B2 * 3\r\n  {\r\n    key: 'DIVIDE',\r\n    title: tf('formula.divide'),\r\n    render: ary => ary.reduce((a, b) => Number(a) / Number(b)),\r\n  },\r\n  {\r\n    key: 'PRODUCT',\r\n    title: tf('formula.product'),\r\n    render: ary => ary.reduce((a, b) => Number(a) * Number(b),1),\r\n  },\r\n  {\r\n    key: 'SUBTRACT',\r\n    title: tf('formula.subtract'),\r\n    render: ary => ary.reduce((a, b) => Number(a) - Number(b)),\r\n  },\r\n  */\r\n];\r\n\r\nconst formulas = baseFormulas;\r\n\r\n// const formulas = (formulaAry = []) => {\r\n//   const formulaMap = {};\r\n//   baseFormulas.concat(formulaAry).forEach((f) => {\r\n//     formulaMap[f.key] = f;\r\n//   });\r\n//   return formulaMap;\r\n// };\r\nconst formulam = {};\r\nbaseFormulas.forEach((f) => {\r\n  formulam[f.key] = f;\r\n});\r\n\r\nexport default {\r\n};\r\n\r\nexport {\r\n  formulam,\r\n  formulas,\r\n  baseFormulas,\r\n};\r\n","/* eslint-disable no-param-reassign */\r\nfunction cloneDeep(obj) {\r\n  return JSON.parse(JSON.stringify(obj));\r\n}\r\n\r\nconst mergeDeep = (object = {}, ...sources) => {\r\n  sources.forEach((source) => {\r\n    Object.keys(source).forEach((key) => {\r\n      const v = source[key];\r\n      // console.log('k:', key, ', v:', source[key], typeof v, v instanceof Object);\r\n      if (typeof v === 'string' || typeof v === 'number' || typeof v === 'boolean') {\r\n        object[key] = v;\r\n      } else if (typeof v !== 'function' && !Array.isArray(v) && v instanceof Object) {\r\n        object[key] = object[key] || {};\r\n        mergeDeep(object[key], v);\r\n      } else {\r\n        object[key] = v;\r\n      }\r\n    });\r\n  });\r\n  // console.log('::', object);\r\n  return object;\r\n};\r\n\r\nfunction equals(obj1, obj2) {\r\n  const keys = Object.keys(obj1);\r\n  if (keys.length !== Object.keys(obj2).length) return false;\r\n  for (let i = 0; i < keys.length; i += 1) {\r\n    const k = keys[i];\r\n    const v1 = obj1[k];\r\n    const v2 = obj2[k];\r\n    if (v2 === undefined) return false;\r\n    if (typeof v1 === 'string' || typeof v1 === 'number' || typeof v1 === 'boolean') {\r\n      if (v1 !== v2) return false;\r\n    } else if (Array.isArray(v1)) {\r\n      if (v1.length !== v2.length) return false;\r\n      for (let ai = 0; ai < v1.length; ai += 1) {\r\n        if (!equals(v1[ai], v2[ai])) return false;\r\n      }\r\n    } else if (typeof v1 !== 'function' && !Array.isArray(v1) && v1 instanceof Object) {\r\n      if (!equals(v1, v2)) return false;\r\n    }\r\n  }\r\n  return true;\r\n}\r\n\r\n/*\r\n  objOrAry: obejct or Array\r\n  cb: (value, index | key) => { return value }\r\n*/\r\nconst sum = (objOrAry, cb = value => value) => {\r\n  let total = 0;\r\n  let size = 0;\r\n  Object.keys(objOrAry).forEach((key) => {\r\n    total += cb(objOrAry[key], key);\r\n    size += 1;\r\n  });\r\n  return [total, size];\r\n};\r\n\r\nfunction deleteProperty(obj, property) {\r\n  const oldv = obj[`${property}`];\r\n  delete obj[`${property}`];\r\n  return oldv;\r\n}\r\n\r\nfunction rangeReduceIf(min, max, inits, initv, ifv, getv) {\r\n  let s = inits;\r\n  let v = initv;\r\n  let i = min;\r\n  for (; i < max; i += 1) {\r\n    if (s > ifv) break;\r\n    v = getv(i);\r\n    s += v;\r\n  }\r\n  return [i, s - v, v];\r\n}\r\n\r\nfunction rangeSum(min, max, getv) {\r\n  let s = 0;\r\n  for (let i = min; i < max; i += 1) {\r\n    s += getv(i);\r\n  }\r\n  return s;\r\n}\r\n\r\nfunction rangeEach(min, max, cb) {\r\n  for (let i = min; i < max; i += 1) {\r\n    cb(i);\r\n  }\r\n}\r\n\r\nfunction arrayEquals(a1, a2) {\r\n  if (a1.length === a2.length) {\r\n    for (let i = 0; i < a1.length; i += 1) {\r\n      if (a1[i] !== a2[i]) return false;\r\n    }\r\n  } else return false;\r\n  return true;\r\n}\r\n\r\nfunction digits(a) {\r\n  const v = `${a}`;\r\n  let ret = 0;\r\n  let flag = false;\r\n  for (let i = 0; i < v.length; i += 1) {\r\n    if (flag === true) ret += 1;\r\n    if (v.charAt(i) === '.') flag = true;\r\n  }\r\n  return ret;\r\n}\r\n\r\nfunction convertStringToNumber(a) {\r\n  a = a.toString();\r\n  let obj = {};\r\n  const regexValue =  /(\\$*)\\s*(\\d*(\\.|,)*\\d*)\\s*(hrs*|hr*|%*)/m;\r\n  let allMatches = a.match(regexValue);\r\n  obj.prefix = allMatches[1];\r\n  obj.sufix = allMatches[4];\r\n  obj.number = allMatches[2].replace(\",\", \"\");\r\n  return obj;\r\n}\r\n\r\nexport function numberCalc(type, a1, a2) {\r\n  let prefix = \"\";\r\n  let sufix = \"\";\r\n  if (Number.isNaN(a1) || Number.isNaN(a2)) {\r\n    return a1 + type + a2;\r\n  }\r\n  let receivedObject = convertStringToNumber(a1);\r\n  a1 = receivedObject.number;\r\n  prefix = receivedObject.prefix;\r\n  sufix = receivedObject.sufix;\r\n  receivedObject = convertStringToNumber(a2);\r\n  a2 = receivedObject.number;\r\n  prefix = receivedObject.prefix;\r\n  sufix = receivedObject.sufix;\r\n  const al1 = digits(a1);\r\n  const al2 = digits(a2);\r\n  const num1 = Number(a1);\r\n  const num2 = Number(a2);\r\n  let ret = 0;\r\n  if (type === '-') {\r\n    ret = num1 - num2;\r\n  } else if (type === '+') {\r\n    ret = num1 + num2;\r\n  } else if (type === '*') {\r\n    ret = num1 * num2;\r\n  } else if (type === '/') {\r\n    ret = num1 / num2;\r\n    if (digits(ret) > 5) return ret.toFixed(2);\r\n    return ret;\r\n  }\r\n  return prefix + ret.toFixed(Math.max(al1, al2)) + sufix;\r\n}\r\n\r\nexport function numberAvarage(numbersArray){\r\n  const sum = numbersArray.reduce((a, b) => numberCalc('+', a, b, 0));\r\n  let receivedObject = convertStringToNumber(sum);\r\n  const newSum = receivedObject.number / numbersArray.length;\r\n  return receivedObject.prefix + newSum.toFixed(2) + receivedObject.sufix;\r\n}\r\n\r\nexport default {\r\n  cloneDeep,\r\n  merge: (...sources) => mergeDeep({}, ...sources),\r\n  equals,\r\n  arrayEquals,\r\n  sum,\r\n  rangeEach,\r\n  rangeSum,\r\n  rangeReduceIf,\r\n  deleteProperty,\r\n  numberCalc,\r\n};\r\n","// import helper from '../helper';\r\n\r\nexport default class History {\r\n  constructor() {\r\n    this.undoItems = [];\r\n    this.redoItems = [];\r\n  }\r\n\r\n  add(data) {\r\n    this.undoItems.push(JSON.stringify(data));\r\n    this.redoItems = [];\r\n  }\r\n\r\n  canUndo() {\r\n    return this.undoItems.length > 0;\r\n  }\r\n\r\n  canRedo() {\r\n    return this.redoItems.length > 0;\r\n  }\r\n\r\n  undo(currentd, cb) {\r\n    const { undoItems, redoItems } = this;\r\n    if (this.canUndo()) {\r\n      redoItems.push(JSON.stringify(currentd));\r\n      cb(JSON.parse(undoItems.pop()));\r\n    }\r\n  }\r\n\r\n  redo(currentd, cb) {\r\n    const { undoItems, redoItems } = this;\r\n    if (this.canRedo()) {\r\n      undoItems.push(JSON.stringify(currentd));\r\n      cb(JSON.parse(redoItems.pop()));\r\n    }\r\n  }\r\n}\r\n","import { CellRange } from './cell_range';\r\n\r\nclass Merges {\r\n  constructor(d = []) {\r\n    this._ = d;\r\n  }\r\n\r\n  forEach(cb) {\r\n    this._.forEach(cb);\r\n  }\r\n\r\n  deleteWithin(cr) {\r\n    this._ = this._.filter(it => !it.within(cr));\r\n  }\r\n\r\n  getFirstIncludes(ri, ci) {\r\n    for (let i = 0; i < this._.length; i += 1) {\r\n      const it = this._[i];\r\n      if (it.includes(ri, ci)) {\r\n        return it;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  filterIntersects(cellRange) {\r\n    return new Merges(this._.filter(it => it.intersects(cellRange)));\r\n  }\r\n\r\n  intersects(cellRange) {\r\n    for (let i = 0; i < this._.length; i += 1) {\r\n      const it = this._[i];\r\n      if (it.intersects(cellRange)) {\r\n        // console.log('intersects');\r\n        return true;\r\n      }\r\n    }\r\n    return false;\r\n  }\r\n\r\n  union(cellRange) {\r\n    let cr = cellRange;\r\n    this._.forEach((it) => {\r\n      if (it.intersects(cr)) {\r\n        cr = it.union(cr);\r\n      }\r\n    });\r\n    return cr;\r\n  }\r\n\r\n  add(cr) {\r\n    this.deleteWithin(cr);\r\n    this._.push(cr);\r\n  }\r\n\r\n  // type: row | column\r\n  shift(type, index, n, cbWithin) {\r\n    this._.forEach((cellRange) => {\r\n      const {\r\n        sri, sci, eri, eci,\r\n      } = cellRange;\r\n      const range = cellRange;\r\n      if (type === 'row') {\r\n        if (sri >= index) {\r\n          range.sri += n;\r\n          range.eri += n;\r\n        } else if (sri < index && index <= eri) {\r\n          range.eri += n;\r\n          cbWithin(sri, sci, n, 0);\r\n        }\r\n      } else if (type === 'column') {\r\n        if (sci >= index) {\r\n          range.sci += n;\r\n          range.eci += n;\r\n        } else if (sci < index && index <= eci) {\r\n          range.eci += n;\r\n          cbWithin(sri, sci, 0, n);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  move(cellRange, rn, cn) {\r\n    this._.forEach((it1) => {\r\n      const it = it1;\r\n      if (it.within(cellRange)) {\r\n        it.eri += rn;\r\n        it.sri += rn;\r\n        it.sci += cn;\r\n        it.eci += cn;\r\n      }\r\n    });\r\n  }\r\n\r\n  setData(merges) {\r\n    this._ = merges.map(merge => CellRange.valueOf(merge));\r\n    return this;\r\n  }\r\n\r\n  getData() {\r\n    return this._.map(merge => merge.toString());\r\n  }\r\n}\r\n\r\nexport default {};\r\nexport {\r\n  Merges,\r\n};\r\n","import helper from './helper';\r\nimport { expr2expr } from './alphabet';\r\n\r\nclass Rows {\r\n  constructor({ len, height }) {\r\n    this._ = {};\r\n    this.len = len;\r\n    // default row height\r\n    this.height = height;\r\n  }\r\n\r\n  getHeight(ri) {\r\n    if (this.isHide(ri)) return 0;\r\n    const row = this.get(ri);\r\n    if (row && row.height) {\r\n      return row.height;\r\n    }\r\n    return this.height;\r\n  }\r\n\r\n  setHeight(ri, v) {\r\n    const row = this.getOrNew(ri);\r\n    row.height = v;\r\n  }\r\n\r\n  unhide(idx) {\r\n    let index = idx;\r\n    while (index > 0) {\r\n      index -= 1;\r\n      if (this.isHide(index)) {\r\n        this.setHide(index, false);\r\n      } else break;\r\n    }\r\n  }\r\n\r\n  isHide(ri) {\r\n    const row = this.get(ri);\r\n    return row && row.hide;\r\n  }\r\n\r\n  setHide(ri, v) {\r\n    const row = this.getOrNew(ri);\r\n    if (v === true) row.hide = true;\r\n    else delete row.hide;\r\n  }\r\n\r\n  setStyle(ri, style) {\r\n    const row = this.getOrNew(ri);\r\n    row.style = style;\r\n  }\r\n\r\n  sumHeight(min, max, exceptSet) {\r\n    return helper.rangeSum(min, max, (i) => {\r\n      if (exceptSet && exceptSet.has(i)) return 0;\r\n      return this.getHeight(i);\r\n    });\r\n  }\r\n\r\n  totalHeight() {\r\n    return this.sumHeight(0, this.len);\r\n  }\r\n\r\n  get(ri) {\r\n    return this._[ri];\r\n  }\r\n\r\n  getOrNew(ri) {\r\n    this._[ri] = this._[ri] || { cells: {} };\r\n    return this._[ri];\r\n  }\r\n\r\n  getCell(ri, ci) {\r\n    const row = this.get(ri);\r\n    if (row !== undefined && row.cells !== undefined && row.cells[ci] !== undefined) {\r\n      return row.cells[ci];\r\n    }\r\n    return null;\r\n  }\r\n\r\n  getCellMerge(ri, ci) {\r\n    const cell = this.getCell(ri, ci);\r\n    if (cell && cell.merge) return cell.merge;\r\n    return [0, 0];\r\n  }\r\n\r\n  getCellOrNew(ri, ci) {\r\n    const row = this.getOrNew(ri);\r\n    row.cells[ci] = row.cells[ci] || {};\r\n    return row.cells[ci];\r\n  }\r\n\r\n  // what: all | text | format\r\n  setCell(ri, ci, cell, what = 'all') {\r\n    const row = this.getOrNew(ri);\r\n    if (what === 'all') {\r\n      row.cells[ci] = cell;\r\n    } else if (what === 'text') {\r\n      row.cells[ci] = row.cells[ci] || {};\r\n      row.cells[ci].text = cell.text;\r\n    } else if (what === 'format') {\r\n      row.cells[ci] = row.cells[ci] || {};\r\n      row.cells[ci].style = cell.style;\r\n      if (cell.merge) row.cells[ci].merge = cell.merge;\r\n    }\r\n  }\r\n\r\n  setCellText(ri, ci, text) {\r\n    const cell = this.getCellOrNew(ri, ci);\r\n    cell.text = text;\r\n  }\r\n\r\n  // what: all | format | text\r\n  copyPaste(srcCellRange, dstCellRange, what, autofill = false, cb = () => {}) {\r\n    const {\r\n      sri, sci, eri, eci,\r\n    } = srcCellRange;\r\n    const dsri = dstCellRange.sri;\r\n    const dsci = dstCellRange.sci;\r\n    const deri = dstCellRange.eri;\r\n    const deci = dstCellRange.eci;\r\n    const [rn, cn] = srcCellRange.size();\r\n    const [drn, dcn] = dstCellRange.size();\r\n    // console.log(srcIndexes, dstIndexes);\r\n    let isAdd = true;\r\n    let dn = 0;\r\n    if (deri < sri || deci < sci) {\r\n      isAdd = false;\r\n      if (deri < sri) dn = drn;\r\n      else dn = dcn;\r\n    }\r\n    for (let i = sri; i <= eri; i += 1) {\r\n      if (this._[i]) {\r\n        for (let j = sci; j <= eci; j += 1) {\r\n          if (this._[i].cells && this._[i].cells[j]) {\r\n            for (let ii = dsri; ii <= deri; ii += rn) {\r\n              for (let jj = dsci; jj <= deci; jj += cn) {\r\n                const nri = ii + (i - sri);\r\n                const nci = jj + (j - sci);\r\n                const ncell = helper.cloneDeep(this._[i].cells[j]);\r\n                // ncell.text\r\n                if (autofill && ncell && ncell.text && ncell.text.length > 0) {\r\n                  const { text } = ncell;\r\n                  let n = (jj - dsci) + (ii - dsri) + 2;\r\n                  if (!isAdd) {\r\n                    n -= dn + 1;\r\n                  }\r\n                  if (text[0] === '=') {\r\n                    ncell.text = text.replace(/[a-zA-Z]{1,3}\\d+/g, (word) => {\r\n                      let [xn, yn] = [0, 0];\r\n                      if (sri === dsri) {\r\n                        xn = n - 1;\r\n                        // if (isAdd) xn -= 1;\r\n                      } else {\r\n                        yn = n - 1;\r\n                      }\r\n                      if (/^\\d+$/.test(word)) return word;\r\n                      return expr2expr(word, xn, yn);\r\n                    });\r\n                  } else if ((rn <= 1 && cn > 1 && (dsri > eri || deri < sri))\r\n                    || (cn <= 1 && rn > 1 && (dsci > eci || deci < sci))\r\n                    || (rn <= 1 && cn <= 1)) {\r\n                    const result = /[\\\\.\\d]+$/.exec(text);\r\n                    // console.log('result:', result);\r\n                    if (result !== null) {\r\n                      const index = Number(result[0]) + n - 1;\r\n                      ncell.text = text.substring(0, result.index) + index;\r\n                    }\r\n                  }\r\n                }\r\n                this.setCell(nri, nci, ncell, what);\r\n                cb(nri, nci, ncell);\r\n              }\r\n            }\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  cutPaste(srcCellRange, dstCellRange) {\r\n    const ncellmm = {};\r\n    this.each((ri) => {\r\n      this.eachCells(ri, (ci) => {\r\n        let nri = parseInt(ri, 10);\r\n        let nci = parseInt(ci, 10);\r\n        if (srcCellRange.includes(ri, ci)) {\r\n          nri = dstCellRange.sri + (nri - srcCellRange.sri);\r\n          nci = dstCellRange.sci + (nci - srcCellRange.sci);\r\n        }\r\n        ncellmm[nri] = ncellmm[nri] || { cells: {} };\r\n        ncellmm[nri].cells[nci] = this._[ri].cells[ci];\r\n      });\r\n    });\r\n    this._ = ncellmm;\r\n  }\r\n\r\n  // src: Array<Array<String>>\r\n  paste(src, dstCellRange) {\r\n    if (src.length <= 0) return;\r\n    const { sri, sci } = dstCellRange;\r\n    src.forEach((row, i) => {\r\n      const ri = sri + i;\r\n      row.forEach((cell, j) => {\r\n        const ci = sci + j;\r\n        this.setCellText(ri, ci, cell);\r\n      });\r\n    });\r\n  }\r\n\r\n  insert(sri, n = 1) {\r\n    const ndata = {};\r\n    this.each((ri, row) => {\r\n      let nri = parseInt(ri, 10);\r\n      if (nri >= sri) {\r\n        nri += n;\r\n        this.eachCells(ri, (ci, cell) => {\r\n          if (cell.text && cell.text[0] === '=') {\r\n            cell.text = cell.text.replace(/[a-zA-Z]{1,3}\\d+/g, word => expr2expr(word, 0, n, (x, y) => y >= sri));\r\n          }\r\n        });\r\n      }\r\n      ndata[nri] = row;\r\n    });\r\n    this._ = ndata;\r\n    this.len += n;\r\n  }\r\n\r\n  delete(sri, eri) {\r\n    const n = eri - sri + 1;\r\n    const ndata = {};\r\n    this.each((ri, row) => {\r\n      const nri = parseInt(ri, 10);\r\n      if (nri < sri) {\r\n        ndata[nri] = row;\r\n      } else if (ri > eri) {\r\n        ndata[nri - n] = row;\r\n        this.eachCells(ri, (ci, cell) => {\r\n          if (cell.text && cell.text[0] === '=') {\r\n            cell.text = cell.text.replace(/[a-zA-Z]{1,3}\\d+/g, word => expr2expr(word, 0, -n, (x, y) => y > eri));\r\n          }\r\n        });\r\n      }\r\n    });\r\n    this._ = ndata;\r\n    this.len -= n;\r\n  }\r\n\r\n  insertColumn(sci, n = 1) {\r\n    this.each((ri, row) => {\r\n      const rndata = {};\r\n      this.eachCells(ri, (ci, cell) => {\r\n        let nci = parseInt(ci, 10);\r\n        if (nci >= sci) {\r\n          nci += n;\r\n          if (cell.text && cell.text[0] === '=') {\r\n            cell.text = cell.text.replace(/[a-zA-Z]{1,3}\\d+/g, word => expr2expr(word, n, 0, x => x >= sci));\r\n          }\r\n        }\r\n        rndata[nci] = cell;\r\n      });\r\n      row.cells = rndata;\r\n    });\r\n  }\r\n\r\n  deleteColumn(sci, eci) {\r\n    const n = eci - sci + 1;\r\n    this.each((ri, row) => {\r\n      const rndata = {};\r\n      this.eachCells(ri, (ci, cell) => {\r\n        const nci = parseInt(ci, 10);\r\n        if (nci < sci) {\r\n          rndata[nci] = cell;\r\n        } else if (nci > eci) {\r\n          rndata[nci - n] = cell;\r\n          if (cell.text && cell.text[0] === '=') {\r\n            cell.text = cell.text.replace(/[a-zA-Z]{1,3}\\d+/g, word => expr2expr(word, -n, 0, x => x > eci));\r\n          }\r\n        }\r\n      });\r\n      row.cells = rndata;\r\n    });\r\n  }\r\n\r\n  // what: all | text | format | merge\r\n  deleteCells(cellRange, what = 'all') {\r\n    cellRange.each((i, j) => {\r\n      this.deleteCell(i, j, what);\r\n    });\r\n  }\r\n\r\n  // what: all | text | format | merge\r\n  deleteCell(ri, ci, what = 'all') {\r\n    const row = this.get(ri);\r\n    if (row !== null) {\r\n      const cell = this.getCell(ri, ci);\r\n      if (cell !== null) {\r\n        if (what === 'all') {\r\n          delete row.cells[ci];\r\n        } else if (what === 'text') {\r\n          if (cell.text) delete cell.text;\r\n          if (cell.value) delete cell.value;\r\n        } else if (what === 'format') {\r\n          if (cell.style !== undefined) delete cell.style;\r\n          if (cell.merge) delete cell.merge;\r\n        } else if (what === 'merge') {\r\n          if (cell.merge) delete cell.merge;\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  maxCell() {\r\n    const keys = Object.keys(this._);\r\n    const ri = keys[keys.length - 1];\r\n    const col = this._[ri];\r\n    if (col) {\r\n      const { cells } = col;\r\n      const ks = Object.keys(cells);\r\n      const ci = ks[ks.length - 1];\r\n      return [parseInt(ri, 10), parseInt(ci, 10)];\r\n    }\r\n    return [0, 0];\r\n  }\r\n\r\n  each(cb) {\r\n    Object.entries(this._).forEach(([ri, row]) => {\r\n      cb(ri, row);\r\n    });\r\n  }\r\n\r\n  eachCells(ri, cb) {\r\n    if (this._[ri] && this._[ri].cells) {\r\n      Object.entries(this._[ri].cells).forEach(([ci, cell]) => {\r\n        cb(ci, cell);\r\n      });\r\n    }\r\n  }\r\n\r\n  setData(d) {\r\n    if (d.len) {\r\n      this.len = d.len;\r\n      delete d.len;\r\n    }\r\n    this._ = d;\r\n  }\r\n\r\n  getData() {\r\n    const { len } = this;\r\n    return Object.assign({ len }, this._);\r\n  }\r\n}\r\n\r\nexport default {};\r\nexport {\r\n  Rows,\r\n};\r\n","export default class Scroll {\r\n  constructor() {\r\n    this.x = 0; // left\r\n    this.y = 0; // top\r\n    this.ri = 0; // cell row-index\r\n    this.ci = 0; // cell col-index\r\n  }\r\n}\r\n","import { CellRange } from './cell_range';\r\n\r\nexport default class Selector {\r\n  constructor() {\r\n    this.range = new CellRange(0, 0, 0, 0);\r\n    this.ri = 0;\r\n    this.ci = 0;\r\n  }\r\n\r\n  multiple() {\r\n    return this.range.multiple();\r\n  }\r\n\r\n  setIndexes(ri, ci) {\r\n    this.ri = ri;\r\n    this.ci = ci;\r\n  }\r\n\r\n  size() {\r\n    return this.range.size();\r\n  }\r\n}\r\n","import Validator from './validator';\r\nimport { CellRange } from './cell_range';\r\n\r\nclass Validation {\r\n  constructor(mode, refs, validator) {\r\n    this.refs = refs;\r\n    this.mode = mode; // cell\r\n    this.validator = validator;\r\n  }\r\n\r\n  includes(ri, ci) {\r\n    const { refs } = this;\r\n    for (let i = 0; i < refs.length; i += 1) {\r\n      const cr = CellRange.valueOf(refs[i]);\r\n      if (cr.includes(ri, ci)) return true;\r\n    }\r\n    return false;\r\n  }\r\n\r\n  addRef(ref) {\r\n    this.remove(CellRange.valueOf(ref));\r\n    this.refs.push(ref);\r\n  }\r\n\r\n  remove(cellRange) {\r\n    const nrefs = [];\r\n    this.refs.forEach((it) => {\r\n      const cr = CellRange.valueOf(it);\r\n      if (cr.intersects(cellRange)) {\r\n        const crs = cr.difference(cellRange);\r\n        crs.forEach(it1 => nrefs.push(it1.toString()));\r\n      } else {\r\n        nrefs.push(it);\r\n      }\r\n    });\r\n    this.refs = nrefs;\r\n  }\r\n\r\n  getData() {\r\n    const { refs, mode, validator } = this;\r\n    const {\r\n      type, required, operator, value,\r\n    } = validator;\r\n    return {\r\n      refs, mode, type, required, operator, value,\r\n    };\r\n  }\r\n\r\n  static valueOf({\r\n    refs, mode, type, required, operator, value,\r\n  }) {\r\n    return new Validation(mode, refs, new Validator(type, required, value, operator));\r\n  }\r\n}\r\nclass Validations {\r\n  constructor() {\r\n    this._ = [];\r\n    // ri_ci: errMessage\r\n    this.errors = new Map();\r\n  }\r\n\r\n  getError(ri, ci) {\r\n    return this.errors.get(`${ri}_${ci}`);\r\n  }\r\n\r\n  validate(ri, ci, text) {\r\n    const v = this.get(ri, ci);\r\n    const key = `${ri}_${ci}`;\r\n    const { errors } = this;\r\n    if (v !== null) {\r\n      const [flag, message] = v.validator.validate(text);\r\n      if (!flag) {\r\n        errors.set(key, message);\r\n      } else {\r\n        errors.delete(key);\r\n      }\r\n    } else {\r\n      errors.delete(key);\r\n    }\r\n    return true;\r\n  }\r\n\r\n  // type: date|number|phone|email|list\r\n  // validator: { required, value, operator }\r\n  add(mode, ref, {\r\n    type, required, value, operator,\r\n  }) {\r\n    const validator = new Validator(\r\n      type, required, value, operator,\r\n    );\r\n    const v = this.getByValidator(validator);\r\n    if (v !== null) {\r\n      v.addRef(ref);\r\n    } else {\r\n      this._.push(new Validation(mode, [ref], validator));\r\n    }\r\n  }\r\n\r\n  getByValidator(validator) {\r\n    for (let i = 0; i < this._.length; i += 1) {\r\n      const v = this._[i];\r\n      if (v.validator.equals(validator)) {\r\n        return v;\r\n      }\r\n    }\r\n    return null;\r\n  }\r\n\r\n  get(ri, ci) {\r\n    for (let i = 0; i < this._.length; i += 1) {\r\n      const v = this._[i];\r\n      if (v.includes(ri, ci)) return v;\r\n    }\r\n    return null;\r\n  }\r\n\r\n  remove(cellRange) {\r\n    this.each((it) => {\r\n      it.remove(cellRange);\r\n    });\r\n  }\r\n\r\n  each(cb) {\r\n    this._.forEach(it => cb(it));\r\n  }\r\n\r\n  getData() {\r\n    return this._.filter(it => it.refs.length > 0).map(it => it.getData());\r\n  }\r\n\r\n  setData(d) {\r\n    this._ = d.map(it => Validation.valueOf(it));\r\n  }\r\n}\r\n\r\nexport default {};\r\nexport {\r\n  Validations,\r\n};\r\n","import { t } from '../locale/locale';\r\nimport helper from './helper';\r\n\r\nconst rules = {\r\n  phone: /^[1-9]\\d{10}$/,\r\n  email: /w+([-+.]w+)*@w+([-.]w+)*.w+([-.]w+)*/,\r\n};\r\n\r\nfunction returnMessage(flag, key, ...arg) {\r\n  let message = '';\r\n  if (!flag) {\r\n    message = t(`validation.${key}`, ...arg);\r\n  }\r\n  return [flag, message];\r\n}\r\n\r\nexport default class Validator {\r\n  // operator: b|nb|eq|neq|lt|lte|gt|gte\r\n  // type: date|number|list|phone|email\r\n  constructor(type, required, value, operator) {\r\n    this.required = required;\r\n    this.value = value;\r\n    this.type = type;\r\n    this.operator = operator;\r\n    this.message = '';\r\n  }\r\n\r\n  parseValue(v) {\r\n    const { type } = this;\r\n    if (type === 'date') {\r\n      return new Date(v);\r\n    }\r\n    if (type === 'number') {\r\n      return Number(v);\r\n    }\r\n    return v;\r\n  }\r\n\r\n  equals(other) {\r\n    let flag = this.type === other.type\r\n      && this.required === other.required\r\n      && this.operator === other.operator;\r\n    if (flag) {\r\n      if (Array.isArray(this.value)) {\r\n        flag = helper.arrayEquals(this.value, other.value);\r\n      } else {\r\n        flag = this.value === other.value;\r\n      }\r\n    }\r\n    return flag;\r\n  }\r\n\r\n  values() {\r\n    return this.value.split(',');\r\n  }\r\n\r\n  validate(v) {\r\n    const {\r\n      required, operator, value, type,\r\n    } = this;\r\n    if (required && /^\\s*$/.test(v)) {\r\n      return returnMessage(false, 'required');\r\n    }\r\n    if (/^\\s*$/.test(v)) return [true];\r\n    if (rules[type] && !rules[type].test(v)) {\r\n      return returnMessage(false, 'notMatch');\r\n    }\r\n    if (type === 'list') {\r\n      return returnMessage(this.values().includes(v), 'notIn');\r\n    }\r\n    if (operator) {\r\n      const v1 = this.parseValue(v);\r\n      if (operator === 'be') {\r\n        const [min, max] = value;\r\n        return returnMessage(\r\n          v1 >= this.parseValue(min) && v1 <= this.parseValue(max),\r\n          'between',\r\n          min,\r\n          max,\r\n        );\r\n      }\r\n      if (operator === 'nbe') {\r\n        const [min, max] = value;\r\n        return returnMessage(\r\n          v1 < this.parseValue(min) || v1 > this.parseValue(max),\r\n          'notBetween',\r\n          min,\r\n          max,\r\n        );\r\n      }\r\n      if (operator === 'eq') {\r\n        return returnMessage(\r\n          v1 === this.parseValue(value),\r\n          'equal',\r\n          value,\r\n        );\r\n      }\r\n      if (operator === 'neq') {\r\n        return returnMessage(\r\n          v1 !== this.parseValue(value),\r\n          'notEqual',\r\n          value,\r\n        );\r\n      }\r\n      if (operator === 'lt') {\r\n        return returnMessage(\r\n          v1 < this.parseValue(value),\r\n          'lessThan',\r\n          value,\r\n        );\r\n      }\r\n      if (operator === 'lte') {\r\n        return returnMessage(\r\n          v1 <= this.parseValue(value),\r\n          'lessThanEqual',\r\n          value,\r\n        );\r\n      }\r\n      if (operator === 'gt') {\r\n        return returnMessage(\r\n          v1 > this.parseValue(value),\r\n          'greaterThan',\r\n          value,\r\n        );\r\n      }\r\n      if (operator === 'gte') {\r\n        return returnMessage(\r\n          v1 >= this.parseValue(value),\r\n          'greaterThanEqual',\r\n          value,\r\n        );\r\n      }\r\n    }\r\n    return [true];\r\n  }\r\n}\r\n","/* global window, document */\r\nimport { h } from './component/element';\r\nimport DataProxy from './core/data_proxy';\r\nimport Sheet from './component/sheet';\r\nimport Bottombar from './component/bottombar';\r\nimport { cssPrefix } from './config';\r\nimport { locale } from './locale/locale';\r\nimport './index.less';\r\n\r\n\r\nclass Spreadsheet {\r\n  constructor(selectors, options = {}) {\r\n    let targetEl = selectors;\r\n    this.options = options;\r\n    this.sheetIndex = 1;\r\n    this.datas = [];\r\n    if (typeof selectors === 'string') {\r\n      targetEl = document.querySelector(selectors);\r\n    }\r\n    this.bottombar = new Bottombar(() => {\r\n      const d = this.addSheet();\r\n      this.sheet.resetData(d);\r\n    }, (index) => {\r\n      const d = this.datas[index];\r\n      this.sheet.resetData(d);\r\n    }, () => {\r\n      this.deleteSheet();\r\n    }, (index, value) => {\r\n      this.datas[index].name = value;\r\n    });\r\n    this.data = this.addSheet();\r\n    const rootEl = h('div', `${cssPrefix}`)\r\n      .on('contextmenu', evt => evt.preventDefault());\r\n    // create canvas element\r\n    targetEl.appendChild(rootEl.el);\r\n    this.sheet = new Sheet(rootEl, this.data);\r\n    rootEl.child(this.bottombar.el);\r\n  }\r\n\r\n  addSheet(name, active = true) {\r\n    const n = name || `sheet${this.sheetIndex}`;\r\n    const d = new DataProxy(n, this.options);\r\n    d.change = (...args) => {\r\n      this.sheet.trigger('change', ...args);\r\n    };\r\n    this.datas.push(d);\r\n    // console.log('d:', n, d, this.datas);\r\n    this.bottombar.addItem(n, active);\r\n    this.sheetIndex += 1;\r\n    return d;\r\n  }\r\n\r\n  deleteSheet() {\r\n    const [oldIndex, nindex] = this.bottombar.deleteItem();\r\n    if (oldIndex >= 0) {\r\n      this.datas.splice(oldIndex, 1);\r\n      if (nindex >= 0) this.sheet.resetData(this.datas[nindex]);\r\n    }\r\n  }\r\n\r\n  loadData(data) {\r\n    const ds = Array.isArray(data) ? data : [data];\r\n    this.bottombar.clear();\r\n    this.datas = [];\r\n    if (ds.length > 0) {\r\n      for (let i = 0; i < ds.length; i += 1) {\r\n        const it = ds[i];\r\n        const nd = this.addSheet(it.name, i === 0);\r\n        nd.setData(it);\r\n        if (i === 0) {\r\n          this.sheet.resetData(nd);\r\n        }\r\n      }\r\n    }\r\n    return this;\r\n  }\r\n\r\n  getData() {\r\n    return this.datas.map(it => it.getData());\r\n  }\r\n\r\n  cellText(ri, ci, text, sheetIndex = 0) {\r\n    this.datas[sheetIndex].setCellText(ri, ci, text, 'finished');\r\n    return this;\r\n  }\r\n\r\n  cell(ri, ci, sheetIndex = 0) {\r\n    return this.datas[sheetIndex].getCell(ri, ci);\r\n  }\r\n\r\n  cellStyle(ri, ci, sheetIndex = 0) {\r\n    return this.datas[sheetIndex].getCellStyle(ri, ci);\r\n  }\r\n\r\n  reRender() {\r\n    this.sheet.table.render();\r\n    return this;\r\n  }\r\n\r\n  on(eventName, func) {\r\n    this.sheet.on(eventName, func);\r\n    return this;\r\n  }\r\n\r\n  validate() {\r\n    const { validations } = this.data;\r\n    return validations.errors.size <= 0;\r\n  }\r\n\r\n  change(cb) {\r\n    this.sheet.on('change', cb);\r\n    return this;\r\n  }\r\n\r\n  jumpToRow(row){\r\n   this.sheet.jump(row);\r\n  }\r\n\r\n  static locale(lang, message) {\r\n    locale(lang, message);\r\n  }\r\n}\r\n\r\nconst spreadsheet = (el, options = {}) => new Spreadsheet(el, options);\r\n\r\nif (window) {\r\n  window.x_spreadsheet = spreadsheet;\r\n  window.x_spreadsheet.locale = (lang, message) => locale(lang, message);\r\n}\r\n\r\nexport default Spreadsheet;\r\nexport {\r\n  spreadsheet,\r\n};\r\n","// extracted by mini-css-extract-plugin","export default {\r\n  toolbar: {\r\n    undo: 'Undo',\r\n    redo: 'Redo',\r\n    print: 'Print',\r\n    paintformat: 'Paint format',\r\n    clearformat: 'Clear format',\r\n    format: 'Format',\r\n    fontName: 'Font',\r\n    fontSize: 'Font size',\r\n    fontBold: 'Font bold',\r\n    fontItalic: 'Font italic',\r\n    underline: 'Underline',\r\n    strike: 'Strike',\r\n    color: 'Text color',\r\n    bgcolor: 'Fill color',\r\n    border: 'Borders',\r\n    merge: 'Merge cells',\r\n    align: 'Horizontal align',\r\n    valign: 'Vertical align',\r\n    textwrap: 'Text wrapping',\r\n    freeze: 'Freeze cell',\r\n    autofilter: 'Filter',\r\n    formula: 'Functions',\r\n    jumpToCell: 'Jump to cell',\r\n    more: 'More',\r\n  },\r\n  contextmenu: {\r\n    copy: 'Copy',\r\n    cut: 'Cut',\r\n    paste: 'Paste',\r\n    pasteValue: 'Paste values only',\r\n    pasteFormat: 'Paste format only',\r\n    hide: 'Hide',\r\n    insertRow: 'Insert row',\r\n    insertColumn: 'Insert column',\r\n    deleteSheet: 'Delete',\r\n    deleteRow: 'Delete row',\r\n    deleteColumn: 'Delete column',\r\n    deleteCell: 'Delete cell',\r\n    deleteCellText: 'Delete cell text',\r\n    validation: 'Data validations',\r\n    cellprintable: 'Enable export',\r\n    cellnonprintable: 'Disable export',\r\n    celleditable: 'Enable editing',\r\n    cellnoneditable: 'Disable editing',\r\n  },\r\n  print: {\r\n    size: 'Paper size',\r\n    orientation: 'Page orientation',\r\n    orientations: ['Landscape', 'Portrait'],\r\n  },\r\n  format: {\r\n    normal: 'Normal',\r\n    text: 'Plain Text',\r\n    number: 'Number',\r\n    percent: 'Percent',\r\n    rmb: 'RMB',\r\n    usd: 'USD',\r\n    eur: 'EUR',\r\n    date: 'Date',\r\n    time: 'Time',\r\n    datetime: 'Date time',\r\n    duration: 'Duration',\r\n  },\r\n  formula: {\r\n    sum: 'Sum',\r\n    average: 'Average',\r\n    max: 'Max',\r\n    min: 'Min',\r\n    _if: 'IF',\r\n    and: 'AND',\r\n    or: 'OR',\r\n    concat: 'Concat',\r\n  },\r\n  validation: {\r\n    required: 'it must be required',\r\n    notMatch: 'it not match its validation rule',\r\n    between: 'it is between {} and {}',\r\n    notBetween: 'it is not between {} and {}',\r\n    notIn: 'it is not in list',\r\n    equal: 'it equal to {}',\r\n    notEqual: 'it not equal to {}',\r\n    lessThan: 'it less than {}',\r\n    lessThanEqual: 'it less than or equal to {}',\r\n    greaterThan: 'it greater than {}',\r\n    greaterThanEqual: 'it greater than or equal to {}',\r\n  },\r\n  error: {\r\n    pasteForMergedCell: 'Unable to do this for merged cells',\r\n  },\r\n  calendar: {\r\n    weeks: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],\r\n    months: ['January', 'February', 'March', 'April', 'May', 'June', 'July', 'August', 'September', 'October', 'November', 'December'],\r\n  },\r\n  button: {\r\n    next: 'Next',\r\n    cancel: 'Cancel',\r\n    remove: 'Remove',\r\n    save: 'Save',\r\n    ok: 'OK',\r\n  },\r\n  sort: {\r\n    desc: 'Sort Z -> A',\r\n    asc: 'Sort A -> Z',\r\n  },\r\n  filter: {\r\n    empty: 'empty',\r\n  },\r\n  dataValidation: {\r\n    mode: 'Mode',\r\n    range: 'Cell Range',\r\n    criteria: 'Criteria',\r\n    modeType: {\r\n      cell: 'Cell',\r\n      column: 'Colun',\r\n      row: 'Row',\r\n    },\r\n    type: {\r\n      list: 'List',\r\n      number: 'Number',\r\n      date: 'Date',\r\n      phone: 'Phone',\r\n      email: 'Email',\r\n    },\r\n    operator: {\r\n      be: 'between',\r\n      nbe: 'not betwwen',\r\n      lt: 'less than',\r\n      lte: 'less than or equal to',\r\n      gt: 'greater than',\r\n      gte: 'greater than or equal to',\r\n      eq: 'equal to',\r\n      neq: 'not equal to',\r\n    },\r\n  },\r\n};\r\n","/* global window */\r\nimport en from './en';\r\n\r\n// Defines the fallback language as English\r\nlet $languages = ['en'];\r\nconst $messages = {\r\n  en,\r\n};\r\n\r\nfunction translate(key, messages) {\r\n  if (messages) {\r\n    // Return the translation from the first language in the languages array\r\n    // that has a value for the provided key.\r\n    for (const lang of $languages) {\r\n      if (!messages[lang]) break;\r\n\r\n      let message = messages[lang];\r\n\r\n      // Splits the key at '.' except where escaped as '\\.'\r\n      const keys = key.match(/(?:\\\\.|[^.])+/g);\r\n\r\n      for (let i = 0; i < keys.length; i += 1) {\r\n        const property = keys[i];\r\n        const value = message[property];\r\n\r\n        // If value doesn't exist, try next language\r\n        if (!value) break;\r\n\r\n        if (i === keys.length - 1) return value;\r\n\r\n        // Move down to the next level of the messages object\r\n        message = value;\r\n      }\r\n    }\r\n  }\r\n\r\n  return undefined;\r\n}\r\n\r\nfunction t(key) {\r\n  let v = translate(key, $messages);\r\n  if (!v && window && window.x_spreadsheet && window.x_spreadsheet.$messages) {\r\n    v = translate(key, window.x_spreadsheet.$messages);\r\n  }\r\n  return v || '';\r\n}\r\n\r\nfunction tf(key) {\r\n  return () => t(key);\r\n}\r\n\r\n// If clearLangList is set to false, lang will be added to the front of the\r\n// languages array. The languages in the language array are searched in order\r\n// to find a translation. This allows the use of other languages as a fallback\r\n// if lang is missing some keys. The language array is preloaded with English.\r\n// To set the languages array to only include lang, set clearLangList to true.\r\nfunction locale(lang, message, clearLangList=false) {\r\n  if (clearLangList) {\r\n    $languages = [lang];\r\n  } else {\r\n    // Append to front of array.\r\n    // Translation method will use the first language in the list that has a\r\n    // matching key.\r\n    $languages.unshift(lang);\r\n  }\r\n\r\n  if (message) {\r\n    $messages[lang] = message;\r\n  }\r\n}\r\n\r\nexport default {\r\n  t,\r\n};\r\n\r\nexport {\r\n  locale,\r\n  t,\r\n  tf,\r\n};\r\n"],"sourceRoot":""}